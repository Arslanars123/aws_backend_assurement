import{r as o,a as I,b as N,j as e,R as c,C as n}from"./index-Ccc50bvq.js";import{C as w}from"./ComponentContainerCard-jOvJBIs5.js";import{P as E}from"./PageMetaData-CwfTEKnL.js";import{B as i}from"./urls-BhGeBsON.js";import{F as m}from"./FormLabel-MCMdPdRI.js";import{F as D}from"./FormControl-CO_Uebzp.js";import{F as x}from"./FormSelect-Bt2BskkO.js";import{B as L}from"./Button-Czdzc6_d.js";import"./Card-Bd-5a1Ef.js";import"./divWithClassName-B0s-A9qq.js";const $={item:null,level:null,startDate:"",projectId:null},U=()=>{const[r,d]=o.useState($),[j,h]=o.useState(!1),v=I(),{companyId:p,projectId:u}=N(),S=t=>{const{name:s,value:a}=t.target;d({...r,[s]:a})},f=t=>{r[t.target.name]=t.target.value,d({...r})};o.useEffect(()=>{(async()=>{try{const a=await(await fetch(`${i}/get-items`)).json();g(a)}catch(s){console.error("Error fetching items:",s)}})()},[]);const[b,g]=o.useState([]);o.useEffect(()=>{(async()=>{try{const a=await(await fetch(`${i}/get-levels`)).json();C(a)}catch(s){console.error("Error fetching levels:",s)}})()},[]);const[y,C]=o.useState([]),F=async t=>{t.preventDefault(),h(!0);try{const s=new FormData;Object.keys(r).forEach(l=>{s.append(l,r[l])}),s.append("companyId",p),s.append("projectsId",u);const a=await fetch(`${i}/store-scheme`,{method:"POST",body:s});if(a.ok){const l=await a.json();v(`/dashboard/companies/view/${p}/projects/view/${u}`,{state:{success:"Certificate Scheme added successfully!"}})}else console.error("Error:",a.statusText)}catch(s){console.error("Fetch error:",s)}h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Add Certificate Scheme"}),e.jsx("form",{onSubmit:F,children:e.jsx(c,{className:"justify-content-center",children:e.jsx(n,{children:e.jsx(w,{title:"Add Certificate Scheme",children:e.jsxs(c,{children:[e.jsx(n,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(m,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(n,{sm:"10",children:e.jsx(D,{value:r.startDate,onChange:S,name:"startDate",type:"date",id:"example-text-input"})})]})}),e.jsx(n,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(m,{className:"col-sm-2 col-form-label text-end",children:"Select Item"}),e.jsx(n,{sm:"10",children:e.jsxs(x,{value:r.item,name:"item",onChange:f,children:[e.jsx("option",{defaultValue:"",children:"Select item"}),b.map(t=>e.jsx("option",{value:t._id,children:t.name},t.id))]})})]})}),e.jsx(n,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(m,{className:"col-sm-2 col-form-label text-end",children:"Select Level"}),e.jsx(n,{sm:"10",children:e.jsxs(x,{value:r.level,name:"level",onChange:f,children:[e.jsx("option",{defaultValue:"",children:"Select level"}),y.map(t=>e.jsx("option",{value:t._id,children:t.name},t.id))]})})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(n,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(L,{disabled:j,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{U as default};

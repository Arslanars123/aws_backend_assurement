import{c as w,a as y,r as p,b as g,j as a,R as d,C as x}from"./index-CRUsPvgo.js";import{C as n}from"./ComponentContainerCard--Y8wSC_7.js";import{B as i}from"./urls-BhGeBsON.js";import{D as E}from"./DetailPage-BkyOUIw0.js";import"./Card-Bhvh6y0G.js";import"./divWithClassName-C1rBczNJ.js";import"./Button-DJ2Vf-Um.js";import"./FormLabel-BGcO0FaX.js";import"./Modal-T_ze21Do.js";import"./useWindow-FzgpBURZ.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-J9GKRj3N.js";import"./Image--5rbSURm.js";const A=()=>{const{setLoading:m}=w(),r=y(),[u,h]=p.useState([]),{companyId:c,projectId:o,independentControllerId:t}=g(),l=()=>{r(`/dashboard/companies/view/${c}/independentController/edit/${t}`)},f=async()=>{try{if(o){const e=await fetch(`${i}/remove-user-from-project`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,projectId:o})});if(e.ok){const s=await e.json();r(`/dashboard/companies/view/${c}/projects/view/${o}`),console.log("Success:",s)}else console.error("Error:",e.statusText)}else{const e=await fetch(`${i}/delete-user/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const s=await e.json();r(`/dashboard/companies/view/${c}`),console.log("Success:",s)}else console.error("Error:",e.statusText)}}catch(e){console.error("Error:",e)}},j=async()=>{try{m(!0);const s=await(await fetch(`${i}/get-user-detail/${t}`)).json();s==null||delete s._id,s==null||delete s.projectsId,s==null||delete s.companyId,s==null||delete s.phone,s==null||delete s.address,s==null||delete s.postalCode,s==null||delete s.city,s==null||delete s.userRole,s==null||delete s.password,s==null||delete s.picture,s==null||delete s.password,h(s)}catch(e){console.error("Error fetching workers:",e)}finally{m(!1)}};return p.useEffect(()=>{t&&j()},[t]),a.jsx(d,{className:"justify-content-center",children:a.jsx(x,{lg:"12",children:a.jsx(n,{title:"Independent Controller",children:a.jsx(d,{children:a.jsx(E,{data:u,handleEdit:o?null:l,handleDelete:f})})})})})};export{A as default};

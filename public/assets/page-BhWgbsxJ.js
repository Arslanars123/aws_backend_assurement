import{c as E,r,G as k,b as z,j as e,R as o,C as a}from"./index-DXGzwTDX.js";import{C as L}from"./ComponentContainerCard-BdqSoKWJ.js";import{B as d}from"./urls-BhGeBsON.js";import{D as V}from"./DetailPage-3D8jVXEJ.js";import{P as _}from"./page-Cgly_tzG.js";import"./Card-BF03U0a9.js";import"./divWithClassName-WthjuUgX.js";import"./Button-Q8P5klcO.js";import"./FormLabel-MRPFOBK0.js";import"./Modal-pNXPnpNb.js";import"./useWindow-D1WaCGvc.js";import"./DataKey-DeFhA7Nw.js";import"./NoopTransition-CDGbDsLX.js";import"./Image-DXZMDITT.js";import"./FormRange-B5lnwdc-.js";import"./PDFButton-CA3UgHlN.js";const ee=()=>{var u,N,w,S,y,P,C;const{setLoading:h}=E(),{selectedProfessionKey:j}=r.useContext(k),[s,D]=r.useState(null),[v,O]=r.useState(null),[p,g]=r.useState({show:!1,pdfFile:null,name:null}),{staticId:c,projectId:$}=z(),A=async()=>{var n;try{h(!0);const l=await(await fetch(`${d}/get-project-detail`,{method:"POST",body:JSON.stringify({projectId:$}),headers:{"Content-Type":"application/json"}})).json(),F=j||Object.keys(l==null?void 0:l.professionAssociatedData)[0],f=l==null?void 0:l.professionAssociatedData[F],x=(n=f==null?void 0:f.staticReportRegistration)==null?void 0:n.find(t=>{var b;return((b=t==null?void 0:t._id)==null?void 0:b.toString())===(c==null?void 0:c.toString())});if(x){D(x);const t={...x};delete t._id,delete t.annotatedPdfs,delete t.drawing,delete t.pictureObjects,delete t.pictures,O(t)}}catch(i){console.error("Error fetching static report:",i)}finally{h(!1)}};r.useEffect(()=>{A()},[j]);const m=(n,i)=>{g({show:!0,pdfFile:n,name:i})};return e.jsxs(o,{className:"justify-content-center",children:[e.jsx(a,{lg:"12",children:e.jsx(L,{title:"View static",children:e.jsxs(o,{children:[e.jsx(V,{data:v}),(s==null?void 0:s.drawing)&&e.jsxs(e.Fragment,{children:[e.jsx(a,{lg:"12",children:e.jsxs(o,{className:"mb-2",children:[e.jsx(a,{sm:"2",className:"text-end",children:e.jsx("strong",{children:"Main Drawings:"})}),e.jsx(a,{sm:"10",children:(N=(u=s==null?void 0:s.drawing)==null?void 0:u.mainDrawings)==null?void 0:N.map((n,i)=>e.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[e.jsx("div",{className:"me-2 cursor-pointer",onClick:()=>m(`${d}/uploads/${n.stored}`,n.original),children:e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),e.jsx("div",{className:"small text-muted",children:n.original})]},i))})]})}),((S=(w=s==null?void 0:s.drawing)==null?void 0:w.childDrawings)==null?void 0:S.length)>0&&e.jsx(a,{lg:"12",children:e.jsxs(o,{className:"mb-2",children:[e.jsx(a,{sm:"2",className:"text-end",children:e.jsx("strong",{children:"Child Drawings:"})}),e.jsx(a,{sm:"10",children:(P=(y=s==null?void 0:s.drawing)==null?void 0:y.childDrawings)==null?void 0:P.map((n,i)=>e.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[e.jsx("div",{className:"me-2 cursor-pointer",onClick:()=>m(`${d}/uploads/${n.stored}`,n.original),children:e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),e.jsx("div",{className:"small text-muted",children:n.original})]},i))})]})})]}),(s==null?void 0:s.annotatedPdfs)&&s.annotatedPdfs.length>0&&e.jsx(a,{lg:"12",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(a,{sm:"2",className:"text-end",children:e.jsx("strong",{children:"Annotated PDFs:"})}),e.jsx(a,{sm:"10",className:"d-flex flex-wrap",children:(C=s==null?void 0:s.annotatedPdfs)==null?void 0:C.map((n,i)=>e.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[e.jsx("div",{className:"me-2 cursor-pointer",onClick:()=>m(`${d}/uploads/${n.filename}`,n.originalName),children:e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),e.jsx("div",{className:"small text-muted",children:n.originalName})]},i))})]})})]})})}),p.show&&e.jsx(_,{drawDotsOnPdf:p,setDrawDotsOnPdf:g,readOnly:!0})]})};export{ee as default};

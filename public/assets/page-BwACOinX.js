import{r,j as t,R as T,C as R,a as O}from"./index-BMHGnWcK.js";import{B}from"./urls-CvG9cD6N.js";import{f as v,a as L}from"./utils-CJbgxhCN.js";import{F as i}from"./Form-3MPO2ubb.js";import{B as A}from"./Button-Dwvyfso6.js";import{A as N,C as U,T as $}from"./TextField-CiuEKT8f.js";import"./FormCheck-CxttwEL4.js";import"./FormControl-BhCdWsRE.js";import"./FormContext-_pJuLZf_.js";import"./FormGroup-lh_nrrWS.js";import"./FormLabel-BBJljh0R.js";import"./FormRange-BUeztKfe.js";import"./FormSelect-Dr1VIvZ_.js";import"./useFormControl-78CrNPlx.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-C8K2eoCJ.js";const G=({initialValues:f={},onSave:S,onCancel:y,options:m={},otherOptions:p={}})=>{const{fieldTypes:d={},placeholders:C={},dateFields:F=[]}=p,[x,u]=r.useState(f),[g,o]=r.useState({}),c=e=>{const{name:a,value:n}=e.target;u(l=>({...l,[a]:n}))},h=e=>{const{name:a,files:n}=e.target;(n==null?void 0:n.length)>0&&o(l=>({...l,[a]:n.length===1?n[0]:Array.from(n)}))},b=(e,a)=>{u(n=>({...n,[e]:a}))},w=e=>{e.preventDefault();const a={...x,...g};S(a)},D=e=>{const a=x[e]??"",n=F.includes(e)||L(a),l=d[e]||"text";return l==="file"?t.jsx(i.Control,{type:"file",name:e,onChange:h,accept:"image/*"}):m[e]?t.jsx(N,{multiple:!0,options:m[e],getOptionLabel:s=>s.name||s.label||"",value:Array.isArray(a)?a:[],onChange:(s,j)=>b(e,j),renderInput:s=>t.jsx($,{...s,variant:"outlined",placeholder:`Select ${v(e)}`}),renderTags:(s,j)=>s.map((E,P)=>r.createElement(U,{label:E.name||E.label,...j({index:P}),key:P}))}):n?t.jsx(i.Control,{type:"date",name:e,value:a?a.split("T")[0]:"",onChange:c,placeholder:C[e]}):t.jsx(i.Control,{type:l,name:e,value:a,onChange:c,placeholder:C[e]||`Enter ${v(e)}`})};return t.jsxs(i,{onSubmit:w,children:[t.jsx(T,{children:Object.keys(f).map(e=>t.jsx(R,{md:"6",className:"mb-3",children:t.jsxs(i.Group,{children:[t.jsx(i.Label,{children:v(e)}),D(e)]})},e))}),t.jsxs("div",{className:"d-flex justify-content-end mt-4",children:[t.jsx(A,{variant:"secondary",onClick:y,className:"me-2",children:"Cancel"}),t.jsx(A,{type:"submit",variant:"primary",children:"Submit"})]})]})},I={name:"",casenr:"",address:"",phone:"",contactPerson:""},ae=()=>{const[f,S]=r.useState(I),[y,m]=r.useState(!1),p=O(),[d,C]=r.useState(null),[F,x]=r.useState(null);r.useRef(null);const u=async g=>{m(!0);try{const o=new FormData;Object.entries(g).forEach(([h,b])=>{o.append(h,b)}),d&&o.append("picture",d);const c=await fetch(`${B}/store-company`,{method:"POST",body:o});if(c.ok){const h=await c.json();p("/dashboard/generalFlowCompanies",{state:{success:"Company added successfully!"}})}else console.error("Error:",c.statusText)}catch(o){console.error("Fetch error:",o)}m(!1)};return t.jsx(t.Fragment,{children:t.jsx(G,{initialValues:{name:"",address:"",postalCode:"",city:"",email:"",companyPhone:"",contactPerson:"",contactPhone:"",cvr:"",picture:""},onSave:u,onCancel:()=>p("/dashboard/generalFlowCompanies"),otherOptions:{fieldTypes:{companyPhone:"tel",contactPhone:"tel",cvr:"text",picture:"file"},placeholders:{name:"Company name...",address:"Enter company address...",postalCode:"Enter postal code...",city:"Enter city...",email:"Enter email address...",companyPhone:"Enter company phone...",contactPerson:"Enter contact person...",contactPhone:"Enter contact phone...",cvr:"Enter CVR number..."}}})})};export{ae as default};

import{r as i,j as e,R as d,C as l}from"./index-BMHGnWcK.js";import{P as N}from"./PageMetaData-Bgn24qMg.js";import{A as b}from"./AllDataTables-ZbhvUrUN.js";import{B as E}from"./urls-CvG9cD6N.js";import{C as m}from"./Card-BQIi55Il.js";import{F as r}from"./Form-3MPO2ubb.js";import"./ComponentContainerCard-DqzcDgtW.js";import"./Button-Dwvyfso6.js";import"./index--BG4zqiO.js";import"./IconifyIcon-BZrnxXiy.js";import"./index-urKZMkfA.js";import"./Table-B4OyJ1fv.js";import"./Modal-BvTxh5Lm.js";import"./useWindow-X1vIdSxZ.js";import"./useEventCallback-aoYRPbpt.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-Cvueq9hZ.js";import"./divWithClassName-BnTSImTn.js";import"./Spinner-XoudD7db.js";import"./Alert-BSTIsewH.js";import"./hook-ShtcephR.js";import"./Anchor-BpTvChcP.js";import"./Image-BWlBzfxc.js";import"./FormCheck-CxttwEL4.js";import"./FormControl-BhCdWsRE.js";import"./FormContext-_pJuLZf_.js";import"./FormGroup-lh_nrrWS.js";import"./FormLabel-BBJljh0R.js";import"./FormRange-BUeztKfe.js";import"./FormSelect-Dr1VIvZ_.js";const te=()=>{const[n,p]=i.useState([]),[h,u]=i.useState(!1),[o,g]=i.useState(""),a=async()=>{console.log("ðŸ” Admin refreshUsers called with:",{selectedEuroCode:o}),u(!0);try{const s={language:"EN",euroCode:o||""},x=`${E}/get-all-controls-of-static-report`;console.log("ðŸ” Admin API Call Details:"),console.log("  URL:",x),console.log("  Request Body:",s);const c=await(await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();console.log("ðŸ“Š Admin API Response:",c);const j=c.entries.map(t=>{var f;return{_id:t._id,pos:t.pos||"N/A",checkingThe:t.checkingThe||"N/A",subject:t.subject||"N/A",constructionPart:t.constructionPart||"N/A",basis:t.basis||"N/A",controlMethod:t.controlMethod||"N/A",circumference:t.circumference||"N/A",acceptanceCriteria:t.acceptanceCriteria||"N/A",time:t.time||"N/A",rowIndex:t.rowIndex||"N/A",language:t.language||"N/A",subjectMatterId:t.subjectMatterId||"N/A",euroCode:t.euroCode||"N/A",totalEntries:((f=c.meta)==null?void 0:f.entriesCount)||0,entries:[t]}});p(j),console.log("ðŸ“ Loaded admin control documents:",j.length)}catch(s){console.error("Error loading admin control documents:",s),p([])}finally{u(!1)}};i.useEffect(()=>{console.log("ðŸ”„ Initial load useEffect triggered"),console.log("âœ… Loading admin control documents"),a()},[]),i.useEffect(()=>{console.log("ðŸ”„ Filter useEffect triggered:",{selectedEuroCode:o}),console.log("âœ… Calling refreshUsers with new filters"),a()},[o]);const A=s=>{g(s.target.value)},C=()=>{g("")};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Static Reports"}),e.jsx(d,{children:e.jsx(l,{children:e.jsxs(m,{children:[e.jsx(m.Header,{children:e.jsx("h4",{className:"card-title mb-0",children:"Admin Static Reports - All Controls of Static Report Entries"})}),e.jsxs(m.Body,{children:[e.jsx(d,{className:"mb-3",children:e.jsx(l,{md:12,children:e.jsxs("div",{className:"alert alert-info",children:[e.jsx("strong",{children:"Admin View:"}),' Showing all entries from the "controls of static report" collection with filtering options.',e.jsx("br",{}),e.jsx("strong",{children:"Total Entries:"})," ",n.length," items",e.jsx("br",{}),e.jsx("strong",{children:"Filters Applied:"})," EuroCode: ",o||"All",", Language: EN (Fixed)"]})})}),e.jsxs(d,{className:"mb-3",children:[e.jsx(l,{md:6,children:e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"EuroCode"}),e.jsx(r.Control,{type:"text",placeholder:"Enter EuroCode (e.g., 1, 2, 3, 4, 5)",value:o,onChange:A}),e.jsx(r.Text,{className:"text-muted",children:"Leave empty to show all EuroCodes"})]})}),e.jsx(l,{md:6,children:e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"Â "}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-secondary me-2",onClick:C,children:"Clear Filters"}),e.jsx("button",{className:"btn btn-primary",onClick:a,children:"Refresh Data"})]})]})})]}),h&&e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),n&&!h&&e.jsx("div",{children:e.jsx(b,{staticsReport:n,refreshData:a,options:{showSubmitAction:!1},selectedReport:"Admin Static Reports"})})]})]})})})]})};export{te as default};

import{r as a,b as R,j as c}from"./index-S4cPkaXI.js";import{P as C}from"./PageMetaData-u0IuTTri.js";import{A as E}from"./AllDataTables-3kuOukZx.js";import{B as n}from"./urls-DHmWp6-I.js";import"./ComponentContainerCard-CPsL5TPV.js";import"./Card-DerqaWgt.js";import"./divWithClassName-23-JlBVG.js";import"./Button-BdLFNPe1.js";import"./index-C5CN5ils.js";import"./IconifyIcon-Ci7BO_Ix.js";import"./index-DW4LpbCk.js";import"./Table-ByaT0vBF.js";import"./Modal-CdPnefrM.js";import"./useWindow-BrvFrb9Q.js";import"./useEventCallback-CbKveW3s.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-DS4YuUbl.js";import"./Form-B6IVgYSx.js";import"./FormControl-DZh-Msrb.js";import"./FormContext-3vyf8OR-.js";import"./ElementChildren-fnQRsVCu.js";import"./FormGroup-DoXrZngg.js";import"./FormLabel-xT7fLwVI.js";import"./FormRange-Dn1-Ecm8.js";import"./FormSelect--prDjbZc.js";const et=()=>{const[m,S]=a.useState([]),[k,d]=a.useState(!1),[b,y]=a.useState([]),[I,g]=a.useState({}),{companyId:l,projectId:i}=R(),f=async()=>{d(!0);try{const s=`${n}/get-checklist`,t=await(await fetch(s)).json();S(t==null?void 0:t.data),await u()}catch(s){console.error(s)}finally{d(!1)}},u=async()=>{var s;if(!(!l||!i))try{const t=await(await fetch(`${n}/get-checklist`)).json();if(t!=null&&t.data&&t.data.length>0){const e=await(await fetch(`${n}/get-project-detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:i})})).json();if(e!=null&&e.professionAssociatedData){const A=Object.keys(e.professionAssociatedData)[0],o=e.professionAssociatedData[A],h=(o==null?void 0:o.SubjectMatterId)||((s=o==null?void 0:o.profession)==null?void 0:s.SubjectMatterId);if(h){const x=t.data.map(r=>r._id),$=`${n}/check-static-document-checklist-status?projectId=${i}&professionId=${h}&checklistIds=${JSON.stringify(x)}`,j=await fetch($);if(j.ok){const r=await j.json();y(r.submittedChecklistIds||[]),g(r.approvalStatus||{})}}}}}catch(p){console.error("Error checking submission status:",p)}};a.useEffect(()=>{f(),u()},[l,i]);const w={showSubmitAction:!0,submittedChecklistIds:b,approvalStatus:I};return c.jsxs(c.Fragment,{children:[c.jsx(C,{title:"Data Tables"}),m&&!k&&c.jsx(E,{refreshData:f,checkList:m,options:w})]})};export{et as default};

import{r as g,j as e,F as de,d as pe,e as ue,P as K,R as c,C as l,b as q,a as xe}from"./index-Bhcfarzr.js";import{C as L}from"./ComponentContainerCard-CdRpaZOK.js";import{P as V}from"./PageMetaData-D1yst4PP.js";import{F as N}from"./FormLabel-DMds24G0.js";import{F as T}from"./FormControl-7WYzlHOA.js";import{B as _}from"./Button-COOVOJrI.js";import{B as I}from"./urls-BhGeBsON.js";import{A as $,T as F,C as R}from"./TextField-Cu90f4AT.js";import{F as B}from"./FormSelect-D2SUClsr.js";import{I as me}from"./Image-C3Ku7nKI.js";import{u as fe}from"./Anchor-ShQITvl0.js";import{u as Ee,$ as Se}from"./SSRProvider-D2I1ZgWO.js";import{T as J,N as we,a as Pe,b as Oe}from"./Nav-BMFF4YJX.js";import{m as ce,S as G}from"./NavbarContext-CZRQ2LoB.js";import{N as he}from"./NoopTransition-f-8MxV6X.js";import{m as oe,f as Te}from"./ElementChildren-CV_gn7v4.js";import"./Card-CWpROabE.js";import"./divWithClassName-DTdHczRx.js";import"./useSlot-B59Th0xZ.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-BcofISFZ.js";import"./DataKey-COGXBUcQ.js";const Ie=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],De=["activeKey","getControlledId","getControllerId"],Ae=["as"];function z(t,a){if(t==null)return{};var p={},i=Object.keys(t),u,o;for(o=0;o<i.length;o++)u=i[o],!(a.indexOf(u)>=0)&&(p[u]=t[u]);return p}function je(t){let{active:a,eventKey:p,mountOnEnter:i,transition:u,unmountOnExit:o,role:y="tabpanel",onEnter:j,onEntering:v,onEntered:m,onExit:h,onExiting:r,onExited:x}=t,C=z(t,Ie);const w=g.useContext(J);if(!w)return[Object.assign({},C,{role:y}),{eventKey:p,isActive:a,mountOnEnter:i,transition:u,unmountOnExit:o,onEnter:j,onEntering:v,onEntered:m,onExit:h,onExiting:r,onExited:x}];const{activeKey:E,getControlledId:O,getControllerId:f}=w,b=z(w,De),S=ce(p);return[Object.assign({},C,{role:y,id:O(p),"aria-labelledby":f(p)}),{eventKey:p,isActive:a==null&&S!=null?ce(E)===S:a,transition:u||b.transition,mountOnEnter:i??b.mountOnEnter,unmountOnExit:o??b.unmountOnExit,onEnter:j,onEntering:v,onEntered:m,onExit:h,onExiting:r,onExited:x}]}const be=g.forwardRef((t,a)=>{let{as:p="div"}=t,i=z(t,Ae);const[u,{isActive:o,onEnter:y,onEntering:j,onEntered:v,onExit:m,onExiting:h,onExited:r,mountOnEnter:x,unmountOnExit:C,transition:w=he}]=je(i);return e.jsx(J.Provider,{value:null,children:e.jsx(G.Provider,{value:null,children:e.jsx(w,{in:o,onEnter:y,onEntering:j,onEntered:v,onExit:m,onExiting:h,onExited:r,mountOnEnter:x,unmountOnExit:C,children:e.jsx(p,Object.assign({},u,{ref:a,hidden:!o,"aria-hidden":!o}))})})})});be.displayName="TabPanel";const H=t=>{const{id:a,generateChildId:p,onSelect:i,activeKey:u,defaultActiveKey:o,transition:y,mountOnEnter:j,unmountOnExit:v,children:m}=t,[h,r]=Ee(u,o,i),x=Se(a),C=g.useMemo(()=>p||((E,O)=>x?`${x}-${O}-${E}`:null),[x,p]),w=g.useMemo(()=>({onSelect:r,activeKey:h,transition:y,mountOnEnter:j||!1,unmountOnExit:v||!1,getControlledId:E=>C(E,"tabpane"),getControllerId:E=>C(E,"tab")}),[r,h,y,j,v,C]);return e.jsx(J.Provider,{value:w,children:e.jsx(G.Provider,{value:r||null,children:m})})};H.Panel=be;function Q(t){return typeof t=="boolean"?t?de:he:t}const ge=({transition:t,...a})=>e.jsx(H,{...a,transition:Q(t)});ge.displayName="TabContainer";const X=g.forwardRef(({className:t,bsPrefix:a,as:p="div",...i},u)=>(a=pe(a,"tab-content"),e.jsx(p,{ref:u,className:ue(t,a),...i})));X.displayName="TabContent";const Y=g.forwardRef(({bsPrefix:t,transition:a,...p},i)=>{const[{className:u,as:o="div",...y},{isActive:j,onEnter:v,onEntering:m,onEntered:h,onExit:r,onExiting:x,onExited:C,mountOnEnter:w,unmountOnExit:E,transition:O=de}]=je({...p,transition:Q(a)}),f=pe(t,"tab-pane");return e.jsx(J.Provider,{value:null,children:e.jsx(G.Provider,{value:null,children:e.jsx(O,{in:j,onEnter:v,onEntering:m,onEntered:h,onExit:r,onExiting:x,onExited:C,mountOnEnter:w,unmountOnExit:E,children:e.jsx(o,{...y,ref:i,className:ue(u,f,j&&"active")})})})})});Y.displayName="TabPane";const ke={eventKey:K.oneOfType([K.string,K.number]),title:K.node.isRequired,disabled:K.bool,tabClassName:K.string,tabAttrs:K.object},ye=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};ye.propTypes=ke;const Ue=Object.assign(ye,{Container:ge,Content:X,Pane:Y});function $e(t){let a;return Te(t,p=>{a==null&&(a=p.props.eventKey)}),a}function Fe(t){const{title:a,eventKey:p,disabled:i,tabClassName:u,tabAttrs:o,id:y}=t.props;return a==null?null:e.jsx(Pe,{as:"li",role:"presentation",children:e.jsx(Oe,{as:"button",type:"button",eventKey:p,disabled:i,id:y,className:u,...o,children:a})})}const ve=t=>{const{id:a,onSelect:p,transition:i,mountOnEnter:u=!1,unmountOnExit:o=!1,variant:y="tabs",children:j,activeKey:v=$e(j),...m}=fe(t,{activeKey:"onSelect"});return e.jsxs(H,{id:a,activeKey:v,onSelect:p,transition:Q(i),mountOnEnter:u,unmountOnExit:o,children:[e.jsx(we,{id:a,...m,role:"tablist",as:"ul",variant:y,children:oe(j,Fe)}),e.jsx(X,{children:oe(j,h=>{const r={...h.props};return delete r.title,delete r.disabled,delete r.tabClassName,delete r.tabAttrs,e.jsx(Y,{...r})})})]})};ve.displayName="Tabs";const Re=({form:t,setForm:a,setActiveTab:p})=>{var u,o,y,j,v;const i=m=>{const{name:h,value:r}=m.target;a({...t,basicDetails:{...t.basicDetails,[h]:r}})};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Project"}),e.jsx(c,{className:"justify-content-center",children:e.jsx(l,{children:e.jsx(L,{title:"Add Project",children:e.jsxs(c,{children:[e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(u=t==null?void 0:t.basicDetails)==null?void 0:u.name,onChange:i,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(o=t==null?void 0:t.basicDetails)==null?void 0:o.address,onChange:i,name:"address",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(y=t==null?void 0:t.basicDetails)==null?void 0:y.postCode,onChange:i,name:"postCode",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(j=t==null?void 0:t.basicDetails)==null?void 0:j.city,onChange:i,name:"city",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(v=t==null?void 0:t.basicDetails)==null?void 0:v.startDate,onChange:i,name:"startDate",type:"date",id:"example-text-input"})})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(l,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(_,{type:"submit",variant:"primary",className:"me-1",onClick:()=>p("add-profession"),children:"Next"})})})]})})})})]})},Me=({form:t,setForm:a,setActiveTab:p})=>{var j,v;const[i,u]=g.useState([]),{companyId:o}=q(),y=async()=>{try{const h=await(await fetch(`${I}/get-company-professions?companyId=${o}`)).json();u(h)}catch(m){console.error("Error fetching professions:",m)}};return g.useEffect(()=>{o&&y()},[]),e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Professions"}),e.jsx(c,{className:"justify-content-center",children:e.jsx(l,{children:e.jsx(L,{title:"Add Professions",children:e.jsxs(c,{children:[e.jsx(l,{lg:"12",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Professions"}),e.jsxs(l,{sm:"10",children:[e.jsx($,{multiple:!0,options:i,getOptionLabel:m=>m.GroupName,value:t==null?void 0:t.professions,onChange:(m,h)=>{a({...t,professions:h})},renderInput:m=>e.jsx(F,{...m,variant:"outlined",placeholder:"Search and select professions..."}),renderTags:(m,h)=>m.map((r,x)=>e.jsx(R,{label:r.GroupName,...h({index:x})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#495057",marginTop:"6px"},children:["Selected: ",e.jsx("strong",{children:(j=t==null?void 0:t.professions)==null?void 0:j.length})," ",((v=t==null?void 0:t.professions)==null?void 0:v.length)===1?"profession":"professions"]})]})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(l,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(_,{onClick:()=>{p("add-users")},type:"submit",variant:"primary",className:"me-1",children:"Next"})})})]})})})})]})};function _e({form:t,setForm:a,setActiveTab:p}){var ee,te,ne,se,ae,le,ie,re;const[i,u]=g.useState([]),[o,y]=g.useState([]),[j,v]=g.useState([]),[m,h]=g.useState([]),[r,x]=g.useState([]),[C,w]=g.useState([]),[E,O]=g.useState([]),[f,b]=g.useState([]),{companyId:S}=q(),U=async()=>{try{const n=t==null?void 0:t.professions.map(W=>W._id);if(!(n!=null&&n.length)){u([]);return}const s={companyId:S,professionsIds:n,roles:["Worker"]},P=await(await fetch(`${I}/get-filter-users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();u(P)}catch(n){console.error("Error fetching workers:",n)}},A=async()=>{try{const n=t==null?void 0:t.professions.map(W=>W._id);if(!(n!=null&&n.length)){y([]);return}const s={companyId:S,professionsIds:n,roles:["Sub Contractor"]},P=await(await fetch(`${I}/get-filter-users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();y(P)}catch(n){console.log("Error fetching sub contractors:",n)}},k=async()=>{try{const s=await(await fetch(`${I}/get-mains?companyId=${S}`)).json();v(s)}catch(n){console.log("Error fetching sub contractors:",n)}},M=async()=>{try{const s=await(await fetch(`${I}/get-safety?companyId=${S}`)).json();h(s)}catch{console.log("error")}},D=async()=>{try{const s=await(await fetch(`${I}/get-advisors?companyId=${S}`)).json();x(s)}catch(n){console.log("error",n)}},Z=async()=>{try{const s=await(await fetch(`${I}/get-cons?companyId=${S}`)).json();w(s)}catch(n){console.log("error",n)}},Ce=async()=>{try{const s=await(await fetch(`${I}/get-inspectors?companyId=${S}`)).json();O(s)}catch(n){console.log("error",n)}},Ne=async()=>{try{const s=await(await fetch(`${I}/get-independent-controller?companyId=${S}`)).json();b(s)}catch(n){console.log("error",n)}};return g.useEffect(()=>{U(),A(),D()},[t==null?void 0:t.professions]),g.useEffect(()=>{k(),M(),Z(),Ce(),Ne()},[]),e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Users in this Project"}),e.jsx(c,{className:"justify-content-center",children:e.jsx(l,{children:e.jsxs(L,{title:"Add Users in this Project",children:[e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Worker for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:i,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(ee=t==null?void 0:t.addUsers)==null?void 0:ee.worker,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,worker:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select worker..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Sub Contractor for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:o,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(te=t==null?void 0:t.addUsers)==null?void 0:te.subContractor,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,subContractor:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Sub Contractor..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Main Constructor for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:j,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(ne=t==null?void 0:t.addUsers)==null?void 0:ne.mainConstructor,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,mainConstructor:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Main Constructor..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Safety Coordinator for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:m,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(se=t==null?void 0:t.addUsers)==null?void 0:se.safetyCoordinator,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,safetyCoordinator:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Safety Coordinator..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Advisor for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:r,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(ae=t==null?void 0:t.addUsers)==null?void 0:ae.advisorx,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,advisor:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Advisor..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Construction Manager for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:C,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(le=t==null?void 0:t.addUsers)==null?void 0:le.constructionManager,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,constructionManager:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Construction Manager..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Inspector for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:E,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(ie=t==null?void 0:t.addUsers)==null?void 0:ie.companyInspector,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,companyInspector:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Inspector..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Independent Controller for this Project"}),e.jsx(l,{sm:"10",children:e.jsx($,{multiple:!0,options:f,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,s)=>n._id===s._id,value:(re=t==null?void 0:t.addUsers)==null?void 0:re.independentController,onChange:(n,s)=>{a(d=>({...d,addUsers:{...d.addUsers,independentController:s}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Inspector..."}),renderTags:(n,s)=>n.map((d,P)=>e.jsx(R,{label:d.name,...s({index:P})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(l,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(_,{onClick:()=>{p("add-certificate-schemes")},type:"submit",variant:"primary",className:"me-1",children:"Next"})})})]})})})]})}const Ke=({form:t,setForm:a,setActiveTab:p})=>{var w,E,O;const{companyId:i}=q(),u=xe(),[o,y]=g.useState([]),[j,v]=g.useState([]),m=g.useRef(null),h=f=>{const{name:b,value:S}=f.target;a({...t,addDrawing:{...t.addDrawing,[b]:S}})};g.useEffect(()=>{(async()=>{try{const S=await(await fetch(`${I}/get-plans`)).json();y(S)}catch(b){console.error("Error fetching plans:",b)}})()},[]);const r=f=>{var A;const b=Array.from(f.target.files),S=[...(A=t==null?void 0:t.addDrawing)==null?void 0:A.pictures,...b],U=[...j,...b.map(k=>URL.createObjectURL(k))];a({...t,addDrawing:{...t.addDrawing,pictures:S}}),v(U)},x=f=>{var A;const b=(A=t==null?void 0:t.addDrawing)==null?void 0:A.pictures.filter((k,M)=>M!==f),S=j.filter((k,M)=>M!==f);a({...t,addDrawing:{...t.addDrawing,pictures:b}}),v(S);const U=new DataTransfer;b.forEach(k=>U.items.add(k)),m.current&&(m.current.files=U.files)},C=async f=>{var U,A,k,M;f.preventDefault();const b=new FormData;if(!((A=(U=t==null?void 0:t.basicDetails)==null?void 0:U.name)==null?void 0:A.toString().trim())){alert("Please enter the project name in basic Detial at least.");return}b.append("basicDetails",JSON.stringify(t.basicDetails)),b.append("professions",JSON.stringify(t.professions)),b.append("addUsers",JSON.stringify(t.addUsers)),b.append("addDrawing",JSON.stringify(t.addDrawing)),b.append("plan",JSON.stringify(t.plan)),b.append("certificateSchema",JSON.stringify(t.certificateSchema)),b.append("independentController",JSON.stringify(t.independentController)),b.append("companyId",i),(k=t==null?void 0:t.addDrawing)==null||k.pictures.forEach(D=>{b.append("addDrawingPictures",D)}),(M=t==null?void 0:t.plan)==null||M.pictures.forEach(D=>{b.append("planPictures",D)});try{const D=await fetch(`${I}/add-project`,{method:"POST",body:b});if(D.ok){const Z=await D.json();u(`/dashboard/companies/view/${i}`,{state:{success:"Project added successfully!"}})}else console.error("Error:",D.statusText)}catch(D){console.error("Fetch error:",D)}};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Drawing & Document"}),e.jsx(c,{className:"justify-content-center",children:e.jsx(l,{children:e.jsx(L,{title:"Add Dwaring & Document",children:e.jsxs(c,{children:[e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(w=t==null?void 0:t.addDrawing)==null?void 0:w.name,onChange:h,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Description"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:t==null?void 0:t.addDrawing.description,onChange:h,name:"description",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Date"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(E=t==null?void 0:t.addDrawing)==null?void 0:E.date,onChange:h,name:"date",type:"date",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Updated Date"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(O=t==null?void 0:t.addDrawing)==null?void 0:O.updatedDate,onChange:h,name:"updatedDate",type:"date",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Select Drawing Or Document"}),e.jsx(l,{sm:"10",children:e.jsxs(B,{value:t.checkbox,name:"checkbox",onChange:h,children:[e.jsx("option",{defaultValue:"",children:"Select"}),e.jsx("option",{value:"Drawing",children:"Drawing"}),e.jsx("option",{value:"Document",children:"Document"})]})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"multiple-file-input",className:"col-sm-2 col-form-label text-end",children:"Pictures"}),e.jsxs(l,{sm:"10",children:[e.jsx(T,{type:"file",id:"multiple-file-input",name:"pictures",onChange:r,accept:"image/*",multiple:!0,ref:m}),e.jsx("div",{className:"mt-3 d-flex flex-wrap",children:j.map((f,b)=>e.jsxs("div",{className:"position-relative me-2 mb-2",children:[e.jsx(me,{src:f,alt:`Preview ${b}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx(_,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:()=>x(b),style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"×"})]},b))})]})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(l,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(_,{onClick:C,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})]})},Le=({form:t,setForm:a,setActiveTab:p})=>{var m,h;const[i,u]=g.useState([]),o=g.useRef(null);q(),xe();const y=r=>{const{name:x,value:C}=r.target;a({...t,plan:{...t.plan,[x]:C}})},j=r=>{var E;const x=Array.from(r.target.files),C=[...(E=t==null?void 0:t.plan)==null?void 0:E.pictures,...x],w=[...i,...x.map(O=>URL.createObjectURL(O))];a({...t,plan:{...t.plan,pictures:C}}),u(w)},v=r=>{var E;const x=(E=t==null?void 0:t.plan)==null?void 0:E.pictures.filter((O,f)=>f!==r),C=i.filter((O,f)=>f!==r);a({...t,plan:{...t.plan,pictures:x}}),u(C);const w=new DataTransfer;x.forEach(O=>w.items.add(O)),o.current&&(o.current.files=w.files)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Plan"}),e.jsx(c,{className:"justify-content-center",children:e.jsx(l,{children:e.jsx(L,{title:"Add Plan",children:e.jsxs(c,{children:[e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(m=t==null?void 0:t.plan)==null?void 0:m.name,onChange:y,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Description"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(h=t==null?void 0:t.plan)==null?void 0:h.description,onChange:y,name:"description",type:"text",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"multiple-file-input",className:"col-sm-2 col-form-label text-end",children:"Pictures"}),e.jsxs(l,{sm:"10",children:[e.jsx(T,{type:"file",id:"multiple-file-input",name:"pictures",onChange:j,accept:"image/*",multiple:!0,ref:o}),e.jsx("div",{className:"mt-3 d-flex flex-wrap",children:i.map((r,x)=>e.jsxs("div",{className:"position-relative me-2 mb-2",children:[e.jsx(me,{src:r,alt:`Preview ${x}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx(_,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:()=>v(x),style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"×"})]},x))})]})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(l,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(_,{type:"submit",variant:"primary",className:"me-1",onClick:()=>{p("add-drawing-document")},children:"Next"})})})]})})})})]})},Ve=({form:t,setForm:a,setActiveTab:p})=>{var v,m,h;const[i,u]=g.useState([]),[o,y]=g.useState([]),j=r=>{const{name:x,value:C}=r.target;a({...t,certificateSchema:{...t.certificateSchema,[x]:C}})};return g.useEffect(()=>{(async()=>{try{const C=await(await fetch(`${I}/get-items`)).json();u(C)}catch(x){console.error("Error fetching items:",x)}})()},[]),g.useEffect(()=>{(async()=>{try{const C=await(await fetch(`${I}/get-levels`)).json();y(C)}catch(x){console.error("Error fetching levels:",x)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Certificate Scheme"}),e.jsx(c,{className:"justify-content-center",children:e.jsx(l,{children:e.jsx(L,{title:"Add Certificate Scheme",children:e.jsxs(c,{children:[e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(l,{sm:"10",children:e.jsx(T,{value:(v=t==null?void 0:t.certificateSchema)==null?void 0:v.startDate,onChange:j,name:"startDate",type:"date",id:"example-text-input"})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Select Item"}),e.jsx(l,{sm:"10",children:e.jsxs(B,{value:(m=t==null?void 0:t.certificateSchema)==null?void 0:m.item,name:"item",onChange:j,children:[e.jsx("option",{defaultValue:"",children:"Select item"}),i.map(r=>e.jsx("option",{value:r._id,children:r.name},r.id))]})})]})}),e.jsx(l,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Select Level"}),e.jsx(l,{sm:"10",children:e.jsxs(B,{value:(h=t==null?void 0:t.certificateSchema)==null?void 0:h.level,name:"level",onChange:j,children:[e.jsx("option",{defaultValue:"",children:"Select level"}),o.map(r=>e.jsx("option",{value:r._id,children:r.name},r.id))]})})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(l,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(_,{onClick:()=>{p("add-plans")},type:"submit",variant:"primary",className:"me-1",children:"Next"})})})]})})})})]})},qe={basicDetails:{name:"",address:"",postCode:"",city:"",startDate:""},professions:[],addUsers:{worker:[],subContractor:[],mainConstructor:[],safetyCoordinator:[],advisor:[],constructionManager:[],inspector:[],independentController:[]},addDrawing:{name:"",description:"",checkbox:null,date:null,updatedDate:null,planId:null,pictures:[]},plan:{name:"",description:"",pictures:[]},certificateSchema:{item:null,level:null,startDate:""}},ut=()=>{const[t,a]=g.useState(qe),[p,i]=g.useState("basic"),u=[{key:"basic",title:"Basic Details",content:e.jsx(Re,{form:t,setForm:a,setActiveTab:i})},{key:"add-profession",title:"Add Profession",content:e.jsx(Me,{form:t,setForm:a,setActiveTab:i})},{key:"add-users",title:"Add Users",content:e.jsx(_e,{form:t,setForm:a,setActiveTab:i})},{key:"add-certificate-schemes",title:"Certificate Schemes",content:e.jsx(Ve,{form:t,setForm:a,setActiveTab:i})},{key:"add-plans",title:"Plans",content:e.jsx(Le,{form:t,setForm:a,setActiveTab:i})},{key:"add-drawing-document",title:"Add Dwaring & Document",content:e.jsx(Ke,{form:t,setForm:a,setActiveTab:i})}];return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Project"}),e.jsx(L,{title:"Add Project",children:e.jsx(ve,{id:"add-project-tabs",activeKey:p,onSelect:o=>{i(o)},className:"mb-3",children:u.map(o=>e.jsx(Ue,{eventKey:o.key,title:o.title,children:o.content},o.key))})})]})};export{ut as default};

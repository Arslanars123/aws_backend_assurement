import{c as w,a as y,r as p,b as g,j as o,R as u,C as I}from"./index-B342vN8a.js";import{C as $}from"./ComponentContainerCard-BIxSgnld.js";import{B as f}from"./urls-CvG9cD6N.js";import{G as v}from"./EditPage-aZ4R8DTi.js";import"./Card-CI8IuqFE.js";import"./divWithClassName-BnSMb2ls.js";import"./Button-BnzdNfRx.js";import"./utils-CJbgxhCN.js";import"./Form-CESMYbpi.js";import"./FormCheck-CPhLD6PL.js";import"./FormControl-CJr_RFax.js";import"./FormContext-BMEMUOIr.js";import"./FormGroup-70y0m4Sv.js";import"./FormLabel-f-qql_Cp.js";import"./FormRange-C54s6zi2.js";import"./FormSelect-CY3fnc3Z.js";import"./Image-B0PQ6faj.js";import"./TextField-BYbQgC-7.js";import"./useFormControl-CZmJVi9l.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-C8K2eoCJ.js";const J=()=>{const{setLoading:e}=w(),i=y(),[h,j]=p.useState(null),{companyId:r,independentControllerId:c}=g();p.useEffect(()=>{c&&(e(!0),fetch(`${f}/get-user-detail/${c}`).then(async a=>{const s=await a.json();s==null||delete s.projectsId,s==null||delete s.companyId,s==null||delete s.phone,s==null||delete s.address,s==null||delete s.postalCode,s==null||delete s.city,s==null||delete s.userRole,s==null||delete s.password,s==null||delete s.startDate,s==null||delete s.isProjectManager,s==null||delete s.type,s==null||delete s.mainId,s==null||delete s.userProfession,s==null||delete s.picture2,s==null||delete s.contactPicture,j(s)}).catch(a=>console.error(a)).finally(()=>e(!1)))},[c]);const x=async a=>{try{const s=new FormData;Object.keys(a).forEach(t=>{t==="picture"&&a[t],s.append(t,a[t])});const m=await fetch(`${f}/update-user/${c}`,{method:"POST",body:s});m.ok?i(`/dashboard/companies/view/${r}`):console.error("Error:",m.statusText)}catch(s){console.error("Error:",s)}},E=()=>{i(`/dashboard/companies/view/${r}/independentControllerView/view/${c}`)},b={fieldTypes:{picture:"file"},placeholders:{picture:"Upload profile picture"}};return o.jsx(u,{className:"justify-content-center",children:o.jsx(I,{lg:"12",children:o.jsx($,{title:"Edit Independent Controller",children:o.jsx(u,{children:o.jsx(v,{data:h,onSave:x,disabledFields:["_id","role"],onCancel:E,otherOptions:b})})})})})};export{J as default};

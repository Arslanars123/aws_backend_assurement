import{r as t,b as y,a as N,j as e,R as c,C as r}from"./index-DbgPTJ8u.js";import{C as E}from"./ComponentContainerCard-TvlhTJgI.js";import{P}from"./PageMetaData-xs1kcuhv.js";import{B as i}from"./urls-CXtk4x-h.js";import{F as f}from"./FormLabel-fZnNO-Bu.js";import{F as p}from"./FormControl-oABbf9Za.js";import{B as F}from"./Button-BLURbuTa.js";import"./Card-CAeaMNXG.js";import"./divWithClassName-DfQdS5BT.js";const k=()=>{const[a,m]=t.useState(null),[x,u]=t.useState(!1),[h,j]=t.useState(!0);t.useState(null),t.useState(null),t.useState([]),t.useState([]);const{professionId:l}=y(),b=N();t.useRef(null),t.useRef(null),t.useState([]),t.useEffect(()=>{l&&fetch(`${i}/get-profession-detail/${l}`).then(async n=>{const o=await n.json();m({...o})}).catch(n=>console.error(n)).finally(()=>j(!1))},[l]);const d=n=>{const{name:o,value:s}=n.target;m({...a,[o]:s})};t.useEffect(()=>{(async()=>{try{const s=await(await fetch(`${i}/get-projects`)).json();g(s)}catch(o){console.error("Error fetching projects:",o)}})()},[]);const[C,g]=t.useState([]),S=async n=>{n.preventDefault(),u(!0);const o=new FormData;Object.keys(a).forEach(s=>{o.append(s,a[s])});try{const s=await fetch(`${i}/update-profession/${l}`,{method:"POST",body:o});if(s.ok){const v=await s.json();b("/dashboard/professions",{state:{success:"Profession updated successfully!"}})}else console.error("Error:",s.statusText)}catch(s){console.error("Fetch error:",s)}u(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Edit Profession"}),h?null:e.jsx("form",{onSubmit:S,children:e.jsx(c,{className:"justify-content-center",children:e.jsx(r,{children:e.jsx(E,{title:"Edit Profession",children:e.jsxs(c,{children:[e.jsx(r,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(f,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(r,{sm:"10",children:e.jsx(p,{value:a==null?void 0:a.name,onChange:d,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(r,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(f,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Index Number"}),e.jsx(r,{sm:"10",children:e.jsx(p,{value:a==null?void 0:a.indexNumber,onChange:d,name:"indexNumber",type:"text",id:"example-text-input"})})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(r,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(F,{disabled:x,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{k as default};

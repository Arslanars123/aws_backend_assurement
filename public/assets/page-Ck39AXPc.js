import{c as j,a as w,r as l,b as g,j as r,R as d,C as y}from"./index-BfjhYpb5.js";import{C as x}from"./ComponentContainerCard-BbSfpbsX.js";import{B as i}from"./urls-CXtk4x-h.js";import{D as C}from"./DetailPage-Co-j-KmM.js";import"./Card-CjeZJw7I.js";import"./divWithClassName-CLs3g5aQ.js";import"./Button-0d7iDM-S.js";import"./FormLabel-9Op50W6F.js";import"./Modal-Cs5seNFI.js";import"./useWindow-DCmLp1st.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-dAavQWp2.js";import"./Image-D3CG5EY4.js";const M=()=>{const{setLoading:c}=j(),a=w(),[p,m]=l.useState(null),{companyId:n,projectId:t,workerId:s}=g(),u=()=>{a(`/dashboard/companies/view/${n}/workers/edit/${s}`)},h=async()=>{try{if(t){const e=await fetch(`${i}/remove-user-from-project`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,projectId:t})});if(e.ok){const o=await e.json();a(`/dashboard/companies/view/${n}/projects/view/${t}`),console.log("Success:",o)}else console.error("Error:",e.statusText)}else{const e=await fetch(`${i}/delete-user/${s}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const o=await e.json();a(`/dashboard/companies/view/${n}`),console.log("Success:",o)}else console.error("Error:",e.statusText)}}catch(e){console.error("Error:",e)}};return l.useEffect(()=>{s&&(c(!0),fetch(`${i}/get-user-detail/${s}`).then(async e=>{const o=await e.json(),f={name:o.name||"",username:o.username||"",picture:o.picture||"",phone:o.phone||"",password:o.password||"",address:o.address||"",isProjectManager:o.isProjectManager||"",postalCode:o.postalCode||"",city:o.city||""};m(f)}).catch(e=>console.error(e)).finally(()=>c(!1)))},[s]),r.jsx(d,{className:"justify-content-center",children:r.jsx(y,{lg:"12",children:r.jsx(x,{title:"Worker Details",children:r.jsx(d,{children:r.jsx(C,{data:p,handleEdit:t?null:u,handleDelete:h,options:{isProjectManager:[{name:"Yes",value:"yes"},{name:"No",value:"no"}]}})})})})})};export{M as default};

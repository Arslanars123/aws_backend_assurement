import{r as a,b as R,j as c}from"./index-DPgj8bsv.js";import{P as C}from"./PageMetaData-BOIE4fT1.js";import{A as E}from"./AllDataTables-CFwGYAkR.js";import{B as n}from"./urls-B0CXljtC.js";import"./ComponentContainerCard-DoOo3fSv.js";import"./Card-uWXaDKgm.js";import"./divWithClassName-CSK1W61z.js";import"./Button-4B-OZ0gB.js";import"./index-C10dNp7N.js";import"./IconifyIcon-jTEtCy_D.js";import"./index-DSxE2tM0.js";import"./Table-OWMEWX8Y.js";import"./Modal-wZS0_5JS.js";import"./useWindow-Bg5-wBF6.js";import"./useEventCallback-BytfugQP.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-CP8B-7eK.js";import"./Form-DCy6L--M.js";import"./FormControl-B_1Cr1px.js";import"./FormContext-D3odgfWO.js";import"./ElementChildren-BDidIMmr.js";import"./FormGroup-BjdBrQcm.js";import"./FormLabel-DrWgYkuA.js";import"./FormRange-CujNJWzu.js";import"./FormSelect-BPDON-Nl.js";const et=()=>{const[m,S]=a.useState([]),[k,d]=a.useState(!1),[b,y]=a.useState([]),[I,g]=a.useState({}),{companyId:l,projectId:i}=R(),f=async()=>{d(!0);try{const s=`${n}/get-checklist`,t=await(await fetch(s)).json();S(t==null?void 0:t.data),await u()}catch(s){console.error(s)}finally{d(!1)}},u=async()=>{var s;if(!(!l||!i))try{const t=await(await fetch(`${n}/get-checklist`)).json();if(t!=null&&t.data&&t.data.length>0){const e=await(await fetch(`${n}/get-project-detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:i})})).json();if(e!=null&&e.professionAssociatedData){const A=Object.keys(e.professionAssociatedData)[0],o=e.professionAssociatedData[A],h=(o==null?void 0:o.SubjectMatterId)||((s=o==null?void 0:o.profession)==null?void 0:s.SubjectMatterId);if(h){const x=t.data.map(r=>r._id),$=`${n}/check-static-document-checklist-status?projectId=${i}&professionId=${h}&checklistIds=${JSON.stringify(x)}`,j=await fetch($);if(j.ok){const r=await j.json();y(r.submittedChecklistIds||[]),g(r.approvalStatus||{})}}}}}catch(p){console.error("Error checking submission status:",p)}};a.useEffect(()=>{f(),u()},[l,i]);const w={showSubmitAction:!0,submittedChecklistIds:b,approvalStatus:I};return c.jsxs(c.Fragment,{children:[c.jsx(C,{title:"Data Tables"}),m&&!k&&c.jsx(E,{refreshData:f,checkList:m,options:w})]})};export{et as default};

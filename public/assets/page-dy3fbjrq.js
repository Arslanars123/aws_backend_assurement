import{r as o,a as P,j as e,R as a,C as t}from"./index-DbgPTJ8u.js";import{C as S}from"./ComponentContainerCard-TvlhTJgI.js";import{P as R}from"./PageMetaData-xs1kcuhv.js";import{B as w}from"./urls-CXtk4x-h.js";import{F as c}from"./FormLabel-fZnNO-Bu.js";import{F as i}from"./FormControl-oABbf9Za.js";import{I}from"./Image-DCazXyNo.js";import{B as b}from"./Button-BLURbuTa.js";import"./Card-CAeaMNXG.js";import"./divWithClassName-DfQdS5BT.js";const A={name:"",casenr:"",address:"",phone:"",contactPerson:""},M=()=>{const[n,g]=o.useState(A),[y,u]=o.useState(!1),C=P(),[p,h]=o.useState(null),[j,f]=o.useState(null),d=o.useRef(null),m=l=>{const{name:s,value:r}=l.target;g({...n,[s]:r})},v=l=>{const s=l.target.files[0];if(h(s),s){const r=URL.createObjectURL(s);f(r)}},N=()=>{h(null),f(null),d.current&&(d.current.value="")},F=async l=>{l.preventDefault(),u(!0);try{const s=new FormData;Object.keys(n).forEach(x=>{s.append(x,n[x])}),p&&s.append("picture",p);const r=await fetch(`${w}/store-company`,{method:"POST",body:s});if(r.ok){const x=await r.json();C("/dashboard/generalFlowCompanies",{state:{success:"Company added successfully!"}})}else console.error("Error:",r.statusText)}catch(s){console.error("Fetch error:",s)}u(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Add Company"}),e.jsx("form",{onSubmit:F,children:e.jsx(a,{className:"justify-content-center",children:e.jsx(t,{children:e.jsx(S,{title:"Add Company",children:e.jsxs(a,{children:[e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(t,{sm:"10",children:e.jsx(i,{value:n.name,onChange:m,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(t,{sm:"10",children:e.jsx(i,{value:n.address,onChange:m,name:"address",type:"text",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsx(t,{sm:"10",children:e.jsx(i,{value:n.phone,onChange:m,name:"phone",type:"number",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Contact Person"}),e.jsx(t,{sm:"10",children:e.jsx(i,{value:n.contactPerson,onChange:m,name:"contactPerson",type:"number",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(c,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Logo"}),e.jsxs(t,{sm:"10",children:[e.jsx(i,{type:"file",id:"file-input",name:"picture",onChange:v,ref:d}),j&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(I,{src:j,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(b,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:N,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(a,{className:"mb-3 d-flex justify-content-center",children:e.jsx(t,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(b,{disabled:y,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{M as default};

import{an as S,ac as T,p as R,_ as W,r as L,P as x}from"./index-CEbbE1Sf.js";import{b as k,c as z,d as U,e as F,_ as B}from"./createSuper-BTW_kFmu.js";/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function C(e,i,n){this.x=e,this.y=i,this.time=n||new Date().getTime()}C.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};C.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};C.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function E(e,i,n,t){this.startPoint=e,this.control1=i,this.control2=n,this.endPoint=t}E.prototype.length=function(){for(var e=10,i=0,n=void 0,t=void 0,a=0;a<=e;a+=1){var o=a/e,h=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var c=h-n,s=r-t;i+=Math.sqrt(c*c+s*s)}n=h,t=r}return i};E.prototype._point=function(e,i,n,t,a){return i*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*t*(1-e)*e*e+a*e*e*e};function N(e,i,n){var t,a,o,h=null,r=0;n||(n={});var c=function(){r=n.leading===!1?0:Date.now(),h=null,o=e.apply(t,a),h||(t=a=null)};return function(){var s=Date.now();!r&&n.leading===!1&&(r=s);var l=i-(s-r);return t=this,a=arguments,l<=0||l>i?(h&&(clearTimeout(h),h=null),r=s,o=e.apply(t,a),h||(t=a=null)):!h&&n.trailing!==!1&&(h=setTimeout(c,l)),o}}function v(e,i){var n=this,t=i||{};this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=N(v.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=v.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var o=a.changedTouches[0];n._strokeBegin(o)}},this._handleTouchMove=function(a){a.preventDefault();var o=a.targetTouches[0];n._strokeMoveUpdate(o)},this._handleTouchEnd=function(a){var o=a.target===n._canvas;o&&(a.preventDefault(),n._strokeEnd(a))},this.on()}v.prototype.clear=function(){var e=this._ctx,i=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,i.width,i.height),e.fillRect(0,0,i.width,i.height),this._data=[],this._reset(),this._isEmpty=!0};v.prototype.fromDataURL=function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Image,a=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/a,h=n.height||this._canvas.height/a;this._reset(),t.src=e,t.onload=function(){i._ctx.drawImage(t,0,0,o,h)},this._isEmpty=!1};v.prototype.toDataURL=function(e){var i;switch(e){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,t=Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return(i=this._canvas).toDataURL.apply(i,[e].concat(t))}};v.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};v.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};v.prototype.isEmpty=function(){return this._isEmpty};v.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};v.prototype._strokeUpdate=function(e){var i=e.clientX,n=e.clientY,t=this._createPoint(i,n),a=this._data[this._data.length-1],o=a&&a[a.length-1],h=o&&t.distanceTo(o)<this.minDistance;if(!(o&&h)){var r=this._addPoint(t),c=r.curve,s=r.widths;c&&s&&this._drawCurve(c,s.start,s.end),this._data[this._data.length-1].push({x:t.x,y:t.y,time:t.time,color:this.penColor})}};v.prototype._strokeEnd=function(e){var i=this.points.length>2,n=this.points[0];if(!i&&n&&this._drawDot(n),n){var t=this._data[this._data.length-1],a=t[t.length-1];n.equals(a)||t.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};v.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};v.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};v.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};v.prototype._createPoint=function(e,i,n){var t=this._canvas.getBoundingClientRect();return new C(e-t.left,i-t.top,n||new Date().getTime())};v.prototype._addPoint=function(e){var i=this.points,n=void 0;if(i.push(e),i.length>2){i.length===3&&i.unshift(i[0]),n=this._calculateCurveControlPoints(i[0],i[1],i[2]);var t=n.c2;n=this._calculateCurveControlPoints(i[1],i[2],i[3]);var a=n.c1,o=new E(i[1],t,a,i[2]),h=this._calculateCurveWidths(o);return i.shift(),{curve:o,widths:h}}return{}};v.prototype._calculateCurveControlPoints=function(e,i,n){var t=e.x-i.x,a=e.y-i.y,o=i.x-n.x,h=i.y-n.y,r={x:(e.x+i.x)/2,y:(e.y+i.y)/2},c={x:(i.x+n.x)/2,y:(i.y+n.y)/2},s=Math.sqrt(t*t+a*a),l=Math.sqrt(o*o+h*h),u=r.x-c.x,d=r.y-c.y,f=l/(s+l),_={x:c.x+u*f,y:c.y+d*f},p=i.x-_.x,g=i.y-_.y;return{c1:new C(r.x+p,r.y+g),c2:new C(c.x+p,c.y+g)}};v.prototype._calculateCurveWidths=function(e){var i=e.startPoint,n=e.endPoint,t={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(i)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(a);return t.start=this._lastWidth,t.end=o,this._lastVelocity=a,this._lastWidth=o,t};v.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};v.prototype._drawPoint=function(e,i,n){var t=this._ctx;t.moveTo(e,i),t.arc(e,i,n,0,2*Math.PI,!1),this._isEmpty=!1};v.prototype._drawCurve=function(e,i,n){var t=this._ctx,a=n-i,o=Math.floor(e.length());t.beginPath();for(var h=0;h<o;h+=1){var r=h/o,c=r*r,s=c*r,l=1-r,u=l*l,d=u*l,f=d*e.startPoint.x;f+=3*u*r*e.control1.x,f+=3*l*c*e.control2.x,f+=s*e.endPoint.x;var _=d*e.startPoint.y;_+=3*u*r*e.control1.y,_+=3*l*c*e.control2.y,_+=s*e.endPoint.y;var p=i+s*a;this._drawPoint(f,_,p)}t.closePath(),t.fill()};v.prototype._drawDot=function(e){var i=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;i.beginPath(),this._drawPoint(e.x,e.y,n),i.closePath(),i.fill()};v.prototype._fromData=function(e,i,n){for(var t=0;t<e.length;t+=1){var a=e[t];if(a.length>1)for(var o=0;o<a.length;o+=1){var h=a[o],r=new C(h.x,h.y,h.time),c=h.color;if(o===0)this.penColor=c,this._reset(),this._addPoint(r);else if(o!==a.length-1){var s=this._addPoint(r),l=s.curve,u=s.widths;l&&u&&i(l,u,c)}}else{this._reset();var d=a[0];n(d)}}};v.prototype._toSVG=function(){var e=this,i=this._data,n=this._canvas,t=Math.max(window.devicePixelRatio||1,1),a=0,o=0,h=n.width/t,r=n.height/t,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"width",n.width),c.setAttributeNS(null,"height",n.height),this._fromData(i,function(m,y,P){var w=document.createElement("path");if(!isNaN(m.control1.x)&&!isNaN(m.control1.y)&&!isNaN(m.control2.x)&&!isNaN(m.control2.y)){var b="M "+m.startPoint.x.toFixed(3)+","+m.startPoint.y.toFixed(3)+" "+("C "+m.control1.x.toFixed(3)+","+m.control1.y.toFixed(3)+" ")+(m.control2.x.toFixed(3)+","+m.control2.y.toFixed(3)+" ")+(m.endPoint.x.toFixed(3)+","+m.endPoint.y.toFixed(3));w.setAttribute("d",b),w.setAttribute("stroke-width",(y.end*2.25).toFixed(3)),w.setAttribute("stroke",P),w.setAttribute("fill","none"),w.setAttribute("stroke-linecap","round"),c.appendChild(w)}},function(m){var y=document.createElement("circle"),P=typeof e.dotSize=="function"?e.dotSize():e.dotSize;y.setAttribute("r",P),y.setAttribute("cx",m.x),y.setAttribute("cy",m.y),y.setAttribute("fill",m.color),c.appendChild(y)});var s="data:image/svg+xml;base64,",l='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+o+" "+h+" "+r+'"')+(' width="'+h+'"')+(' height="'+r+'"')+">",u=c.innerHTML;if(u===void 0){var d=document.createElement("dummy"),f=c.childNodes;d.innerHTML="";for(var _=0;_<f.length;_+=1)d.appendChild(f[_].cloneNode(!0));u=d.innerHTML}var p="</svg>",g=l+u+p;return s+btoa(g)};v.prototype.fromData=function(e){var i=this;this.clear(),this._fromData(e,function(n,t){return i._drawCurve(n,t.start,t.end)},function(n){return i._drawDot(n)}),this._data=e};v.prototype.toData=function(){return this._data};var M={exports:{}};(function(e,i){(function(n,t){e.exports=t()})(S,function(){return function(n){function t(o){if(a[o])return a[o].exports;var h=a[o]={exports:{},id:o,loaded:!1};return n[o].call(h.exports,h,h.exports,t),h.loaded=!0,h.exports}var a={};return t.m=n,t.c=a,t.p="",t(0)}([function(n,t){function a(s){var l=s.getContext("2d"),u=s.width,d=s.height,f=l.getImageData(0,0,u,d).data,_=r(!0,u,d,f),p=r(!1,u,d,f),g=c(!0,u,d,f),m=c(!1,u,d,f),y=m-g+1,P=p-_+1,w=l.getImageData(g,_,y,P);return s.width=y,s.height=P,l.clearRect(0,0,y,P),l.putImageData(w,0,0),s}function o(s,l,u,d){return{red:d[4*(u*l+s)],green:d[4*(u*l+s)+1],blue:d[4*(u*l+s)+2],alpha:d[4*(u*l+s)+3]}}function h(s,l,u,d){return o(s,l,u,d).alpha}function r(s,l,u,d){for(var f=s?1:-1,_=s?0:u-1,p=_;s?p<u:p>-1;p+=f)for(var g=0;g<l;g++)if(h(g,p,l,d))return p;return null}function c(s,l,u,d){for(var f=s?1:-1,_=s?0:l-1,p=_;s?p<l:p>-1;p+=f)for(var g=0;g<u;g++)if(h(p,g,l,d))return p;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}])})})(M);var A=M.exports;const O=T(A);var I=["canvasProps","clearOnResize"],D=function(e){k(n,e);var i=z(n);function n(){var t;F(this,n);for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];return t=i.call.apply(i,[this].concat(o)),t.staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(r){t._canvas=r,t._canvas===null&&(t._sigPad=null)},t._excludeOurProps=function(){var r=t.props;r.canvasProps,r.clearOnResize;var c=B(r,I);return c},t.componentDidMount=function(){var r=t.getCanvas();t._sigPad=new v(r,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(t._canvas===null)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var r=t.getCanvas(),c=document.createElement("canvas");return c.width=r.width,c.height=r.height,c.getContext("2d").drawImage(r,0,0),O(c)},t.getSignaturePad=function(){if(t._sigPad===null)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var r,c,s=(r=t.props.canvasProps)!==null&&r!==void 0?r:{},l=s.width,u=s.height;if(!(typeof l<"u"&&typeof u<"u")){var d=t.getCanvas(),f=Math.max((c=window.devicePixelRatio)!==null&&c!==void 0?c:1,1);typeof l>"u"&&(d.width=d.offsetWidth*f),typeof u>"u"&&(d.height=d.offsetHeight*f),d.getContext("2d").scale(f,f),t.clear()}},t.render=function(){var r=t.props.canvasProps;return R.createElement("canvas",W({ref:t.setRef},r))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(r,c){return t.getSignaturePad().fromDataURL(r,c)},t.toDataURL=function(r,c){return t.getSignaturePad().toDataURL(r,c)},t.fromData=function(r){return t.getSignaturePad().fromData(r)},t.toData=function(){return t.getSignaturePad().toData()},t}return U(n)}(L.Component);D.propTypes={velocityFilterWeight:x.number,minWidth:x.number,maxWidth:x.number,minDistance:x.number,dotSize:x.oneOfType([x.number,x.func]),penColor:x.string,throttle:x.number,onEnd:x.func,onBegin:x.func,canvasProps:x.object,clearOnResize:x.bool};D.defaultProps={clearOnResize:!0};D.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");export{D as S};

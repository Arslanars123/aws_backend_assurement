import{r as d,a as A,b as w,j as e,R as a,C as t}from"./index-S4cPkaXI.js";import{C as D}from"./ComponentContainerCard-CPsL5TPV.js";import{P as I}from"./PageMetaData-u0IuTTri.js";import{B as V}from"./urls-DHmWp6-I.js";import{F as l}from"./FormLabel-xT7fLwVI.js";import{F as n}from"./FormControl-DZh-Msrb.js";import{I as E}from"./Image-C0iuPhbd.js";import{B as v}from"./Button-BdLFNPe1.js";import"./Card-DerqaWgt.js";import"./divWithClassName-23-JlBVG.js";import"./FormContext-3vyf8OR-.js";const B={username:"",role:"Admin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},q=()=>{const[s,N]=d.useState(B),[C,h]=d.useState(!1),F=A(),[j,f]=d.useState(null),[b,g]=d.useState(null),x=d.useRef(null),{companyId:y}=w(),r=o=>{const{name:i,value:c}=o.target;N({...s,[i]:c})},P=o=>{const i=o.target.files[0];if(f(i),i){const c=URL.createObjectURL(i);g(c)}},R=async o=>{o.preventDefault();const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,c=/^\d{10,15}$/;if(!i.test(s.username)){alert("Please enter a valid email address.");return}if(!c.test(s.phone)){alert("Please enter a valid phone number (10-15 digits).");return}h(!0);try{const m=new FormData;Object.keys(s).forEach(p=>{m.append(p,s[p])}),j&&m.append("picture",j),m.append("companyId",y);const u=await fetch(`${V}/store-user`,{method:"POST",body:m});if(u.ok){const p=await u.json();F(`/dashboard/companies/view/${y}`,{state:{success:"Admin added successfully!"}})}else console.error("Error:",u.statusText)}catch(m){console.error("Fetch error:",m)}h(!1)},S=()=>{f(null),g(null),x.current&&(x.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Add Admin"}),e.jsx("form",{onSubmit:R,children:e.jsx(a,{className:"justify-content-center",children:e.jsx(t,{children:e.jsx(D,{title:"Add Admin",children:e.jsxs(a,{children:[e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.username,onChange:r,name:"username",type:"email",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.name,onChange:r,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.phone,onChange:r,name:"phone",type:"number",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.address,onChange:r,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.city,onChange:r,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.postalCode,onChange:r,name:"postalCode",type:"number",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.startDate,onChange:r,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(t,{sm:"10",children:[e.jsx(n,{type:"file",id:"file-input",name:"picture",onChange:P,accept:"image/*",ref:x}),b&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(E,{src:b,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(v,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:S,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(a,{className:"mb-3 d-flex justify-content-center",children:e.jsx(t,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(v,{disabled:C,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{q as default};

import{r as c,a as P,b as S,j as e,R as a,C as t}from"./index-DbgPTJ8u.js";import{C as A}from"./ComponentContainerCard-TvlhTJgI.js";import{P as R}from"./PageMetaData-xs1kcuhv.js";import{B as V}from"./urls-CXtk4x-h.js";import{F as n}from"./FormLabel-fZnNO-Bu.js";import{F as r}from"./FormControl-oABbf9Za.js";import{I as D}from"./Image-DCazXyNo.js";import{B as g}from"./Button-BLURbuTa.js";import"./Card-CAeaMNXG.js";import"./divWithClassName-DfQdS5BT.js";const I={username:"",password:"",role:"Admin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},M=()=>{const[l,y]=c.useState(I),[N,u]=c.useState(!1),v=P(),[p,h]=c.useState(null),[j,f]=c.useState(null),d=c.useRef(null),{companyId:b}=S(),m=o=>{const{name:s,value:i}=o.target;y({...l,[s]:i})},C=o=>{const s=o.target.files[0];if(h(s),s){const i=URL.createObjectURL(s);f(i)}},F=async o=>{o.preventDefault(),u(!0);try{const s=new FormData;Object.keys(l).forEach(x=>{s.append(x,l[x])}),p&&s.append("picture",p),s.append("companyId",b);const i=await fetch(`${V}/store-user`,{method:"POST",body:s});if(i.ok){const x=await i.json();v(`/dashboard/companies/view/${b}`,{state:{success:"Admin added successfully!"}})}else console.error("Error:",i.statusText)}catch(s){console.error("Fetch error:",s)}u(!1)},w=()=>{h(null),f(null),d.current&&(d.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Add Admin"}),e.jsx("form",{onSubmit:F,children:e.jsx(a,{className:"justify-content-center",children:e.jsx(t,{children:e.jsx(A,{title:"Add Admin",children:e.jsxs(a,{children:[e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.username,onChange:m,name:"username",type:"email",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.name,onChange:m,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.phone,onChange:m,name:"phone",type:"number",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Password"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.password,onChange:m,name:"password",type:"password",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.address,onChange:m,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.city,onChange:m,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.postalCode,onChange:m,name:"postalCode",type:"number",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:l.startDate,onChange:m,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(n,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(t,{sm:"10",children:[e.jsx(r,{type:"file",id:"file-input",name:"picture",onChange:C,accept:"image/*",ref:d}),j&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(D,{src:j,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(g,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:w,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(a,{className:"mb-3 d-flex justify-content-center",children:e.jsx(t,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(g,{disabled:N,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{M as default};

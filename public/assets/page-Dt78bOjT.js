import{r as c,a as A,G as D,j as e,R as l,C as s}from"./index-B9-Fw72-.js";import{C as E}from"./ComponentContainerCard-CQST7gBQ.js";import{P as I}from"./PageMetaData-D2p2uQ5O.js";import{B as V}from"./urls-BhGeBsON.js";import{F as r}from"./FormLabel-Npy4DC-M.js";import{F as i}from"./FormControl-Di5J9l5P.js";import{I as O}from"./Image-BOJ82kyh.js";import{B as v}from"./Button-CN5PJwBC.js";import{F as B}from"./FormSelect-DDDEprLJ.js";import"./Card-ZzJPZ8wj.js";import"./divWithClassName-COkzKTYF.js";const L={username:"",password:"",role:"Superadmin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},J=()=>{const[t,p]=c.useState(L),[N,h]=c.useState(!1),y=A(),[j,f]=c.useState(null),[g,b]=c.useState(null),x=c.useRef(null),{selectedProjects:C}=c.useContext(D),[d,S]=c.useState({}),F=()=>{const n={},a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!t.username||!a.test(t.username))&&(n.username="Please enter a valid email address.");const o=/^[0-9]{10,15}$/;return(!t.phone||!o.test(t.phone))&&(n.phone="Please enter a valid phone number (10-15 digits)."),S(n),Object.keys(n).length===0},m=n=>{const{name:a,value:o}=n.target;p({...t,[a]:o})},w=n=>{const a=n.target.files[0];if(f(a),a){const o=URL.createObjectURL(a);b(o)}},P=async n=>{if(n.preventDefault(),!!F()){h(!0);try{const a=new FormData;Object.keys(t).forEach(u=>{a.append(u,t[u])}),j&&a.append("picture",j);const o=await fetch(`${V}/store-user`,{method:"POST",body:a});if(o.ok){const u=await o.json();y("/dashboard/superadmins",{state:{success:"Super Admin added successfully!"}})}else console.error("Error:",o.statusText)}catch(a){console.error("Fetch error:",a)}h(!1)}},R=()=>{f(null),b(null),x.current&&(x.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Add Super Admin"}),e.jsx("form",{onSubmit:P,children:e.jsx(l,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(E,{title:"Add Super Admin",children:e.jsxs(l,{children:[e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsxs(s,{sm:"10",children:[e.jsx(i,{value:t.username,onChange:m,name:"username",type:"email",id:"example-text-input",isInvalid:!!d.username}),d.username&&e.jsx("div",{className:"text-danger mt-1",children:d.username})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(s,{sm:"10",children:e.jsx(i,{value:t.name,onChange:m,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsxs(s,{sm:"10",children:[e.jsx(i,{value:t.phone,onChange:m,name:"phone",type:"number",id:"example-text-input",isInvalid:!!d.phone})," ",d.phone&&e.jsx("div",{className:"text-danger mt-1",children:d.phone})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Password"}),e.jsx(s,{sm:"10",children:e.jsx(i,{value:t.password,onChange:m,name:"password",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(s,{sm:"10",children:e.jsx(i,{value:t.address,onChange:m,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(s,{sm:"10",children:e.jsx(i,{value:t.city,onChange:m,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(s,{sm:"10",children:e.jsx(i,{value:t.postalCode,onChange:m,name:"postalCode",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(s,{sm:"10",children:e.jsx(i,{value:t.startDate,onChange:m,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx("input",{type:"hidden",value:C,name:"selectedP"}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(s,{sm:"10",children:[e.jsx(i,{type:"file",id:"file-input",name:"picture",onChange:w,accept:"image/*",ref:x}),g&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(O,{src:g,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(v,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:R,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{className:"col-sm-2 col-form-label text-end",children:"Super Admin Access"}),e.jsx(s,{sm:"10",children:e.jsxs(B,{value:t.role,name:"role",onChange:n=>{p({...t,role:n.target.value})},children:[e.jsx("option",{defaultValue:"",children:"Select Access"}),e.jsx("option",{value:"SupportFlowSuperadmin",children:"Only Support Flow"}),e.jsx("option",{value:"GeneralFlowSuperadmin",children:"Only General FLow"}),e.jsx("option",{value:"Superadmin",children:"Both"})]})})]})}),e.jsx(l,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(v,{disabled:N,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{J as default};

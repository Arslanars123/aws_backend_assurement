import{r as c,a as A,G as D,j as e,R as n,C as s}from"./index-DPgj8bsv.js";import{C as E}from"./ComponentContainerCard-DoOo3fSv.js";import{P as I}from"./PageMetaData-BOIE4fT1.js";import{B as V}from"./urls-B0CXljtC.js";import{F as i}from"./FormLabel-DrWgYkuA.js";import{F as o}from"./FormControl-B_1Cr1px.js";import{I as O}from"./Image-VbqUsSSH.js";import{B as v}from"./Button-4B-OZ0gB.js";import{F as B}from"./FormSelect-BPDON-Nl.js";import"./Card-uWXaDKgm.js";import"./divWithClassName-CSK1W61z.js";import"./FormContext-D3odgfWO.js";const L={username:"",role:"Superadmin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},K=()=>{const[t,p]=c.useState(L),[N,h]=c.useState(!1),y=A(),[j,f]=c.useState(null),[g,b]=c.useState(null),x=c.useRef(null),{selectedProjects:S}=c.useContext(D),[d,C]=c.useState({}),F=()=>{const l={},a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!t.username||!a.test(t.username))&&(l.username="Please enter a valid email address.");const r=/^[0-9]{10,15}$/;return(!t.phone||!r.test(t.phone))&&(l.phone="Please enter a valid phone number (10-15 digits)."),C(l),Object.keys(l).length===0},m=l=>{const{name:a,value:r}=l.target;p({...t,[a]:r})},P=l=>{const a=l.target.files[0];if(f(a),a){const r=URL.createObjectURL(a);b(r)}},w=async l=>{if(l.preventDefault(),!!F()){h(!0);try{const a=new FormData;Object.keys(t).forEach(u=>{a.append(u,t[u])}),j&&a.append("picture",j);const r=await fetch(`${V}/store-user`,{method:"POST",body:a});if(r.ok){const u=await r.json();y("/dashboard/superadmins",{state:{success:"Super Admin added successfully!"}})}else console.error("Error:",r.statusText)}catch(a){console.error("Fetch error:",a)}h(!1)}},R=()=>{f(null),b(null),x.current&&(x.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Add Super Admin"}),e.jsx("form",{onSubmit:w,children:e.jsx(n,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(E,{title:"Add Super Admin",children:e.jsxs(n,{children:[e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsxs(s,{sm:"10",children:[e.jsx(o,{value:t.username,onChange:m,name:"username",type:"email",id:"example-text-input",isInvalid:!!d.username}),d.username&&e.jsx("div",{className:"text-danger mt-1",children:d.username})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(s,{sm:"10",children:e.jsx(o,{value:t.name,onChange:m,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsxs(s,{sm:"10",children:[e.jsx(o,{value:t.phone,onChange:m,name:"phone",type:"number",id:"example-text-input",isInvalid:!!d.phone})," ",d.phone&&e.jsx("div",{className:"text-danger mt-1",children:d.phone})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(s,{sm:"10",children:e.jsx(o,{value:t.address,onChange:m,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(s,{sm:"10",children:e.jsx(o,{value:t.city,onChange:m,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(s,{sm:"10",children:e.jsx(o,{value:t.postalCode,onChange:m,name:"postalCode",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(s,{sm:"10",children:e.jsx(o,{value:t.startDate,onChange:m,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx("input",{type:"hidden",value:S,name:"selectedP"}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(s,{sm:"10",children:[e.jsx(o,{type:"file",id:"file-input",name:"picture",onChange:P,accept:"image/*",ref:x}),g&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(O,{src:g,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(v,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:R,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Super Admin Access"}),e.jsx(s,{sm:"10",children:e.jsxs(B,{value:t.role,name:"role",onChange:l=>{p({...t,role:l.target.value})},children:[e.jsx("option",{defaultValue:"",children:"Select Access"}),e.jsx("option",{value:"SupportFlowSuperadmin",children:"Only Support Flow"}),e.jsx("option",{value:"GeneralFlowSuperadmin",children:"Only General FLow"}),e.jsx("option",{value:"Superadmin",children:"Both"})]})})]})}),e.jsx(n,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(v,{disabled:N,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{K as default};

import{r as a,b as R,j as c}from"./index-CAFh8Qe-.js";import{P as C}from"./PageMetaData-BdrMy3rA.js";import{A as E}from"./AllDataTables-DD3nl9fE.js";import{B as n}from"./urls-D84fNQqS.js";import"./ComponentContainerCard-BHLb5dlU.js";import"./Card-B6ongrnB.js";import"./divWithClassName-Ds10gy6J.js";import"./Button-DUm19Z6r.js";import"./index-V1ytkxP2.js";import"./IconifyIcon-DIoPZGOh.js";import"./index-CFsCAHnL.js";import"./Table-C7xwyyyl.js";import"./Modal-CXhHI7_p.js";import"./useWindow-9TrldcIQ.js";import"./useEventCallback-CZjKJ66g.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-Cm1DoMSP.js";import"./Form-cPeREZGd.js";import"./FormCheck-woMCjg_3.js";import"./FormControl-D6Fi2fvk.js";import"./FormContext-CVQotS7s.js";import"./FormGroup-C4HhIO73.js";import"./FormLabel-DJooOqJq.js";import"./FormRange-BHW8Q9KG.js";import"./FormSelect-DckZIl1p.js";const et=()=>{const[m,S]=a.useState([]),[k,d]=a.useState(!1),[b,y]=a.useState([]),[I,g]=a.useState({}),{companyId:l,projectId:i}=R(),f=async()=>{d(!0);try{const s=`${n}/get-checklist`,t=await(await fetch(s)).json();S(t==null?void 0:t.data),await u()}catch(s){console.error(s)}finally{d(!1)}},u=async()=>{var s;if(!(!l||!i))try{const t=await(await fetch(`${n}/get-checklist`)).json();if(t!=null&&t.data&&t.data.length>0){const e=await(await fetch(`${n}/get-project-detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:i})})).json();if(e!=null&&e.professionAssociatedData){const A=Object.keys(e.professionAssociatedData)[0],o=e.professionAssociatedData[A],h=(o==null?void 0:o.SubjectMatterId)||((s=o==null?void 0:o.profession)==null?void 0:s.SubjectMatterId);if(h){const x=t.data.map(r=>r._id),$=`${n}/check-static-document-checklist-status?projectId=${i}&professionId=${h}&checklistIds=${JSON.stringify(x)}`,j=await fetch($);if(j.ok){const r=await j.json();y(r.submittedChecklistIds||[]),g(r.approvalStatus||{})}}}}}catch(p){console.error("Error checking submission status:",p)}};a.useEffect(()=>{f(),u()},[l,i]);const w={showSubmitAction:!0,submittedChecklistIds:b,approvalStatus:I};return c.jsxs(c.Fragment,{children:[c.jsx(C,{title:"Data Tables"}),m&&!k&&c.jsx(E,{refreshData:f,checkList:m,options:w})]})};export{et as default};

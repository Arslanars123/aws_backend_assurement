import{r as a,b as R,j as c}from"./index-BaEXYFjf.js";import{P as C}from"./PageMetaData-PSLyQQbJ.js";import{A as E}from"./AllDataTables-R1FbItks.js";import{B as n}from"./urls-D3INM0xz.js";import"./ComponentContainerCard-r7D-7GT6.js";import"./Card-Dy9P-MVM.js";import"./divWithClassName-C80pLmVh.js";import"./Button-CHKoWH3g.js";import"./index-Dtm2hpoE.js";import"./IconifyIcon-fHAw3wY3.js";import"./index-B6wZVkes.js";import"./Table-Bp7AttHO.js";import"./Modal-BD-tspKu.js";import"./useWindow-CC4Mdgns.js";import"./useEventCallback-BlKFiCyd.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-BzGmN_3P.js";import"./Form-DRj-Cje_.js";import"./FormControl-ZQh5JFHF.js";import"./FormContext-kuoxlIs5.js";import"./ElementChildren-C1IvTjgI.js";import"./FormGroup-CYZ2QzZ_.js";import"./FormLabel-BbxHmEpm.js";import"./FormRange-CU4CgP6g.js";import"./FormSelect-Bf0Zl-q8.js";const et=()=>{const[m,S]=a.useState([]),[k,d]=a.useState(!1),[b,y]=a.useState([]),[I,g]=a.useState({}),{companyId:l,projectId:i}=R(),f=async()=>{d(!0);try{const s=`${n}/get-checklist`,t=await(await fetch(s)).json();S(t==null?void 0:t.data),await u()}catch(s){console.error(s)}finally{d(!1)}},u=async()=>{var s;if(!(!l||!i))try{const t=await(await fetch(`${n}/get-checklist`)).json();if(t!=null&&t.data&&t.data.length>0){const e=await(await fetch(`${n}/get-project-detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:i})})).json();if(e!=null&&e.professionAssociatedData){const A=Object.keys(e.professionAssociatedData)[0],o=e.professionAssociatedData[A],h=(o==null?void 0:o.SubjectMatterId)||((s=o==null?void 0:o.profession)==null?void 0:s.SubjectMatterId);if(h){const x=t.data.map(r=>r._id),$=`${n}/check-static-document-checklist-status?projectId=${i}&professionId=${h}&checklistIds=${JSON.stringify(x)}`,j=await fetch($);if(j.ok){const r=await j.json();y(r.submittedChecklistIds||[]),g(r.approvalStatus||{})}}}}}catch(p){console.error("Error checking submission status:",p)}};a.useEffect(()=>{f(),u()},[l,i]);const w={showSubmitAction:!0,submittedChecklistIds:b,approvalStatus:I};return c.jsxs(c.Fragment,{children:[c.jsx(C,{title:"Data Tables"}),m&&!k&&c.jsx(E,{refreshData:f,checkList:m,options:w})]})};export{et as default};

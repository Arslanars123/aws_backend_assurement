import{r as t,j as e}from"./index-CF9SjLWQ.js";import{D as L}from"./page-DbZ3f2yu.js";import{P as M}from"./PDFButton-CY5rODRi.js";import{A as h}from"./Alert-DVLUPR3Z.js";const H=({pdfUrl:n,onSave:i,onClose:c,showMarkerNumbers:w=!0})=>{const[x,s]=t.useState(!0),[l,d]=t.useState(null),[u,D]=t.useState(null),[P,j]=t.useState([]),[v,C]=t.useState(10),[F,k]=t.useState(!1),y=t.useRef();return t.useEffect(()=>(n&&(async()=>{try{s(!0),d(null);const r=await fetch(n);if(!r.ok)throw new Error("Failed to fetch PDF");const p=await r.arrayBuffer();if((await M.load(p)).getPageCount()>1){k(!0),s(!1);return}const f=window.pdfjsLib;if(!f)throw new Error("PDF.js library not found. Make sure it is loaded in your HTML.");const m=await(await f.getDocument({data:p}).promise).getPage(1),a=document.createElement("canvas"),o=m.getViewport({scale:2});a.width=o.width,a.height=o.height;const E={canvasContext:a.getContext("2d"),viewport:o};await m.render(E).promise;const S=a.toDataURL("image/png");D(S),s(!1)}catch(r){console.error("Error processing PDF:",r),d(`Failed to process PDF: ${r.message}`),s(!1)}})(),()=>{}),[n]),x?e.jsx("div",{className:"text-center p-4",children:e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):l?e.jsxs(h,{variant:"danger",children:[e.jsx("h6",{children:"Error:"}),e.jsx("p",{children:l})]}):F?e.jsxs(h,{variant:"warning",children:[e.jsx("h6",{children:"Multiple Pages Detected"}),e.jsx("p",{children:"This PDF has multiple pages. Currently, only single-page PDFs are supported for annotation."})]}):u?e.jsx(L,{ref:y,drawDotsOnImage:{show:!0,imgUrl:u},setDrawDotsAnImage:()=>c&&c(),onSave:g=>i&&i(g),markers:P,setMarkers:j,dotSize:v,setDotSize:C,showMarkerNumbers:w}):null};export{H as P};

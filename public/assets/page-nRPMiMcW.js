import{r as c,a as w,G as P,j as e,R as l,C as t}from"./index-CFC_skDo.js";import{C as A}from"./ComponentContainerCard-BgtLXH2x.js";import{P as R}from"./PageMetaData--AH9Un1H.js";import{B as V}from"./urls-BhGeBsON.js";import{F as n}from"./FormLabel-S5bDb0w7.js";import{F as r}from"./FormControl-CiIjeg_-.js";import{I as D}from"./Image-xOOuaExf.js";import{B as g}from"./Button-2F6J7aEx.js";import{F as E}from"./FormSelect-D_Be58Ty.js";import"./Card-DSVzyJ_p.js";import"./divWithClassName-Dn3DrZ5P.js";const I={username:"",password:"",role:"Superadmin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},_=()=>{const[s,u]=c.useState(I),[v,p]=c.useState(!1),N=w(),[h,j]=c.useState(null),[f,b]=c.useState(null),d=c.useRef(null),{selectedProjects:y}=c.useContext(P),o=i=>{const{name:a,value:m}=i.target;u({...s,[a]:m})},C=i=>{const a=i.target.files[0];if(j(a),a){const m=URL.createObjectURL(a);b(m)}},S=async i=>{i.preventDefault(),p(!0);try{const a=new FormData;Object.keys(s).forEach(x=>{a.append(x,s[x])}),h&&a.append("picture",h);const m=await fetch(`${V}/store-user`,{method:"POST",body:a});if(m.ok){const x=await m.json();N("/dashboard/superadmins",{state:{success:"Super Admin added successfully!"}})}else console.error("Error:",m.statusText)}catch(a){console.error("Fetch error:",a)}p(!1)},F=()=>{j(null),b(null),d.current&&(d.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Add Super Admin"}),e.jsx("form",{onSubmit:S,children:e.jsx(l,{className:"justify-content-center",children:e.jsx(t,{children:e.jsx(A,{title:"Add Super Admin",children:e.jsxs(l,{children:[e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.username,onChange:o,name:"username",type:"email",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.name,onChange:o,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.phone,onChange:o,name:"phone",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Password"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.password,onChange:o,name:"password",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.address,onChange:o,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.city,onChange:o,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.postalCode,onChange:o,name:"postalCode",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:s.startDate,onChange:o,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx("input",{type:"hidden",value:y,name:"selectedP"}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(t,{sm:"10",children:[e.jsx(r,{type:"file",id:"file-input",name:"picture",onChange:C,accept:"image/*",ref:d}),f&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(D,{src:f,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(g,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:F,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(t,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{className:"col-sm-2 col-form-label text-end",children:"Super Admin Access"}),e.jsx(t,{sm:"10",children:e.jsxs(E,{value:s.role,name:"role",onChange:i=>{u({...s,role:i.target.value})},children:[e.jsx("option",{defaultValue:"",children:"Select Access"}),e.jsx("option",{value:"SupportFlowSuperadmin",children:"Only Support Flow"}),e.jsx("option",{value:"GeneralFlowSuperadmin",children:"Only General FLow"}),e.jsx("option",{value:"Superadmin",children:"Both"})]})})]})}),e.jsx(l,{className:"mb-3 d-flex justify-content-center",children:e.jsx(t,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(g,{disabled:v,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{_ as default};

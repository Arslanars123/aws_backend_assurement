import{b,a as g,ab as j,r as d,j as n}from"./index-DPgj8bsv.js";import{P as y}from"./PageMetaData-BOIE4fT1.js";import{B as l}from"./urls-B0CXljtC.js";import{G as E}from"./EditPage-D2kYwtrc.js";import"./utils-CJbgxhCN.js";import"./Form-DCy6L--M.js";import"./FormControl-B_1Cr1px.js";import"./FormContext-D3odgfWO.js";import"./ElementChildren-BDidIMmr.js";import"./FormGroup-BjdBrQcm.js";import"./FormLabel-DrWgYkuA.js";import"./FormRange-CujNJWzu.js";import"./FormSelect-BPDON-Nl.js";import"./Button-4B-OZ0gB.js";import"./Image-VbqUsSSH.js";import"./TextField-DE-7kN0j.js";import"./useFormControl-C1C_dqrR.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-C8K2eoCJ.js";const J=()=>{const{taskId:s}=b(),c=g(),[f]=j(),o=f.get("report"),[p,u]=d.useState({});d.useEffect(()=>{s&&fetch(`${l}/get-task-detail/${s}`).then(async r=>{const t=await r.json();u(t)}).catch(r=>console.error(r))},[s]);const h=async r=>{try{const t=new FormData;for(const[e,a]of Object.entries(r))a instanceof File?t.append(e,a):Array.isArray(a)&&a.some(i=>i instanceof File)?a.forEach(i=>{i instanceof File&&t.append(`${e}[]`,i)}):typeof a=="object"&&a!==null?t.append(e,JSON.stringify(a)):t.append(e,a);const m=await fetch(`${l}/update-task/${s}`,{method:"POST",body:t});if(m.ok){const e=o?`/dashboard/projects?report=${o}`:"/dashboard/tasks";c(e)}else{const e=await m.json();alert(`Failed to update: ${e.message||"Unknown error"}`)}}catch(t){console.error("Error updating user:",t),alert("Error updating user. Please try again.")}},k=()=>{const r=o?`/dashboard/projects?report=${o}`:"/dashboard/tasks";c(r)};return n.jsxs(n.Fragment,{children:[n.jsx(y,{title:"Edit Task"}),p&&n.jsx(E,{data:p,disabledFields:["_id"],onSave:h,onCancel:k})]})};export{J as default};

import{c as j,a as w,r as l,b as g,j as r,R as d,C as y}from"./index-CcXmhF8I.js";import{C as x}from"./ComponentContainerCard-DfOGF2MZ.js";import{B as i}from"./urls-BhGeBsON.js";import{D as C}from"./DetailPage-DG7f5nO3.js";import"./Card-BbEwloSO.js";import"./divWithClassName-stAqo3H6.js";import"./Button-Bb5NLKr0.js";import"./FormLabel-ur_7HqrZ.js";import"./Modal-DS3RX9z9.js";import"./useWindow-Dt3mh2_H.js";import"./DataKey-SibGzzBh.js";import"./NoopTransition-C0OklqXl.js";import"./Image-BA0SNZ1J.js";const M=()=>{const{setLoading:c}=j(),a=w(),[p,m]=l.useState(null),{companyId:n,projectId:t,workerId:s}=g(),u=()=>{a(`/dashboard/companies/view/${n}/workers/edit/${s}`)},h=async()=>{try{if(t){const e=await fetch(`${i}/remove-user-from-project`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,projectId:t})});if(e.ok){const o=await e.json();a(`/dashboard/companies/view/${n}/projects/view/${t}`),console.log("Success:",o)}else console.error("Error:",e.statusText)}else{const e=await fetch(`${i}/delete-user/${s}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const o=await e.json();a(`/dashboard/companies/view/${n}`),console.log("Success:",o)}else console.error("Error:",e.statusText)}}catch(e){console.error("Error:",e)}};return l.useEffect(()=>{s&&(c(!0),fetch(`${i}/get-user-detail/${s}`).then(async e=>{const o=await e.json(),f={name:o.name||"",username:o.username||"",picture:o.picture||"",phone:o.phone||"",password:o.password||"",address:o.address||"",isProjectManager:o.isProjectManager||"",postalCode:o.postalCode||"",city:o.city||""};m(f)}).catch(e=>console.error(e)).finally(()=>c(!1)))},[s]),r.jsx(d,{className:"justify-content-center",children:r.jsx(y,{lg:"12",children:r.jsx(x,{title:"Worker Details",children:r.jsx(d,{children:r.jsx(C,{data:p,handleEdit:t?null:u,handleDelete:h,options:{isProjectManager:[{name:"Yes",value:"yes"},{name:"No",value:"no"}]}})})})})})};export{M as default};

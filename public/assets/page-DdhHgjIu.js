import{r as d,a as I,b as k,j as e,R as r,C as s}from"./index-BMHGnWcK.js";import{C as A}from"./ComponentContainerCard-DqzcDgtW.js";import{P as V}from"./PageMetaData-Bgn24qMg.js";import{B as j}from"./urls-CvG9cD6N.js";import{F as l}from"./FormLabel-BBJljh0R.js";import{F as b}from"./FormControl-BhCdWsRE.js";import{F as m}from"./FormSelect-Dr1VIvZ_.js";import{B}from"./Button-Dwvyfso6.js";import"./Card-BQIi55Il.js";import"./divWithClassName-BnTSImTn.js";import"./FormContext-_pJuLZf_.js";const E={title:null,what:null,when:null,scope:100,executedDate:null,where:null,users:null,profession:null},L=()=>{const[o,p]=d.useState(E),[S,g]=d.useState(!1),y=I(),{companyId:f,projectId:a}=k(),w=t=>{const{name:n,value:i}=t.target;p({...o,[n]:i})};d.useEffect(()=>{(async()=>{try{const i=await(await fetch(`${j}/get-users?projectId=${a}`)).json();N(i)}catch(n){console.error("Error fetching draws:",n)}})()},[a]);const[C,N]=d.useState([]),[v,P]=d.useState([]);d.useEffect(()=>{(async()=>{try{const i=await(await fetch(`${j}/get-company-professions?companyId=${f}&projectId=${a}`)).json();P(i)}catch(n){console.error("Error fetching professions:",n)}})()},[f,a]);const c=t=>{const{name:n,value:i,multiple:u,options:D}=t.target;if(u){const x=Array.from(D).filter(h=>h.selected).map(h=>h.value);p({...o,[n]:x})}else if(n==="profession"){const x=v.find(h=>h._id===i);p({...o,[n]:i,professionObject:x?JSON.stringify(x):null})}else p({...o,[n]:i})},F=async t=>{t.preventDefault(),g(!0);try{const n=new FormData;Object.keys(o).forEach(u=>{n.append(u,o[u])}),n.append("companyId",f),n.append("projectsId",[a]);const i=await fetch(`${j}/store-super`,{method:"POST",body:n});if(i.ok){const u=await i.json();y(`/dashboard/companies/view/${f}/projects/view/${a}`,{state:{success:"Supervision Intern added successfully!"}})}else console.error("Error:",i.statusText)}catch(n){console.error("Fetch error:",n)}g(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Supervision Intern"}),e.jsx("form",{onSubmit:F,children:e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(A,{title:"Add Supervision Intern",children:e.jsxs(r,{children:[e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Scope"}),e.jsxs(s,{sm:"10",children:[e.jsx(b,{value:o.scope,disabled:!0,type:"text",id:"example-text-input"}),e.jsx("small",{className:"text-muted",children:"Default value: 100"})]})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Executed Date"}),e.jsx(s,{sm:"10",children:e.jsx(b,{value:o.executedDate,onChange:w,name:"executedDate",type:"date",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{className:"col-sm-2 col-form-label text-end",children:"Select Title"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:o.title,name:"title",onChange:c,children:[e.jsx("option",{defaultValue:"",children:"Select Title"}),e.jsx("option",{value:"Process - Project Review",children:"Process - Project Review"}),e.jsx("option",{value:"Miscellaneous",children:"Miscellaneous"}),e.jsx("option",{value:"Controls for the contractor",children:"Controls for the contractor"})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{className:"col-sm-2 col-form-label text-end",children:"Select What"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:o.what,name:"what",onChange:c,children:[e.jsx("option",{defaultValue:"",children:"Select What"}),e.jsx("option",{value:"Consistency in project materials (drawings/descriptions/contract)",children:"Consistency in project materials (drawings/descriptions/contract)"}),e.jsx("option",{value:"Planning of execution method incl. Risk assessment (work environment) and establishment of KS and APV folders.",children:"Planning of execution method incl. Risk assessment (work environment) and establishment of KS and APV folders."}),e.jsx("option",{value:"Photo registration of existing conditions has been carried out.",children:"Photo registration of existing conditions has been carried out."}),e.jsx("option",{value:"Submission of KS materials to Construction Management.",children:"Submission of KS materials to Construction Management."}),e.jsx("option",{value:"Submission of APV Folder to Construction Management.",children:"Submission of APV Folder to Construction Management."}),e.jsx("option",{value:"Submitted completed KS continuously to construction management, in connection with construction meetings or monthly digitally.",children:"Submitted completed KS continuously to construction management, in connection with construction meetings or monthly digitally."}),e.jsx("option",{value:"Controlled execution of receiving and process control, including inspection notes for deficiencies and errors.",children:"Controlled execution of receiving and process control, including inspection notes for deficiencies and errors."}),e.jsx("option",{value:"Master review/final inspection, including verification that there is a quality assurance for the completed work.",children:"Master review/final inspection, including verification that there is a quality assurance for the completed work."})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{className:"col-sm-2 col-form-label text-end",children:"Select When"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:o.when,name:"when",onChange:c,children:[e.jsx("option",{defaultValue:"",children:"Select When"}),e.jsx("option",{value:"During process/project review",children:"During process/project review"}),e.jsx("option",{value:"Before kickoff meeting",children:"Before kickoff meeting"}),e.jsx("option",{value:"Before startup",children:"Before startup"}),e.jsx("option",{value:"At construction meetings or via email",children:"At construction meetings or via email"}),e.jsx("option",{value:"Continuously, but at least every 14 days and possibly before the construction meeting",children:"Continuously, but at least every 14 days and possibly before the construction meeting"}),e.jsx("option",{value:"Before closing off hidden building components, and before handing over sections or surfaces to another contractor. And upon completion of their work",children:"Before closing off hidden building components, and before handing over sections or surfaces to another contractor. And upon completion of their work"})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{className:"col-sm-2 col-form-label text-end",children:"Select Where"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:o.where,name:"where",onChange:c,children:[e.jsx("option",{defaultValue:"",children:"Select Where"}),e.jsx("option",{value:"Documented in Item in Ks-material.",children:"Documented in Item in Ks-material."}),e.jsx("option",{value:"Generally",children:"Generally"}),e.jsx("option",{value:"Documented in the KS Folder.",children:"Documented in the KS Folder."})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{className:"col-sm-2 col-form-label text-end",children:"Select Profession"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:o.profession,name:"profession",onChange:c,children:[e.jsx("option",{defaultValue:"",children:"Select Profession"}),v.map(t=>e.jsxs("option",{value:t._id,children:[t.GroupName," - ",t.SubjectMatterId]},t._id))]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(l,{className:"col-sm-2 col-form-label text-end",children:"Select Recipients"}),e.jsxs(s,{sm:"10",children:[e.jsxs(m,{value:o.users,name:"users",onChange:c,multiple:!0,children:[e.jsx("option",{defaultValue:"",children:"Select Recipients"}),C.map(t=>e.jsxs("option",{value:t._id,children:[t.name||t.username," - ",t.role||"User"]},t._id))]}),e.jsx("small",{className:"text-muted",children:"Hold Ctrl/Cmd to select multiple recipients"})]})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(B,{disabled:S,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{L as default};

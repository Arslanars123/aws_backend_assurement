import{c as I,r as n,b as E,j as s,R as p,C as g}from"./index-DPgj8bsv.js";import{C as x}from"./ComponentContainerCard-DoOo3fSv.js";import{B as j}from"./urls-B0CXljtC.js";import{D as y}from"./DetailPage-Zi0rv9hA.js";import"./Card-uWXaDKgm.js";import"./divWithClassName-CSK1W61z.js";import"./Button-4B-OZ0gB.js";import"./FormLabel-DrWgYkuA.js";import"./FormContext-D3odgfWO.js";import"./Modal-wZS0_5JS.js";import"./useWindow-Bg5-wBF6.js";import"./useEventCallback-BytfugQP.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-CP8B-7eK.js";import"./Image-VbqUsSSH.js";const q=()=>{const{setLoading:m}=I(),[i,d]=n.useState(null),[a,f]=n.useState(null),{companyId:r,projectId:c,professionId:l}=E(),C=async t=>{if(!(!c||!r||!(t!=null&&t.SubjectMatterId)))try{const o=await fetch(`${j}/get-project-eurocodes?companyId=${r}&projectId=${c}`);if(o.ok){const e=await o.json();if(e.success&&e.data){const u=e.data.find(h=>h.subjectMatterId===t.SubjectMatterId);f((u==null?void 0:u.eurocodes)||null)}}}catch(o){console.error("Error fetching project EuroCodes:",o)}};return n.useEffect(()=>{if(l){const t=r?"get-profession-detail-in-company-projects":"get-profession-detail";m(!0),fetch(`${j}/${t}/${l}`).then(async o=>{const e=await o.json();e==null||delete e._id,e==null||delete e.projectsId,e==null||delete e.companyId,e==null||delete e.professionID,d(e),c&&r&&C(e)}).catch(o=>console.error(o)).finally(()=>m(!1))}},[l,c,r]),n.useEffect(()=>{i&&c&&r&&(a?d(t=>({...t,EuroCode:a,_euroCodeSource:"project"})):a===null&&d(t=>({...t,_euroCodeSource:"original"})))},[a,i,c,r]),s.jsx(p,{className:"justify-content-center",children:s.jsx(g,{lg:"12",children:s.jsx(x,{title:"View Profession",children:s.jsx(p,{children:s.jsx(y,{data:i})})})})})};export{q as default};

import{r as o,b,a as S,j as e,R as c,C as r}from"./index-CEbbE1Sf.js";import{C as $}from"./ComponentContainerCard-BpYspYtC.js";import{P as B}from"./PageMetaData-qE4R9bbS.js";import{B as f}from"./urls-CvG9cD6N.js";import{B as d}from"./Button-CWQV4UHt.js";import{F as p}from"./FormLabel-WQTNbj7P.js";import{M as l}from"./Modal-C5567GrF.js";import"./Card-mt6mV6AB.js";import"./divWithClassName-CT9nWrpT.js";import"./FormContext-CSwRqVJr.js";import"./useWindow-Bj2vCJZa.js";import"./useEventCallback-C6szz9nn.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-PrPCoCM2.js";const O=()=>{var h,j;const[g,u]=o.useState(!0),[a,w]=o.useState(null),[N,n]=o.useState(!1),{drawId:i,companyId:m,projectId:x}=b(),D=S();o.useEffect(()=>{i&&fetch(`${f}/get-draw-detail/${i}`).then(async s=>{const t=await s.json();w(t)}).catch(s=>console.error(s)).finally(()=>u(!1))},[i]),console.log("draw",a);const y=()=>{n(!0)},v=async()=>{try{const s=await fetch(`${f}/delete-draw/${i}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(s.ok){const t=await s.json(),C=x?`/dashboard/companies/view/${m}/projects/view/${x}`:`/dashboard/companies/view/${m}/draws`;D(C,{state:{success:"Drawing deleted successfully!"}}),console.log("Success:",t)}else console.error("Error:",s.statusText),alert("Failed to delete drawing. Please try again.")}catch(s){console.error("Fetch error:",s),alert("Error deleting drawing. Please try again.")}n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"View Drawing"}),g?null:e.jsx(c,{className:"justify-content-center",children:e.jsx(r,{lg:"12",children:e.jsxs($,{title:"View Drawing",children:[e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs(d,{variant:"danger",onClick:y,children:[e.jsx("i",{className:"fas fa-trash me-1"}),"Delete Drawing"]})}),e.jsxs(c,{children:[e.jsx(r,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(p,{className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(r,{sm:"10",className:"d-flex align-items-center",children:(a==null?void 0:a.name)||"-"})]})}),e.jsx(r,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(p,{className:"col-sm-2 col-form-label text-end",children:"Description"}),e.jsx(r,{sm:"10",className:"d-flex align-items-center",children:(a==null?void 0:a.description)||"-"})]})}),e.jsxs(r,{lg:"12",className:"mb-4",children:[e.jsx("h5",{children:"Main Drawings"}),e.jsx("div",{className:"d-flex flex-wrap",children:(h=a==null?void 0:a.mainDrawings)==null?void 0:h.map((s,t)=>e.jsxs("div",{className:"me-2 mb-2 text-center",children:[e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}}),e.jsx("div",{className:"small text-muted",children:s==null?void 0:s.original})]},`main-${t}`))})]}),e.jsxs(r,{lg:"12",children:[e.jsx("h5",{children:"Child Drawings"}),e.jsx("div",{className:"d-flex flex-wrap",children:(j=a==null?void 0:a.childDrawings)==null?void 0:j.map((s,t)=>e.jsxs("div",{className:"me-2 mb-2 text-center",children:[e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}}),e.jsx("div",{className:"small text-muted",children:s==null?void 0:s.original})]},`child-${t}`))})]})]})]})})}),e.jsxs(l,{show:N,onHide:()=>n(!1),children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx(l.Title,{children:"Confirm Deletion"})}),e.jsx(l.Body,{children:"Are you sure you want to delete this drawing? This action cannot be undone."}),e.jsxs(l.Footer,{children:[e.jsx(d,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(d,{variant:"danger",onClick:v,children:"Yes, Delete"})]})]})]})};export{O as default};

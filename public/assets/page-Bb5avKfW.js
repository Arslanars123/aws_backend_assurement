import{r as s,a as P,G as y,j as e,R as a,C as n}from"./index-CcXmhF8I.js";import{C}from"./ComponentContainerCard-DfOGF2MZ.js";import{P as g}from"./PageMetaData-_VBvv3yh.js";import{B as F}from"./urls-BhGeBsON.js";import{F as v}from"./FormLabel-ur_7HqrZ.js";import{F as w}from"./FormControl-IaSihKBy.js";import{B as R}from"./Button-Bb5NLKr0.js";import"./Card-BbEwloSO.js";import"./divWithClassName-stAqo3H6.js";const N={},J=()=>{const[E,U]=s.useState(N),[m,c]=s.useState(!1),u=P(),[i,p]=s.useState(null),[A,f]=s.useState(null),x=s.useRef(null),{selectedCompany:h,selectedProjects:j,selectedProfession:B,companies:D,projects:I}=s.useContext(y),[l,L]=s.useState([]),[G,O]=s.useState([]);s.useRef(null);const S=o=>{const t=o.target.files[0];if(p(t),t){const r=URL.createObjectURL(t);f(r)}},b=async o=>{o.preventDefault(),c(!0);try{const t=new FormData;i&&t.append("file",i),t.append("companyId",h),t.append("projectsId",j),l.length>0&&l.forEach(d=>{t.append("pictures",d)});const r=await fetch(`${F}/store-standard`,{method:"POST",body:t});if(r.ok){const d=await r.json();u("/dashboard/standards",{state:{success:"Standard added successfully!"}})}else console.error("Error:",r.statusText)}catch(t){console.error("Fetch error:",t)}c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(g,{title:"Add Standard"}),e.jsx("form",{onSubmit:b,children:e.jsx(a,{className:"justify-content-center",children:e.jsx(n,{children:e.jsx(C,{title:"Add Standard",children:e.jsxs(a,{children:[e.jsx(n,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(v,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Upload Excel File"}),e.jsx(n,{sm:"10",children:e.jsx(w,{type:"file",id:"file-input",name:"picture",onChange:S,ref:x})})]})}),e.jsx(a,{className:"mb-3 d-flex justify-content-center",children:e.jsx(n,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(R,{disabled:m,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{J as default};

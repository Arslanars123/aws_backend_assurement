import{c as g,a as x,r as l,b as w,ab as C,j as t,R as c,C as d}from"./index-DPgj8bsv.js";import{C as E}from"./ComponentContainerCard-DoOo3fSv.js";import{B as p}from"./urls-B0CXljtC.js";import{D as I}from"./DetailPage-Zi0rv9hA.js";import{B as N}from"./Button-4B-OZ0gB.js";import"./Card-uWXaDKgm.js";import"./divWithClassName-CSK1W61z.js";import"./FormLabel-DrWgYkuA.js";import"./FormContext-D3odgfWO.js";import"./Modal-wZS0_5JS.js";import"./useWindow-Bg5-wBF6.js";import"./useEventCallback-BytfugQP.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-CP8B-7eK.js";import"./Image-VbqUsSSH.js";const O=()=>{const{setLoading:s}=g(),m=x(),[h,f]=l.useState([]),{companyId:n,projectId:i,specialControleId:r}=w(),[u]=C();u.get("report");const j=async()=>{try{s(!0);const a=await(await fetch(`${p}/get-special-control?companyId=${n}&projectId=${i}&specialControleId=${r}`)).json(),e=a==null?void 0:a[0];e==null||delete e._id,e==null||delete e.projectsId,e==null||delete e.companyId,f(a)}catch(o){console.error("Error fetching workers:",o)}finally{s(!1)}},y=async()=>{if(window.confirm("Are you sure you want to delete this special control point? This action cannot be undone."))try{s(!0),(await fetch(`${p}/delete-special-control`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({specialControleId:r,companyId:n,projectId:i})})).ok?(alert("Special control point deleted successfully!"),m(`/dashboard/companies/view/${n}/projects/view/${i}/specialControle`)):alert("Failed to delete special control point. Please try again.")}catch(o){console.error("Error deleting special control point:",o),alert("An error occurred while deleting the special control point.")}finally{s(!1)}};return l.useEffect(()=>{r&&j()},[r]),t.jsx(c,{className:"justify-content-center",children:t.jsx(d,{lg:"12",children:t.jsx(E,{title:"Special Control Point",children:t.jsxs(c,{children:[t.jsx(d,{lg:"12",className:"mb-3",children:t.jsx("div",{className:"d-flex justify-content-end",children:t.jsxs(N,{variant:"danger",onClick:y,className:"me-2",children:[t.jsx("i",{className:"fas fa-trash me-1"}),"Delete"]})})}),t.jsx(I,{data:h})]})})})})};export{O as default};

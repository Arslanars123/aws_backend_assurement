import{b,a as j,r as i,j as s,R as N,C as u,o as l,an as P}from"./index-CcXmhF8I.js";import{P as y}from"./PageMetaData-_VBvv3yh.js";import{u as C,o as R,c as S,a as c,b as F}from"./index.esm-D6U-v1G7.js";import{a as v}from"./index-xsH4HHeE.js";import{T as d}from"./TextFormInput-QQfG7VBx.js";import{I as k}from"./IconifyIcon-DvcQp4Ra.js";import{B as E}from"./urls-BhGeBsON.js";import{l as $}from"./jpo-Ci11ADWT.js";import{C as I}from"./Card-BbEwloSO.js";import"./FormControl-IaSihKBy.js";import"./FormLabel-ur_7HqrZ.js";import"./FormGroup-D9ifnLaV.js";import"./divWithClassName-stAqo3H6.js";const T=S().shape({password:c().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:c().oneOf([F("password")],"Passwords must match").required("Please confirm your password")}),q=()=>{const{token:p}=b(),w=j(),[e,o]=i.useState(!1),[a,r]=i.useState({success:null,message:""}),{control:t,handleSubmit:h,reset:B}=C({resolver:R(T),defaultValues:{password:"",confirmPassword:""}}),x=async g=>{var m,n;o(!0),r({success:null,message:""});try{await v.post(`${E}/users/reset-password`,{token:p,password:g.password}),r({success:!0,message:"Password reset successful. You can now log in."}),setTimeout(()=>{w("/auth/login")},3e3)}catch(f){r({success:!1,message:((n=(m=f.response)==null?void 0:m.data)==null?void 0:n.error)||"Failed to reset password. Please try again."})}finally{o(!1)}};return s.jsxs("form",{onSubmit:h(x),className:"p-3",children:[a.message&&s.jsx("div",{className:`alert ${a.success?"alert-success":"alert-danger"} mb-3`,children:a.message}),s.jsx(d,{control:t,name:"password",label:"New Password",type:"password",placeholder:"Enter new password",containerClassName:"form-group mb-2",disabled:e}),s.jsx(d,{control:t,name:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Confirm new password",containerClassName:"form-group mb-2",disabled:e}),s.jsx(N,{className:"form-group mb-0",children:s.jsx(u,{xs:12,children:s.jsx("div",{className:"d-grid mt-3",children:s.jsx("button",{className:"btn btn-primary flex-centered",type:"submit",disabled:e,children:e?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Resetting..."]}):s.jsxs(s.Fragment,{children:["Reset Password ",s.jsx(k,{icon:"fa6-solid:right-to-bracket",className:"ms-1"})]})})})})})]})},J=()=>s.jsxs(s.Fragment,{children:[s.jsx(y,{title:"Reset Password"}),s.jsx(u,{lg:4,className:"mx-auto",children:s.jsxs(I,{children:[s.jsx(l,{className:"p-0 bg-black auth-header-box rounded-top",children:s.jsxs("div",{className:"text-center p-3",children:[s.jsx(P,{to:"/",className:"logo logo-admin",children:s.jsx("img",{src:$,height:50,alt:"logo",className:"auth-logo"})}),s.jsx("h4",{className:"mt-3 mb-1 fw-semibold text-white fs-18",children:"Enter New Password"})]})}),s.jsx(l,{className:"pt-0",children:s.jsx(q,{})})]})})]});export{J as default};

import{r as n,j as t,R as T,C as O,a as R}from"./index-CItDa9oU.js";import{B}from"./urls-BhGeBsON.js";import{F as c,f as S,a as L}from"./utils-BoMJQVWn.js";import{B as D}from"./Button-NHMpYk4g.js";import{A as N,C as U,T as $}from"./TextField-25mNyyXO.js";import"./FormControl-LKz46Evr.js";import"./FormLabel-j7WrMQh4.js";import"./ElementChildren-tP__EEt5.js";import"./FormGroup-BqcLHT-T.js";import"./FormRange-CKEc9yNw.js";import"./FormSelect-CxlmXlJB.js";import"./useFormControl-BwYPH7th.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-C8K2eoCJ.js";const G=({initialValues:f={},onSave:v,onCancel:F,options:m={},otherOptions:p={}})=>{const{fieldTypes:d={},placeholders:C={},dateFields:y=[]}=p,[b,u]=n.useState(f),[g,r]=n.useState({}),l=e=>{const{name:a,value:s}=e.target;u(i=>({...i,[a]:s}))},h=e=>{const{name:a,files:s}=e.target;(s==null?void 0:s.length)>0&&r(i=>({...i,[a]:s.length===1?s[0]:Array.from(s)}))},x=(e,a)=>{u(s=>({...s,[e]:a}))},E=e=>{e.preventDefault();const a={...b,...g};v(a)},P=e=>{const a=b[e]??"",s=y.includes(e)||L(a),i=d[e]||"text";return i==="file"?t.jsx(c.Control,{type:"file",name:e,onChange:h,accept:"image/*"}):m[e]?t.jsx(N,{multiple:!0,options:m[e],getOptionLabel:o=>o.name||o.label||"",value:Array.isArray(a)?a:[],onChange:(o,j)=>x(e,j),renderInput:o=>t.jsx($,{...o,variant:"outlined",placeholder:`Select ${S(e)}`}),renderTags:(o,j)=>o.map((A,w)=>n.createElement(U,{label:A.name||A.label,...j({index:w}),key:w}))}):s?t.jsx(c.Control,{type:"date",name:e,value:a?a.split("T")[0]:"",onChange:l,placeholder:C[e]}):t.jsx(c.Control,{type:i,name:e,value:a,onChange:l,placeholder:C[e]||`Enter ${S(e)}`})};return t.jsxs(c,{onSubmit:E,children:[t.jsx(T,{children:Object.keys(f).map(e=>t.jsx(O,{md:"6",className:"mb-3",children:t.jsxs(c.Group,{children:[t.jsx(c.Label,{children:S(e)}),P(e)]})},e))}),t.jsxs("div",{className:"d-flex justify-content-end mt-4",children:[t.jsx(D,{variant:"secondary",onClick:F,className:"me-2",children:"Cancel"}),t.jsx(D,{type:"submit",variant:"primary",children:"Submit"})]})]})},I={name:"",casenr:"",address:"",phone:"",contactPerson:""},ee=()=>{const[f,v]=n.useState(I),[F,m]=n.useState(!1),p=R(),[d,C]=n.useState(null),[y,b]=n.useState(null);n.useRef(null);const u=async g=>{m(!0);try{const r=new FormData;Object.entries(g).forEach(([h,x])=>{r.append(h,x)}),d&&r.append("picture",d);const l=await fetch(`${B}/store-company`,{method:"POST",body:r});if(l.ok){const h=await l.json();p("/dashboard/generalFlowCompanies",{state:{success:"Company added successfully!"}})}else console.error("Error:",l.statusText)}catch(r){console.error("Fetch error:",r)}m(!1)};return t.jsx(t.Fragment,{children:t.jsx(G,{initialValues:{name:"",address:"",email:"",phone:"",city:"",cvr:"",postalCode:"",companyPhone:"",picture:""},onSave:u,onCancel:()=>p("/dashboard/generalFlowCompanies"),otherOptions:{fieldTypes:{phone:"number",companyPhone:"number",picture:"file"},placeholders:{name:"Company name...",email:"Email address..."}}})})};export{ee as default};

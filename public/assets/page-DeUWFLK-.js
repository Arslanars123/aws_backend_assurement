import{r as m,b as k,j as e,R as n,C as a}from"./index-CF9SjLWQ.js";import{C as R}from"./ComponentContainerCard-n9fGDRyA.js";import{P as S}from"./PageMetaData-B4Fb5zJ6.js";import{B as c}from"./urls-BhGeBsON.js";import{P as F}from"./page-BXGCx7Kq.js";import{F as t}from"./FormLabel-CaO2MFER.js";import{B as o}from"./Button-UcXSk4np.js";import{I as D}from"./Image-DGQJ2Jha.js";import"./Card-Bx1F2r4C.js";import"./divWithClassName-13-QUwjt.js";import"./Modal-CQeUVPXG.js";import"./useWindow-BQWBaX9C.js";import"./DataKey-KKZij2X9.js";import"./NoopTransition-BChfWke-.js";import"./FormRange-C_Mxfksa.js";import"./PDFButton-CY5rODRi.js";const X=()=>{var f,p,g,N,b,u,w,$,P,v;const[y,x]=m.useState(!0),[s,C]=m.useState(null),{requestId:r}=k(),[h,j]=m.useState({show:!1,pdfFile:null,name:null}),[I,M]=m.useState({});m.useEffect(()=>{r&&(x(!0),fetch(`${c}/get-request-detail/${r}`).then(async l=>{const i=await l.json();C(i)}).catch(l=>console.error(l)).finally(()=>x(!1)))},[r]);const d=(l,i)=>{j({show:!0,pdfFile:l,name:i})};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Technity Request"}),y?null:e.jsx(n,{className:"justify-content-center",children:e.jsx(a,{lg:"12",children:e.jsx(R,{title:"View request",children:e.jsxs(n,{children:[e.jsx(a,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(t,{className:"col-sm-3 col-form-label text-end",children:"Item"}),e.jsx(a,{sm:"9",className:"d-flex align-items-center",children:s==null?void 0:s.item})]})}),e.jsx(a,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(t,{className:"col-sm-3 col-form-label text-end",children:"Recipient"}),e.jsx(a,{sm:"9",className:"d-flex align-items-center",children:(f=s==null?void 0:s.recipients)==null?void 0:f.name})]})}),e.jsx(a,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(t,{className:"col-sm-3 col-form-label text-end",children:"Project Manager"}),e.jsx(a,{sm:"9",className:"d-flex align-items-center",children:(p=s==null?void 0:s.projectManager)==null?void 0:p.name})]})}),e.jsx(a,{lg:"6",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(t,{className:"col-sm-3 col-form-label text-end",children:"Drawing"}),e.jsx(a,{sm:"9",className:"d-flex align-items-center",children:(g=s==null?void 0:s.drawing)==null?void 0:g.name})]})}),e.jsx(a,{lg:"12",children:e.jsxs(n,{className:"mb-2",children:[e.jsx(t,{className:"col-sm-2 col-form-label text-end",children:"Main Drawings"}),e.jsx(a,{sm:"10",children:(b=(N=s==null?void 0:s.drawing)==null?void 0:N.mainDrawings)==null?void 0:b.map((l,i)=>e.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[e.jsx(o,{variant:"link",className:"p-0 me-2",onClick:()=>d(`${c}/uploads/${l.stored}`,l.original),children:e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),e.jsx("div",{className:"small text-muted",children:l.original})]},i))})]})}),e.jsx(a,{lg:"12",children:e.jsxs(n,{className:"mb-2",children:[e.jsx(t,{className:"col-sm-2 col-form-label text-end",children:"Child Drawings"}),e.jsx(a,{sm:"10",children:(w=(u=s==null?void 0:s.drawing)==null?void 0:u.childDrawings)==null?void 0:w.map((l,i)=>e.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[e.jsx(o,{variant:"link",className:"p-0 me-2",onClick:()=>d(`${c}/uploads/${l.stored}`,l.original),children:e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),e.jsx("div",{className:"small text-muted",children:l.original})]},i))})]})}),(s==null?void 0:s.annotatedPdfs)&&s.annotatedPdfs.length>0&&e.jsx(a,{lg:"12",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(t,{className:"col-sm-2 col-form-label text-end",children:"Annotated Drawings"}),e.jsx(a,{sm:"10",className:"d-flex flex-wrap",children:($=s==null?void 0:s.annotatedPdfs)==null?void 0:$.map((l,i)=>e.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[e.jsx(o,{variant:"link",className:"p-0 me-2",onClick:()=>d(`${c}/uploads/${l.filename}`,l.originalName),children:e.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),e.jsx("div",{className:"small text-muted",children:l.originalName})]},i))})]})}),e.jsx(a,{lg:"12",children:e.jsxs(n,{className:"mb-3",children:[e.jsx(t,{className:"col-sm-2 col-form-label text-end",children:"Pictures"}),e.jsxs(a,{sm:"10",className:"d-flex flex-wrap",children:[(P=s==null?void 0:s.pictureObjects)==null?void 0:P.map((l,i)=>e.jsxs("div",{className:"me-3 mb-3 text-center",children:[e.jsx(D,{src:`${c}/uploads/${l.filename}`,alt:l.description,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx("div",{children:l.description})]},i)),!(s!=null&&s.pictureObjects)&&((v=s==null?void 0:s.pictures)==null?void 0:v.map((l,i)=>e.jsx("div",{className:"me-3 mb-3 text-center",children:e.jsx(D,{src:`${c}/uploads/${l}`,alt:`Image ${i}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}})},`existing-${i}`)))]})]})})]})})})}),h.show&&e.jsx(F,{drawDotsOnPdf:h,setDrawDotsOnPdf:j,readOnly:!0})]})};export{X as default};

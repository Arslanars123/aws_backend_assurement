import{r as d,a as S,b as A,j as e,R as a,C as t}from"./index-CF9SjLWQ.js";import{C as V}from"./ComponentContainerCard-n9fGDRyA.js";import{P as D}from"./PageMetaData-B4Fb5zJ6.js";import{B as I}from"./urls-BhGeBsON.js";import{F as l}from"./FormLabel-CaO2MFER.js";import{F as n}from"./FormControl-DmgB3XQy.js";import{I as E}from"./Image-DGQJ2Jha.js";import{B as N}from"./Button-UcXSk4np.js";import"./Card-Bx1F2r4C.js";import"./divWithClassName-13-QUwjt.js";const B={username:"",password:"",role:"Admin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},_=()=>{const[s,v]=d.useState(B),[C,h]=d.useState(!1),F=S(),[j,f]=d.useState(null),[b,g]=d.useState(null),x=d.useRef(null),{companyId:y}=A(),r=o=>{const{name:m,value:c}=o.target;v({...s,[m]:c})},P=o=>{const m=o.target.files[0];if(f(m),m){const c=URL.createObjectURL(m);g(c)}},w=async o=>{o.preventDefault();const m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,c=/^\d{10,15}$/;if(!m.test(s.username)){alert("Please enter a valid email address.");return}if(!c.test(s.phone)){alert("Please enter a valid phone number (10-15 digits).");return}h(!0);try{const i=new FormData;Object.keys(s).forEach(p=>{i.append(p,s[p])}),j&&i.append("picture",j),i.append("companyId",y);const u=await fetch(`${I}/store-user`,{method:"POST",body:i});if(u.ok){const p=await u.json();F(`/dashboard/companies/view/${y}`,{state:{success:"Admin added successfully!"}})}else console.error("Error:",u.statusText)}catch(i){console.error("Fetch error:",i)}h(!1)},R=()=>{f(null),g(null),x.current&&(x.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Add Admin"}),e.jsx("form",{onSubmit:w,children:e.jsx(a,{className:"justify-content-center",children:e.jsx(t,{children:e.jsx(V,{title:"Add Admin",children:e.jsxs(a,{children:[e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.username,onChange:r,name:"username",type:"email",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.name,onChange:r,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.phone,onChange:r,name:"phone",type:"number",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Password"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.password,onChange:r,name:"password",type:"password",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.address,onChange:r,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.city,onChange:r,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.postalCode,onChange:r,name:"postalCode",type:"number",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(t,{sm:"10",children:e.jsx(n,{value:s.startDate,onChange:r,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(a,{className:"mb-3",children:[e.jsx(l,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(t,{sm:"10",children:[e.jsx(n,{type:"file",id:"file-input",name:"picture",onChange:P,accept:"image/*",ref:x}),b&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(E,{src:b,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(N,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:R,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(a,{className:"mb-3 d-flex justify-content-center",children:e.jsx(t,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(N,{disabled:C,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{_ as default};

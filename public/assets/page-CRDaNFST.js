import{r as c,b as L,a as T,j as e,R as o,C as s}from"./index-Bhcfarzr.js";import{C as A}from"./ComponentContainerCard-CdRpaZOK.js";import{P as R}from"./PageMetaData-D1yst4PP.js";import{B as j}from"./urls-BhGeBsON.js";import{F as r}from"./FormLabel-DMds24G0.js";import{F as d}from"./FormControl-7WYzlHOA.js";import{F as m}from"./FormSelect-D2SUClsr.js";import{B}from"./Button-COOVOJrI.js";import"./Card-CWpROabE.js";import"./divWithClassName-DTdHczRx.js";const q=()=>{const[t,u]=c.useState(null),[b,f]=c.useState(!1),[g,C]=c.useState(!0);c.useState(null),c.useState(null),c.useState([]),c.useState([]);const{controlId:h}=L(),N=T();c.useRef(null),c.useRef(null),c.useState([]),c.useEffect(()=>{h&&fetch(`${j}/get-control-detail/${h}`).then(async l=>{const a=await l.json();u({...a})}).catch(l=>console.error(l)).finally(()=>C(!1))},[h]);const i=l=>{const{name:a,value:n}=l.target;u({...t,[a]:n})},x=l=>{const{name:a,value:n,multiple:S,options:I}=l.target;if(S){const w=Array.from(I).filter(p=>p.selected).map(p=>p.value);u({...t,[a]:w})}else u({...t,[a]:n})};c.useEffect(()=>{(async()=>{try{const n=await(await fetch(`${j}/get-projects`)).json();y(n)}catch(a){console.error("Error fetching projects:",a)}})()},[]);const[v,y]=c.useState([]);c.useEffect(()=>{(async()=>{try{const n=await(await fetch(`${j}/get-professions`)).json();F(n)}catch(a){console.error("Error fetching professions:",a)}})()},[]);const[E,F]=c.useState([]),P=async l=>{l.preventDefault(),f(!0);const a=new FormData;Object.keys(t).forEach(n=>{a.append(n,t[n])});try{const n=await fetch(`${j}/update-control/${h}`,{method:"POST",body:a});if(n.ok){const S=await n.json();N("/dashboard/controls",{state:{success:"Static Control Plan updated successfully!"}})}else console.error("Error:",n.statusText)}catch(n){console.error("Fetch error:",n)}f(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Edit Static Control Plan"}),g?null:e.jsx("form",{onSubmit:P,children:e.jsx(o,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(A,{title:"Edit Static Control Plan",children:e.jsxs(o,{children:[e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"B.2.2.2X"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.b222x,onChange:i,name:"b222x",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"B.3.2.2X"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.b322x,onChange:i,name:"b322x",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"A5.X"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.a5x,onChange:i,name:"a5x",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Special Text"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.specialText,onChange:i,name:"specialText",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"EXC Class Number 1 to 4"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.exc,onChange:i,name:"exc",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"CC Class Number 1 to 4"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.cc,onChange:i,name:"cc",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Controller"}),e.jsx(s,{sm:"10",children:e.jsx(d,{value:t==null?void 0:t.controllerT,onChange:i,name:"controllerT",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{className:"col-sm-2 col-form-label text-end",children:"Select Controller"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:t==null?void 0:t.controllerD,name:"controllerD",onChange:x,children:[e.jsx("option",{defaultValue:"",children:"Select Controller"}),e.jsx("option",{value:"admin",children:"Admin"})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{className:"col-sm-2 col-form-label text-end",children:"Select EURO Code"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:t==null?void 0:t.euroCode,name:"euroCode",onChange:x,children:[e.jsx("option",{defaultValue:"",children:"Select Euro Code"}),e.jsx("option",{value:"Load on Load Structures",children:"Load on Load Structures"}),e.jsx("option",{value:"Concrete Structures",children:"Concrete Structures"}),e.jsx("option",{value:"Steel Structures",children:"Steel Structures"}),e.jsx("option",{value:"Composite Structures",children:"Composite Structures"}),e.jsx("option",{value:"Timber Structures",children:"Timber Structures"}),e.jsx("option",{value:"Masonry",children:"Masonry"}),e.jsx("option",{value:"Geotechnics",children:"Geotechnics"}),e.jsx("option",{value:"Seismic Areas",children:"Seismic Areas"}),e.jsx("option",{value:"EN 1520: Lightweight Concrete",children:"EN 1520: Lightweight Concrete"}),e.jsx("option",{value:"EN 12602: Aerated Concrete",children:"EN 12602: Aerated Concrete"})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{className:"col-sm-2 col-form-label text-end",children:"Select Independent"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:t==null?void 0:t.independent,name:"independent",onChange:x,children:[e.jsx("option",{defaultValue:"",children:"Select Independent"}),e.jsx("option",{value:"Intern",children:"Intern"}),e.jsx("option",{value:"Extern",children:"Extern"})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{className:"col-sm-2 col-form-label text-end",children:"Select profession"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:t.professionId,name:"professionId",onChange:x,children:[e.jsx("option",{defaultValue:"",children:"Select profession"}),E.map(l=>e.jsx("option",{value:l._id,children:l.name},l.id))]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(o,{className:"mb-3",children:[e.jsx(r,{className:"col-sm-2 col-form-label text-end",children:"Select Projects"}),e.jsx(s,{sm:"10",children:e.jsxs(m,{value:t.projectsId,name:"projectsId",onChange:x,multiple:!0,children:[e.jsx("option",{defaultValue:"",children:"Select Projects"}),v.map(l=>e.jsxs("option",{value:l._id,children:[l.name," "]},l.id))]})})]})}),e.jsx(o,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(B,{disabled:b,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{q as default};

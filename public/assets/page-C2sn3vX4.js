import{r as m,b as M,j as s,R as c,C as a}from"./index-CcXmhF8I.js";import{C as S}from"./ComponentContainerCard-DfOGF2MZ.js";import{P as k}from"./PageMetaData-_VBvv3yh.js";import{B as t}from"./urls-BhGeBsON.js";import{P as F}from"./page-COk_T7aE.js";import{F as i}from"./FormLabel-ur_7HqrZ.js";import{B as o}from"./Button-Bb5NLKr0.js";import{I as $}from"./Image-BA0SNZ1J.js";import"./Card-BbEwloSO.js";import"./divWithClassName-stAqo3H6.js";import"./Modal-DS3RX9z9.js";import"./useWindow-Dt3mh2_H.js";import"./DataKey-SibGzzBh.js";import"./NoopTransition-C0OklqXl.js";import"./FormRange-CQhrKEDN.js";import"./PDFButton-ck9OA1nG.js";const K=()=>{var j,f,p,g,N,u,b,w,P,v;const[C,D]=m.useState(!0),[e,y]=m.useState(null),{mentionId:n}=M(),[x,h]=m.useState({show:!1,pdfFile:null,name:null});m.useEffect(()=>{n&&fetch(`${t}/get-mention-detail/${n}`).then(async l=>{const r=await l.json();y(r)}).catch(l=>console.error(l)).finally(()=>D(!1))},[n]);const d=(l,r)=>{h({show:!0,pdfFile:l,name:r})};return s.jsxs(s.Fragment,{children:[s.jsx(k,{title:"Safety Mention"}),C?null:s.jsx(c,{className:"justify-content-center",children:s.jsx(a,{lg:"12",children:s.jsx(S,{title:"View Mention",children:s.jsxs(c,{children:[s.jsx(a,{lg:"6",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-3 col-form-label text-end",children:"Item"}),s.jsx(a,{sm:"9",className:"d-flex align-items-center",children:e==null?void 0:e.item})]})}),s.jsx(a,{lg:"6",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-3 col-form-label text-end",children:"Recipient"}),s.jsx(a,{sm:"9",className:"d-flex align-items-center",children:(j=e==null?void 0:e.recipients)==null?void 0:j.name})]})}),s.jsx(a,{lg:"6",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-3 col-form-label text-end",children:"Project Manager"}),s.jsx(a,{sm:"9",className:"d-flex align-items-center",children:(f=e==null?void 0:e.projectManager)==null?void 0:f.name})]})}),s.jsx(a,{lg:"6",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-3 col-form-label text-end",children:"Comments"}),s.jsx(a,{sm:"9",className:"d-flex align-items-center",children:e==null?void 0:e.comment})]})}),s.jsx(a,{lg:"6",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-3 col-form-label text-end",children:"Drawing"}),s.jsx(a,{sm:"9",className:"d-flex align-items-center",children:(p=e==null?void 0:e.drawing)==null?void 0:p.name})]})}),s.jsx(a,{lg:"12",children:s.jsxs(c,{className:"mb-2",children:[s.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Main Drawings"}),s.jsx(a,{sm:"10",children:(N=(g=e==null?void 0:e.drawing)==null?void 0:g.mainDrawings)==null?void 0:N.map((l,r)=>s.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[s.jsx(o,{variant:"link",className:"p-0 me-2",onClick:()=>d(`${t}/uploads/${l.stored}`,l.original),children:s.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),s.jsx("div",{className:"small text-muted",children:l.original})]},r))})]})}),s.jsx(a,{lg:"12",children:s.jsxs(c,{className:"mb-2",children:[s.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Child Drawings"}),s.jsx(a,{sm:"10",children:(b=(u=e==null?void 0:e.drawing)==null?void 0:u.childDrawings)==null?void 0:b.map((l,r)=>s.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[s.jsx(o,{variant:"link",className:"p-0 me-2",onClick:()=>d(`${t}/uploads/${l.stored}`,l.original),children:s.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),s.jsx("div",{className:"small text-muted",children:l.original})]},r))})]})}),s.jsx(a,{lg:"12",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Pictures"}),s.jsx(a,{sm:"10",className:"d-flex flex-wrap",children:(w=e==null?void 0:e.pictureObjects)==null?void 0:w.map((l,r)=>s.jsxs("div",{className:"me-3 mb-3 text-center",children:[s.jsx($,{src:`${t}/uploads/${l.filename}`,alt:l.description,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),s.jsx("div",{children:l.description})]},r))})]})}),(e==null?void 0:e.pictures)&&e.pictures.length>0&&!e.pictureObjects&&s.jsx(a,{lg:"12",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Pictures"}),s.jsx(a,{sm:"10",className:"d-flex flex-wrap",children:(P=e==null?void 0:e.pictures)==null?void 0:P.map((l,r)=>s.jsx("div",{className:"position-relative me-2 mb-2",children:s.jsx($,{src:`${t}/uploads/${l}`,alt:`Existing Preview ${r}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}})},`existing-${r}`))})]})}),(e==null?void 0:e.annotatedPdfs)&&e.annotatedPdfs.length>0&&s.jsx(a,{lg:"12",children:s.jsxs(c,{className:"mb-3",children:[s.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Annotated Drawings"}),s.jsx(a,{sm:"10",className:"d-flex flex-wrap",children:(v=e==null?void 0:e.annotatedPdfs)==null?void 0:v.map((l,r)=>s.jsxs("div",{className:"mb-2 d-flex align-items-center",children:[s.jsx(o,{variant:"link",className:"p-0 me-2",onClick:()=>d(`${t}/uploads/${l.filename}`,l.originalName),children:s.jsx("i",{className:"fas fa-file-pdf",style:{fontSize:"2rem",color:"#dc3545"}})}),s.jsx("div",{className:"small text-muted",children:l.originalName})]},r))})]})})]})})})}),x.show&&s.jsx(F,{drawDotsOnPdf:x,setDrawDotsOnPdf:h,readOnly:!0})]})};export{K as default};

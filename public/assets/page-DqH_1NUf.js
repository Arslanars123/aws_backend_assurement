import{r as l,a as v,b as P,j as e,R as r,C as a}from"./index-Bhcfarzr.js";import{C as k}from"./ComponentContainerCard-CdRpaZOK.js";import{B as f}from"./urls-BhGeBsON.js";import{D}from"./index-DNMmWR0I.js";import{F as i}from"./FormLabel-DMds24G0.js";import{A as h,T as p,C as x}from"./TextField-Cu90f4AT.js";import{B as I}from"./Button-COOVOJrI.js";import"./Card-CWpROabE.js";import"./divWithClassName-DTdHczRx.js";import"./useSlot-B59Th0xZ.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-BcofISFZ.js";const E={profession:null,controlPlan:null,comment:null,date:null},O=["understood and is buildable","Approved","is not clearly described","Accepted","Follows the project material"];function U(){const[o,c]=l.useState(E),[j,b]=l.useState(!0),g=v(),{companyId:u,projectId:m,staticDocumentCheckListId:C}=P(),[S,y]=l.useState([]);l.useEffect(()=>{(async()=>{try{const n=await(await fetch(`${f}/get-company-professions?companyId=${u}&projectId=${m}`)).json();y(n)}catch(t){console.error("Error fetching professions:",t)}})()},[]),l.useEffect(()=>{o.profession&&o.controlPlan&&o.comment&&o.date&&b(!1)},[o]);const N=async()=>{try{const s={...o,projectId:m,staticDocumentCheckListId:C};(await fetch(`${f}/submit-static-document-checklist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok&&g(`/dashboard/companies/view/${u}/projects/view/${m}`)}catch(s){console.log("error",s)}};return e.jsx(r,{className:"justify-content-center",children:e.jsx(a,{children:e.jsx(k,{title:"Submit Static Document Check List Submit",children:e.jsxs(r,{children:[e.jsx(a,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Select Profession"}),e.jsx(a,{sm:"10",children:e.jsx(h,{multiple:!1,options:S,getOptionLabel:s=>s.GroupName,value:o.profession??null,onChange:(s,t)=>{var n;((n=t==null?void 0:t.EuroCode)==null?void 0:n.length)>0&&(t==null?void 0:t.Static_report)==="Y"||!t?c({...o,profession:t}):alert("you can't submit this checklist against this profession")},renderInput:s=>e.jsx(p,{...s,variant:"outlined",placeholder:"Search and select profession..."}),renderTags:(s,t)=>s.map((n,d)=>e.jsx(x,{label:n.GroupName,...t({index:d})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]})}),e.jsx(a,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Select Control Plan"}),e.jsx(a,{sm:"10",children:e.jsx(h,{multiple:!1,options:O,value:o.controlPlan??null,onChange:(s,t)=>{c({...o,controlPlan:t})},renderInput:s=>e.jsx(p,{...s,variant:"outlined",placeholder:"Search and select worker..."}),renderTags:(s,t)=>s.map((n,d)=>e.jsx(x,{label:n,...t({index:d})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]})}),e.jsx(a,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Comment"}),e.jsx(a,{sm:"10",children:e.jsx(p,{variant:"outlined",placeholder:"Add some comments...",value:o==null?void 0:o.comment,onChange:s=>{var t;c({...o,comment:(t=s==null?void 0:s.target)==null?void 0:t.value})}})})]})}),e.jsx(a,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(i,{className:"col-sm-2 col-form-label text-end",children:"Select Date"}),e.jsx(a,{sm:"10",children:e.jsx(D,{value:o==null?void 0:o.date,onChange:s=>{const n=s[0].toISOString().split("T")[0];c({...o,date:n})},className:"form-control",options:{dateFormat:"Y-m-d"}})})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(a,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(I,{variant:"primary",className:"me-1",disabled:j,onClick:N,children:"Submit"})})})]})})})})}export{U as default};

import{r as t,b as I,a as $,j as e,R as c,C as n}from"./index-DzDfv5dy.js";import{C as R}from"./ComponentContainerCard-DyVy1wKC.js";import{P as W}from"./PageMetaData-6XTMSS85.js";import{B as l}from"./urls-BhGeBsON.js";import{F as f}from"./FormLabel-CuR2TV5q.js";import{F as h}from"./FormSelect-ComRGaQ7.js";import{B}from"./Button-BlWMkwKA.js";import"./Card-DjAyMdAq.js";import"./divWithClassName-DwZ6sWuB.js";const U=()=>{const[a,d]=t.useState(null),[x,p]=t.useState(!1),[g,S]=t.useState(!0);t.useState(null),t.useState(null),t.useState([]),t.useState([]);const{groupId:i}=I(),b=$();t.useRef(null),t.useRef(null),t.useState([]),t.useEffect(()=>{i&&fetch(`${l}/get-group-detail/${i}`).then(async s=>{const r=await s.json();d({...r})}).catch(s=>console.error(s)).finally(()=>S(!1))},[i]);const u=s=>{const{name:r,value:o,multiple:j,options:C}=s.target;if(j){const F=Array.from(C).filter(m=>m.selected).map(m=>m.value);d({...a,[r]:F})}else d({...a,[r]:o})};t.useEffect(()=>{(async()=>{try{const o=await(await fetch(`${l}/get-projects`)).json();E(o)}catch(r){console.error("Error fetching projects:",r)}})()},[]);const[y,E]=t.useState([]),w=async s=>{s.preventDefault(),p(!0);const r=new FormData;Object.keys(a).forEach(o=>{r.append(o,a[o])});try{const o=await fetch(`${l}/update-group/${i}`,{method:"POST",body:r});if(o.ok){const j=await o.json();b("/dashboard/groups",{state:{success:"Group updated successfully!"}})}else console.error("Error:",o.statusText)}catch(o){console.error("Fetch error:",o)}p(!1)};t.useEffect(()=>{(async()=>{try{const o=await(await fetch(`${l}/get-professions`)).json();v(o)}catch(r){console.error("Error fetching projects:",r)}})()},[]);const[P,v]=t.useState([]);t.useEffect(()=>{(async()=>{try{const o=await(await fetch(`${l}/get-workers`)).json();k(o)}catch(r){console.error("Error fetching workers:",r)}})()},[]);const[N,k]=t.useState([]);return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Edit Group"}),g?null:e.jsx("form",{onSubmit:w,children:e.jsx(c,{className:"justify-content-center",children:e.jsx(n,{children:e.jsx(R,{title:"Edit Group",children:e.jsxs(c,{children:[e.jsx(n,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(f,{className:"col-sm-2 col-form-label text-end",children:"Select Profession"}),e.jsx(n,{sm:"10",children:e.jsxs(h,{value:a.professionId,name:"professionId",onChange:u,children:[e.jsx("option",{defaultValue:"",children:"Select Profession"}),P.map(s=>e.jsxs("option",{value:s._id,children:[s.name," "]},s.id))]})})]})}),e.jsx(n,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(f,{className:"col-sm-2 col-form-label text-end",children:"Select Worker"}),e.jsx(n,{sm:"10",children:e.jsxs(h,{value:a==null?void 0:a.worker,name:"worker",onChange:u,children:[e.jsx("option",{defaultValue:"",children:"Select Worker"}),N.map(s=>e.jsx("option",{value:s._id,children:s.name},s.id))]})})]})}),e.jsx(n,{lg:"6",children:e.jsxs(c,{className:"mb-3",children:[e.jsx(f,{className:"col-sm-2 col-form-label text-end",children:"Select Projects"}),e.jsx(n,{sm:"10",children:e.jsxs(h,{value:a.projectsId,name:"projectsId",onChange:u,multiple:!0,children:[e.jsx("option",{defaultValue:"",children:"Select Projects"}),y.map(s=>e.jsxs("option",{value:s._id,children:[s.name," "]},s.id))]})})]})}),e.jsx(c,{className:"mb-3 d-flex justify-content-center",children:e.jsx(n,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(B,{disabled:x,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{U as default};

import{r as a,b as R,j as c}from"./index-CEbbE1Sf.js";import{P as C}from"./PageMetaData-qE4R9bbS.js";import{A as E}from"./AllDataTables-CCjyxPeQ.js";import{B as n}from"./urls-CvG9cD6N.js";import"./ComponentContainerCard-BpYspYtC.js";import"./Card-mt6mV6AB.js";import"./divWithClassName-CT9nWrpT.js";import"./Button-CWQV4UHt.js";import"./index-CQzRielJ.js";import"./IconifyIcon-D36SGIkR.js";import"./index-DvVNbEmp.js";import"./Table-COGAYasz.js";import"./Modal-C5567GrF.js";import"./useWindow-Bj2vCJZa.js";import"./useEventCallback-C6szz9nn.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-PrPCoCM2.js";import"./Form-Bl01aL9q.js";import"./FormCheck-BT2cigWF.js";import"./FormControl-DFJ9Ydzw.js";import"./FormContext-CSwRqVJr.js";import"./FormGroup-Dn5oDdrP.js";import"./FormLabel-WQTNbj7P.js";import"./FormRange-MzNiwPri.js";import"./FormSelect-Dmi-PE_I.js";const et=()=>{const[m,S]=a.useState([]),[k,d]=a.useState(!1),[b,y]=a.useState([]),[I,g]=a.useState({}),{companyId:l,projectId:i}=R(),f=async()=>{d(!0);try{const s=`${n}/get-checklist`,t=await(await fetch(s)).json();S(t==null?void 0:t.data),await u()}catch(s){console.error(s)}finally{d(!1)}},u=async()=>{var s;if(!(!l||!i))try{const t=await(await fetch(`${n}/get-checklist`)).json();if(t!=null&&t.data&&t.data.length>0){const e=await(await fetch(`${n}/get-project-detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:i})})).json();if(e!=null&&e.professionAssociatedData){const A=Object.keys(e.professionAssociatedData)[0],o=e.professionAssociatedData[A],h=(o==null?void 0:o.SubjectMatterId)||((s=o==null?void 0:o.profession)==null?void 0:s.SubjectMatterId);if(h){const x=t.data.map(r=>r._id),$=`${n}/check-static-document-checklist-status?projectId=${i}&professionId=${h}&checklistIds=${JSON.stringify(x)}`,j=await fetch($);if(j.ok){const r=await j.json();y(r.submittedChecklistIds||[]),g(r.approvalStatus||{})}}}}}catch(p){console.error("Error checking submission status:",p)}};a.useEffect(()=>{f(),u()},[l,i]);const w={showSubmitAction:!0,submittedChecklistIds:b,approvalStatus:I};return c.jsxs(c.Fragment,{children:[c.jsx(C,{title:"Data Tables"}),m&&!k&&c.jsx(E,{refreshData:f,checkList:m,options:w})]})};export{et as default};

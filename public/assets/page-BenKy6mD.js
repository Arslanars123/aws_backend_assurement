import{r as s,j as t,R as O,C as P,a as R}from"./index-DpbIAROa.js";import"./ComponentContainerCard-kAFFVE0Z.js";import{B}from"./urls-CXtk4x-h.js";import{F as c,f as x,a as L}from"./utils-D-_6D1Ns.js";import{B as y}from"./Button-DGaw8vsr.js";import{A as N,T as U,C as $}from"./TextField-FXRTZwW7.js";import"./Card-DYgbdisJ.js";import"./divWithClassName-DPLQ3Lm2.js";import"./FormControl-CRveXHIl.js";import"./FormLabel-BVfCwwhh.js";import"./ElementChildren-9SPyiMZx.js";import"./FormGroup-BOD1dp7p.js";import"./FormRange-BeCgdMae.js";import"./FormSelect-CT6NOnnm.js";import"./useSlot-DUXHA9fQ.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-BcofISFZ.js";const G=({initialValues:f={},onSave:d,onCancel:u,options:m={},otherOptions:j={}})=>{const{fieldTypes:C={},placeholders:h={},dateFields:r=[]}=j,[l,p]=s.useState(f),[b,A]=s.useState({}),S=e=>{const{name:a,value:n}=e.target;p(i=>({...i,[a]:n}))},D=e=>{const{name:a,files:n}=e.target;(n==null?void 0:n.length)>0&&A(i=>({...i,[a]:n.length===1?n[0]:Array.from(n)}))},E=(e,a)=>{p(n=>({...n,[e]:a}))},T=e=>{e.preventDefault();const a={...l,...b};d(a)},w=e=>{const a=l[e]??"",n=r.includes(e)||L(a),i=C[e]||"text";return i==="file"?t.jsx(c.Control,{type:"file",name:e,onChange:D,accept:"image/*"}):m[e]?t.jsx(N,{multiple:!0,options:m[e],getOptionLabel:o=>o.name||o.label||"",value:Array.isArray(a)?a:[],onChange:(o,g)=>E(e,g),renderInput:o=>t.jsx(U,{...o,variant:"outlined",placeholder:`Select ${x(e)}`}),renderTags:(o,g)=>o.map((F,v)=>s.createElement($,{label:F.name||F.label,...g({index:v}),key:v}))}):n?t.jsx(c.Control,{type:"date",name:e,value:a?a.split("T")[0]:"",onChange:S,placeholder:h[e]}):t.jsx(c.Control,{type:i,name:e,value:a,onChange:S,placeholder:h[e]||`Enter ${x(e)}`})};return t.jsxs(c,{onSubmit:T,children:[t.jsx(O,{children:Object.keys(f).map(e=>t.jsx(P,{md:"6",className:"mb-3",children:t.jsxs(c.Group,{children:[t.jsx(c.Label,{children:x(e)}),w(e)]})},e))}),t.jsxs("div",{className:"d-flex justify-content-end mt-4",children:[t.jsx(y,{variant:"secondary",onClick:u,className:"me-2",children:"Cancel"}),t.jsx(y,{type:"submit",variant:"primary",children:"Submit"})]})]})},I={name:"",casenr:"",address:"",phone:"",contactPerson:""},ne=()=>{s.useState(I);const[f,d]=s.useState(!1),u=R(),[m,j]=s.useState(null);s.useState(null),s.useRef(null);const C=async h=>{d(!0);try{const r=new FormData;Object.entries(h).forEach(([p,b])=>{r.append(p,b)}),m&&r.append("picture",m);const l=await fetch(`${B}/store-company`,{method:"POST",body:r});if(l.ok){const p=await l.json();u("/dashboard/generalFlowCompanies",{state:{success:"Company added successfully!"}})}else console.error("Error:",l.statusText)}catch(r){console.error("Fetch error:",r)}d(!1)};return t.jsx(t.Fragment,{children:t.jsx(G,{initialValues:{name:"",address:"",email:"",phone:"",city:"",cvr:"",postalCode:"",companyPhone:"",picture:""},onSave:C,onCancel:()=>u("/dashboard/generalFlowCompanies"),otherOptions:{fieldTypes:{phone:"number",companyPhone:"number",picture:"file"},placeholders:{name:"Company name...",email:"Email address..."}}})})};export{ne as default};

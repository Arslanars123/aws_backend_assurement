import{c as g,a as x,r as l,b as w,ab as C,j as t,R as c,C as d}from"./index-CEbbE1Sf.js";import{C as E}from"./ComponentContainerCard-BpYspYtC.js";import{B as p}from"./urls-CvG9cD6N.js";import{D as I}from"./DetailPage-BmmTo0qa.js";import{B as N}from"./Button-CWQV4UHt.js";import"./Card-mt6mV6AB.js";import"./divWithClassName-CT9nWrpT.js";import"./FormLabel-WQTNbj7P.js";import"./FormContext-CSwRqVJr.js";import"./Modal-C5567GrF.js";import"./useWindow-Bj2vCJZa.js";import"./useEventCallback-C6szz9nn.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-PrPCoCM2.js";import"./Image-ULHo9GWi.js";const O=()=>{const{setLoading:s}=g(),m=x(),[h,f]=l.useState([]),{companyId:n,projectId:i,specialControleId:r}=w(),[u]=C();u.get("report");const j=async()=>{try{s(!0);const a=await(await fetch(`${p}/get-special-control?companyId=${n}&projectId=${i}&specialControleId=${r}`)).json(),e=a==null?void 0:a[0];e==null||delete e._id,e==null||delete e.projectsId,e==null||delete e.companyId,f(a)}catch(o){console.error("Error fetching workers:",o)}finally{s(!1)}},y=async()=>{if(window.confirm("Are you sure you want to delete this special control point? This action cannot be undone."))try{s(!0),(await fetch(`${p}/delete-special-control`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({specialControleId:r,companyId:n,projectId:i})})).ok?(alert("Special control point deleted successfully!"),m(`/dashboard/companies/view/${n}/projects/view/${i}/specialControle`)):alert("Failed to delete special control point. Please try again.")}catch(o){console.error("Error deleting special control point:",o),alert("An error occurred while deleting the special control point.")}finally{s(!1)}};return l.useEffect(()=>{r&&j()},[r]),t.jsx(c,{className:"justify-content-center",children:t.jsx(d,{lg:"12",children:t.jsx(E,{title:"Special Control Point",children:t.jsxs(c,{children:[t.jsx(d,{lg:"12",className:"mb-3",children:t.jsx("div",{className:"d-flex justify-content-end",children:t.jsxs(N,{variant:"danger",onClick:y,className:"me-2",children:[t.jsx("i",{className:"fas fa-trash me-1"}),"Delete"]})})}),t.jsx(I,{data:h})]})})})})};export{O as default};

import{r as o,a as P,G as w,j as e,R as s,C as t}from"./index-Bhcfarzr.js";import{C as R}from"./ComponentContainerCard-CdRpaZOK.js";import{P as V}from"./PageMetaData-D1yst4PP.js";import{B as A}from"./urls-BhGeBsON.js";import{F as n}from"./FormLabel-DMds24G0.js";import{F as r}from"./FormControl-7WYzlHOA.js";import{I as D}from"./Image-C3Ku7nKI.js";import{B as b}from"./Button-COOVOJrI.js";import"./Card-CWpROabE.js";import"./divWithClassName-DTdHczRx.js";const E={username:"",password:"",role:"Superadmin",phone:"",case:"",startDate:"",name:"",address:"",postalCode:"",city:""},M=()=>{const[a,g]=o.useState(E),[N,u]=o.useState(!1),y=P(),[p,h]=o.useState(null),[j,f]=o.useState(null),d=o.useRef(null),{selectedProjects:C}=o.useContext(w),m=c=>{const{name:l,value:i}=c.target;g({...a,[l]:i})},v=c=>{const l=c.target.files[0];if(h(l),l){const i=URL.createObjectURL(l);f(i)}},F=async c=>{c.preventDefault(),u(!0);try{const l=new FormData;Object.keys(a).forEach(x=>{l.append(x,a[x])}),p&&l.append("picture",p);const i=await fetch(`${A}/store-user`,{method:"POST",body:l});if(i.ok){const x=await i.json();y("/dashboard/superadmins",{state:{success:"Super Admin added successfully!"}})}else console.error("Error:",i.statusText)}catch(l){console.error("Fetch error:",l)}u(!1)},S=()=>{h(null),f(null),d.current&&(d.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Add Super Admin"}),e.jsx("form",{onSubmit:F,children:e.jsx(s,{className:"justify-content-center",children:e.jsx(t,{children:e.jsx(R,{title:"Add Super Admin",children:e.jsxs(s,{children:[e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Email"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.username,onChange:m,name:"username",type:"email",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.name,onChange:m,name:"name",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Phone"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.phone,onChange:m,name:"phone",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Password"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.password,onChange:m,name:"password",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.address,onChange:m,name:"address",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.city,onChange:m,name:"city",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.postalCode,onChange:m,name:"postalCode",type:"text",defaultValue:"",id:"example-text-input"})})]})}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(t,{sm:"10",children:e.jsx(r,{value:a.startDate,onChange:m,name:"startDate",type:"date",defaultValue:"",id:"example-text-input"})})]})}),e.jsx("input",{type:"hidden",value:C,name:"selectedP"}),e.jsx(t,{lg:"6",children:e.jsxs(s,{className:"mb-3",children:[e.jsx(n,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Picture"}),e.jsxs(t,{sm:"10",children:[e.jsx(r,{type:"file",id:"file-input",name:"picture",onChange:v,accept:"image/*",ref:d}),j&&e.jsxs("div",{className:"mt-3 position-relative",children:[e.jsx(D,{src:j,alt:"Preview",fluid:!0,rounded:!0,style:{maxWidth:"200px",maxHeight:"200px"}}),e.jsx(b,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:S,style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]})]})]})}),e.jsx(s,{className:"mb-3 d-flex justify-content-center",children:e.jsx(t,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(b,{disabled:N,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{M as default};

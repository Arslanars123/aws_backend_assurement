import{r as c,a as S,j as e,R as l,C as n}from"./index-BaEXYFjf.js";import{C as R}from"./ComponentContainerCard-r7D-7GT6.js";import{P as B}from"./PageMetaData-PSLyQQbJ.js";import{B as E}from"./urls-D3INM0xz.js";import{F as x}from"./FormLabel-BbxHmEpm.js";import{F as f}from"./FormControl-ZQh5JFHF.js";import{I}from"./Image-CFc3DKY_.js";import{B as v}from"./Button-CHKoWH3g.js";import"./Card-Dy9P-MVM.js";import"./divWithClassName-C80pLmVh.js";import"./FormContext-kuoxlIs5.js";const D={name:"",description:"",projectId:null},V=()=>{const[i,w]=c.useState(D),[y,h]=c.useState(!1),F=S(),[m,j]=c.useState([]),[d,g]=c.useState([]),u=c.useRef(null),b=s=>{const{name:t,value:a}=s.target;w({...i,[t]:a})},N=s=>{const t=Array.from(s.target.files),a=[...m,...t],r=[...d,...t.map(o=>URL.createObjectURL(o))];j(a),g(r)},P=s=>{const t=m.filter((o,p)=>p!==s),a=d.filter((o,p)=>p!==s);j(t),g(a);const r=new DataTransfer;t.forEach(o=>r.items.add(o)),u.current&&(u.current.files=r.files)},C=async s=>{s.preventDefault(),h(!0);try{const t=new FormData;Object.keys(i).forEach(r=>{t.append(r,i[r])}),m.length>0&&m.forEach(r=>{t.append("pictures",r)});const a=await fetch(`${E}/store-part`,{method:"POST",body:t});if(a.ok){const r=await a.json();F("/dashboard/parts",{state:{success:"Building part added successfully!"}})}else console.error("Error:",a.statusText)}catch(t){console.error("Fetch error:",t)}h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Add Building Part"}),e.jsx("form",{onSubmit:C,children:e.jsx(l,{className:"justify-content-center",children:e.jsx(n,{children:e.jsx(R,{title:"Add Building Part",children:e.jsxs(l,{children:[e.jsx(n,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(x,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(n,{sm:"10",children:e.jsx(f,{value:i.name,onChange:b,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(n,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(x,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Description"}),e.jsx(n,{sm:"10",children:e.jsx(f,{value:i.description,onChange:b,name:"description",type:"text",id:"example-text-input"})})]})}),e.jsx(n,{lg:"6",children:e.jsxs(l,{className:"mb-3",children:[e.jsx(x,{htmlFor:"multiple-file-input",className:"col-sm-2 col-form-label text-end",children:"Pictures"}),e.jsxs(n,{sm:"10",children:[e.jsx(f,{type:"file",id:"multiple-file-input",name:"pictures",onChange:N,accept:"image/*",multiple:!0,ref:u}),e.jsx("div",{className:"mt-3 d-flex flex-wrap",children:d.map((s,t)=>e.jsxs("div",{className:"position-relative me-2 mb-2",children:[e.jsx(I,{src:s,alt:`Preview ${t}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx(v,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:()=>P(t),style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"Ã—"})]},t))})]})]})}),e.jsx(l,{className:"mb-3 d-flex justify-content-center",children:e.jsx(n,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(v,{disabled:y,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{V as default};

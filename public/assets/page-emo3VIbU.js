import{c as j,a as w,r as l,b as g,j as r,R as p,C as y}from"./index-BMHGnWcK.js";import{C as x}from"./ComponentContainerCard-DqzcDgtW.js";import{B as i}from"./urls-CvG9cD6N.js";import{D as C}from"./DetailPage-BErF5Tp_.js";import"./Card-BQIi55Il.js";import"./divWithClassName-BnTSImTn.js";import"./Button-Dwvyfso6.js";import"./FormLabel-BBJljh0R.js";import"./FormContext-_pJuLZf_.js";import"./Modal-BvTxh5Lm.js";import"./useWindow-X1vIdSxZ.js";import"./useEventCallback-aoYRPbpt.js";import"./DataKey-COGXBUcQ.js";import"./NoopTransition-Cvueq9hZ.js";import"./Image-BWlBzfxc.js";const U=()=>{const{setLoading:c}=j(),a=w(),[d,m]=l.useState(null),{companyId:n,projectId:t,workerId:s}=g(),u=()=>{a(`/dashboard/companies/view/${n}/workers/edit/${s}`)},h=async()=>{try{if(t){const e=await fetch(`${i}/remove-user-from-project`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,projectId:t})});if(e.ok){const o=await e.json();a(`/dashboard/companies/view/${n}/projects/view/${t}`),console.log("Success:",o)}else console.error("Error:",e.statusText)}else{const e=await fetch(`${i}/delete-user/${s}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const o=await e.json();a(`/dashboard/companies/view/${n}`),console.log("Success:",o)}else console.error("Error:",e.statusText)}}catch(e){console.error("Error:",e)}};return l.useEffect(()=>{s&&(c(!0),fetch(`${i}/get-user-detail/${s}`).then(async e=>{const o=await e.json(),f={name:o.name||"",username:o.username||"",picture:o.picture||"",phone:o.phone||"",password:o.password||"",address:o.address||"",isProjectManager:o.isProjectManager||"",postalCode:o.postalCode||"",city:o.city||""};m(f)}).catch(e=>console.error(e)).finally(()=>c(!1)))},[s]),r.jsx(p,{className:"justify-content-center",children:r.jsx(y,{lg:"12",children:r.jsx(x,{title:"Worker Details",children:r.jsx(p,{children:r.jsx(C,{data:d,handleEdit:t?null:u,handleDelete:h,options:{isProjectManager:[{name:"Yes",value:"yes"},{name:"No",value:"no"}]}})})})})})};export{U as default};

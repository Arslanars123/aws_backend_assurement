import{b,a as j,r as i,j as s,R as N,C as p,m as l,aq as P}from"./index-CEbbE1Sf.js";import{P as y}from"./PageMetaData-qE4R9bbS.js";import{u as C,o as R,c as S,a as c,b as F}from"./index.esm-DCL929i9.js";import{a as v}from"./index-Dq7h7Pqt.js";import{T as d}from"./TextFormInput-bH67EBYG.js";import{I as k}from"./IconifyIcon-D36SGIkR.js";import{B as E}from"./urls-CvG9cD6N.js";import{l as $}from"./jpo-Ci11ADWT.js";import{C as q}from"./Card-mt6mV6AB.js";import"./FormControl-DFJ9Ydzw.js";import"./FormContext-CSwRqVJr.js";import"./FormGroup-Dn5oDdrP.js";import"./FormLabel-WQTNbj7P.js";import"./divWithClassName-CT9nWrpT.js";const I=S().shape({password:c().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:c().oneOf([F("password")],"Passwords must match").required("Please confirm your password")}),T=()=>{const{token:u}=b(),w=j(),[e,o]=i.useState(!1),[a,r]=i.useState({success:null,message:""}),{control:t,handleSubmit:h,reset:B}=C({resolver:R(I),defaultValues:{password:"",confirmPassword:""}}),x=async g=>{var m,n;o(!0),r({success:null,message:""});try{await v.post(`${E}/users/reset-password`,{token:u,password:g.password}),r({success:!0,message:"Password reset successful. You can now log in."}),setTimeout(()=>{w("/auth/login")},3e3)}catch(f){r({success:!1,message:((n=(m=f.response)==null?void 0:m.data)==null?void 0:n.error)||"Failed to reset password. Please try again."})}finally{o(!1)}};return s.jsxs("form",{onSubmit:h(x),className:"p-3",children:[a.message&&s.jsx("div",{className:`alert ${a.success?"alert-success":"alert-danger"} mb-3`,children:a.message}),s.jsx(d,{control:t,name:"password",label:"New Password",type:"password",placeholder:"Enter new password",containerClassName:"form-group mb-2",disabled:e}),s.jsx(d,{control:t,name:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Confirm new password",containerClassName:"form-group mb-2",disabled:e}),s.jsx(N,{className:"form-group mb-0",children:s.jsx(p,{xs:12,children:s.jsx("div",{className:"d-grid mt-3",children:s.jsx("button",{className:"btn btn-primary flex-centered",type:"submit",disabled:e,children:e?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Resetting..."]}):s.jsxs(s.Fragment,{children:["Reset Password ",s.jsx(k,{icon:"fa6-solid:right-to-bracket",className:"ms-1"})]})})})})})]})},K=()=>s.jsxs(s.Fragment,{children:[s.jsx(y,{title:"Reset Password"}),s.jsx(p,{lg:4,className:"mx-auto",children:s.jsxs(q,{children:[s.jsx(l,{className:"p-0 bg-black auth-header-box rounded-top",children:s.jsxs("div",{className:"text-center p-3",children:[s.jsx(P,{to:"/",className:"logo logo-admin",children:s.jsx("img",{src:$,height:50,alt:"logo",className:"auth-logo"})}),s.jsx("h4",{className:"mt-3 mb-1 fw-semibold text-white fs-18",children:"Enter New Password"})]})}),s.jsx(l,{className:"pt-0",children:s.jsx(T,{})})]})})]});export{K as default};

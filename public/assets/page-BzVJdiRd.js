import{r as b,j as e,F as de,i as pe,l as ue,P as _,R as r,C as s,b as J,a as xe}from"./index-DpbIAROa.js";import{C as K}from"./ComponentContainerCard-kAFFVE0Z.js";import{P as q}from"./PageMetaData-C6UhIQjj.js";import{F as N}from"./FormLabel-BVfCwwhh.js";import{F as T}from"./FormControl-CRveXHIl.js";import{B as M}from"./Button-DGaw8vsr.js";import{B as O}from"./urls-CXtk4x-h.js";import{A as U,T as F,C as R}from"./TextField-FXRTZwW7.js";import{F as V}from"./FormSelect-CT6NOnnm.js";import{I as he}from"./Image-B69svh6Q.js";import{u as fe}from"./Anchor-i_QidBAa.js";import{u as Ee,$ as Se}from"./SSRProvider-DnuEo9Fp.js";import{T as W,N as De,a as Pe,b as we}from"./Nav-DVCGXLw8.js";import{m as ce,S as G}from"./NavbarContext-uQWdQW0y.js";import{N as me}from"./NoopTransition-YmUpd_Fy.js";import{m as oe,f as Te}from"./ElementChildren-9SPyiMZx.js";import"./Card-DYgbdisJ.js";import"./divWithClassName-DPLQ3Lm2.js";import"./useSlot-DUXHA9fQ.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-BcofISFZ.js";import"./DataKey-COGXBUcQ.js";const Oe=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ie=["activeKey","getControlledId","getControllerId"],Ae=["as"];function z(t,l){if(t==null)return{};var h={},i=Object.keys(t),m,o;for(o=0;o<i.length;o++)m=i[o],!(l.indexOf(m)>=0)&&(h[m]=t[m]);return h}function je(t){let{active:l,eventKey:h,mountOnEnter:i,transition:m,unmountOnExit:o,role:f="tabpanel",onEnter:j,onEntering:E,onEntered:S,onExit:C,onExiting:c,onExited:u}=t,v=z(t,Oe);const D=b.useContext(W);if(!D)return[Object.assign({},v,{role:f}),{eventKey:h,isActive:l,mountOnEnter:i,transition:m,unmountOnExit:o,onEnter:j,onEntering:E,onEntered:S,onExit:C,onExiting:c,onExited:u}];const{activeKey:x,getControlledId:y,getControllerId:g}=D,d=z(D,Ie),P=ce(h);return[Object.assign({},v,{role:f,id:y(h),"aria-labelledby":g(h)}),{eventKey:h,isActive:l==null&&P!=null?ce(x)===P:l,transition:m||d.transition,mountOnEnter:i??d.mountOnEnter,unmountOnExit:o??d.unmountOnExit,onEnter:j,onEntering:E,onEntered:S,onExit:C,onExiting:c,onExited:u}]}const ge=b.forwardRef((t,l)=>{let{as:h="div"}=t,i=z(t,Ae);const[m,{isActive:o,onEnter:f,onEntering:j,onEntered:E,onExit:S,onExiting:C,onExited:c,mountOnEnter:u,unmountOnExit:v,transition:D=me}]=je(i);return e.jsx(W.Provider,{value:null,children:e.jsx(G.Provider,{value:null,children:e.jsx(D,{in:o,onEnter:f,onEntering:j,onEntered:E,onExit:S,onExiting:C,onExited:c,mountOnEnter:u,unmountOnExit:v,children:e.jsx(h,Object.assign({},m,{ref:l,hidden:!o,"aria-hidden":!o}))})})})});ge.displayName="TabPanel";const H=t=>{const{id:l,generateChildId:h,onSelect:i,activeKey:m,defaultActiveKey:o,transition:f,mountOnEnter:j,unmountOnExit:E,children:S}=t,[C,c]=Ee(m,o,i),u=Se(l),v=b.useMemo(()=>h||((x,y)=>u?`${u}-${y}-${x}`:null),[u,h]),D=b.useMemo(()=>({onSelect:c,activeKey:C,transition:f,mountOnEnter:j||!1,unmountOnExit:E||!1,getControlledId:x=>v(x,"tabpane"),getControllerId:x=>v(x,"tab")}),[c,C,f,j,E,v]);return e.jsx(W.Provider,{value:D,children:e.jsx(G.Provider,{value:c||null,children:S})})};H.Panel=ge;function Q(t){return typeof t=="boolean"?t?de:me:t}const be=({transition:t,...l})=>e.jsx(H,{...l,transition:Q(t)});be.displayName="TabContainer";const X=b.forwardRef(({className:t,bsPrefix:l,as:h="div",...i},m)=>(l=pe(l,"tab-content"),e.jsx(h,{ref:m,className:ue(t,l),...i})));X.displayName="TabContent";const Y=b.forwardRef(({bsPrefix:t,transition:l,...h},i)=>{const[{className:m,as:o="div",...f},{isActive:j,onEnter:E,onEntering:S,onEntered:C,onExit:c,onExiting:u,onExited:v,mountOnEnter:D,unmountOnExit:x,transition:y=de}]=je({...h,transition:Q(l)}),g=pe(t,"tab-pane");return e.jsx(W.Provider,{value:null,children:e.jsx(G.Provider,{value:null,children:e.jsx(y,{in:j,onEnter:E,onEntering:S,onEntered:C,onExit:c,onExiting:u,onExited:v,mountOnEnter:D,unmountOnExit:x,children:e.jsx(o,{...f,ref:i,className:ue(m,g,j&&"active")})})})})});Y.displayName="TabPane";const ke={eventKey:_.oneOfType([_.string,_.number]),title:_.node.isRequired,disabled:_.bool,tabClassName:_.string,tabAttrs:_.object},ye=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};ye.propTypes=ke;const Ue=Object.assign(ye,{Container:be,Content:X,Pane:Y});function Fe(t){let l;return Te(t,h=>{l==null&&(l=h.props.eventKey)}),l}function $e(t){const{title:l,eventKey:h,disabled:i,tabClassName:m,tabAttrs:o,id:f}=t.props;return l==null?null:e.jsx(Pe,{as:"li",role:"presentation",children:e.jsx(we,{as:"button",type:"button",eventKey:h,disabled:i,id:f,className:m,...o,children:l})})}const Ce=t=>{const{id:l,onSelect:h,transition:i,mountOnEnter:m=!1,unmountOnExit:o=!1,variant:f="tabs",children:j,activeKey:E=Fe(j),...S}=fe(t,{activeKey:"onSelect"});return e.jsxs(H,{id:l,activeKey:E,onSelect:h,transition:Q(i),mountOnEnter:m,unmountOnExit:o,children:[e.jsx(De,{id:l,...S,role:"tablist",as:"ul",variant:f,children:oe(j,$e)}),e.jsx(X,{children:oe(j,C=>{const c={...C.props};return delete c.title,delete c.disabled,delete c.tabClassName,delete c.tabAttrs,e.jsx(Y,{...c})})})]})};Ce.displayName="Tabs";const Re=({form:t,setForm:l,setActiveTab:h})=>{var m,o,f,j,E,S,C,c,u;const i=v=>{const{name:D,value:x}=v.target;l({...t,basicDetails:{...t.basicDetails,[D]:x}})};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Project"}),e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(K,{title:"Add Project",children:e.jsxs(r,{children:[e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(m=t==null?void 0:t.basicDetails)==null?void 0:m.name,onChange:i,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Address"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(o=t==null?void 0:t.basicDetails)==null?void 0:o.address,onChange:i,name:"address",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Post Code"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(f=t==null?void 0:t.basicDetails)==null?void 0:f.postCode,onChange:i,name:"postCode",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"City"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(j=t==null?void 0:t.basicDetails)==null?void 0:j.city,onChange:i,name:"city",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(E=t==null?void 0:t.basicDetails)==null?void 0:E.startDate,onChange:i,name:"startDate",type:"date",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Project Deadline"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(S=t==null?void 0:t.basicDetails)==null?void 0:S.projectDeadLine,onChange:i,name:"projectDeadLine",type:"date",id:"project-deadline-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Govt Doc Deadline"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(C=t==null?void 0:t.basicDetails)==null?void 0:C.govtDocDeadLine,onChange:i,name:"govtDocDeadLine",type:"date",id:"govt-doc-deadline-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Functional Test Deadline"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(c=t==null?void 0:t.basicDetails)==null?void 0:c.functionalTestDeadLine,onChange:i,name:"functionalTestDeadLine",type:"date",id:"functional-test-deadline-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Case No."}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(u=t==null?void 0:t.basicDetails)==null?void 0:u.case_no,onChange:i,name:"case_no",type:"text",id:"case-no-input"})})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(M,{type:"submit",variant:"primary",className:"me-1",onClick:()=>h("add-profession"),children:"Next"})})})]})})})})]})},Le=({form:t,setForm:l,setActiveTab:h})=>{var v,D;const[i,m]=b.useState([]),[o,f]=b.useState([]),[j,E]=b.useState([]),[S,C]=b.useState(null),{companyId:c}=J(),u=async()=>{try{const y=await(await fetch(`${O}/get-company-professions?companyId=${c}`)).json();m(y)}catch(x){console.error("Error fetching professions:",x)}};return b.useEffect(()=>{c&&u()},[]),e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Professions"}),e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(K,{title:"Add Professions",children:e.jsxs(r,{children:[e.jsx(s,{lg:"12",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Professions"}),e.jsxs(s,{sm:"10",children:[e.jsx(U,{multiple:!0,options:i,getOptionLabel:x=>x.GroupName,value:o,onChange:(x,y)=>{var d;console.log("newValue",y);const g=y==null?void 0:y[y.length-1];((d=g==null?void 0:g.EuroCode)==null?void 0:d.length)>1?(E(g==null?void 0:g.EuroCode),C(null),alert("This Profession have multi Euro Code select 1st euro code whihc 1 you want to add")):f(y)},renderInput:x=>e.jsx(F,{...x,variant:"outlined",placeholder:"Search and select professions..."}),renderTags:(x,y)=>x.map((g,d)=>e.jsx(R,{label:g.GroupName,...y({index:d})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#495057",marginTop:"6px"},children:["Selected: ",e.jsx("strong",{children:(v=t==null?void 0:t.professions)==null?void 0:v.length})," ",((D=t==null?void 0:t.professions)==null?void 0:D.length)===1?"profession":"professions"]})]})]})}),(j==null?void 0:j.length)>0&&e.jsx(s,{lg:"12",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Please select one Euro Codes"}),e.jsx(s,{sm:"10",children:e.jsx(U,{options:j,value:S,onChange:(x,y)=>{const g=i.find(d=>{var P;return(P=d.EuroCode)==null?void 0:P.includes(y)});g&&f(d=>[...d,{...g,EuroCode:[y]}]),C(null),E([])},renderInput:x=>e.jsx(F,{...x,variant:"outlined",placeholder:"Select one Euro Code..."}),renderOption:(x,y)=>e.jsx("li",{...x,children:y}),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(M,{onClick:()=>{l({...t,professions:o}),h("add-users")},type:"submit",variant:"primary",className:"me-1",children:"Next"})})})]})})})})]})};function Me({form:t,setForm:l,setActiveTab:h}){var ee,te,ne,se,ae,le,ie,re;const[i,m]=b.useState([]),[o,f]=b.useState([]),[j,E]=b.useState([]),[S,C]=b.useState([]),[c,u]=b.useState([]),[v,D]=b.useState([]),[x,y]=b.useState([]),[g,d]=b.useState([]),{companyId:P}=J(),$=async()=>{try{const n=t==null?void 0:t.professions.map(B=>B._id);if(!(n!=null&&n.length)){m([]);return}const a={companyId:P,professionsIds:n,roles:["Worker"]},w=await(await fetch(`${O}/get-filter-users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();m(w)}catch(n){console.error("Error fetching workers:",n)}},A=async()=>{try{const n=t==null?void 0:t.professions.map(B=>B._id);if(!(n!=null&&n.length)){f([]);return}const a={companyId:P,professionsIds:n,roles:["Sub Contractor"]},w=await(await fetch(`${O}/get-filter-users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();f(w)}catch(n){console.log("Error fetching sub contractors:",n)}},k=async()=>{try{const a=await(await fetch(`${O}/get-mains?companyId=${P}`)).json();E(a)}catch(n){console.log("Error fetching sub contractors:",n)}},L=async()=>{try{const a=await(await fetch(`${O}/get-safety?companyId=${P}`)).json();C(a)}catch{console.log("error")}},I=async()=>{try{const a=await(await fetch(`${O}/get-advisors?companyId=${P}`)).json();u(a)}catch(n){console.log("error",n)}},Z=async()=>{try{const a=await(await fetch(`${O}/get-cons?companyId=${P}`)).json();D(a)}catch(n){console.log("error",n)}},ve=async()=>{try{const a=await(await fetch(`${O}/get-inspectors?companyId=${P}`)).json();y(a)}catch(n){console.log("error",n)}},Ne=async()=>{try{const a=await(await fetch(`${O}/get-independent-controller?companyId=${P}`)).json();d(a)}catch(n){console.log("error",n)}};return b.useEffect(()=>{$(),A(),I()},[t==null?void 0:t.professions]),b.useEffect(()=>{k(),L(),Z(),ve(),Ne()},[]),e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Users in this Project"}),e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsxs(K,{title:"Add Users in this Project",children:[e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Worker for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:i,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(ee=t==null?void 0:t.addUsers)==null?void 0:ee.worker,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,worker:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select worker..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Sub Contractor for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:o,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(te=t==null?void 0:t.addUsers)==null?void 0:te.subContractor,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,subContractor:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Sub Contractor..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Main Constructor for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:j,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(ne=t==null?void 0:t.addUsers)==null?void 0:ne.mainConstructor,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,mainConstructor:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Main Constructor..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Safety Coordinator for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:S,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(se=t==null?void 0:t.addUsers)==null?void 0:se.safetyCoordinator,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,safetyCoordinator:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Safety Coordinator..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Advisor for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:c,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(ae=t==null?void 0:t.addUsers)==null?void 0:ae.advisorx,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,advisor:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Advisor..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Construction Manager for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:v,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(le=t==null?void 0:t.addUsers)==null?void 0:le.constructionManager,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,constructionManager:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Construction Manager..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Inspector for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:x,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(ie=t==null?void 0:t.addUsers)==null?void 0:ie.companyInspector,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,companyInspector:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Inspector..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Select Independent Controller for this Project"}),e.jsx(s,{sm:"10",children:e.jsx(U,{multiple:!0,options:g,getOptionLabel:n=>n.name,isOptionEqualToValue:(n,a)=>n._id===a._id,value:(re=t==null?void 0:t.addUsers)==null?void 0:re.independentController,onChange:(n,a)=>{l(p=>({...p,addUsers:{...p.addUsers,independentController:a}}))},renderInput:n=>e.jsx(F,{...n,variant:"outlined",placeholder:"Search and select Inspector..."}),renderTags:(n,a)=>n.map((p,w)=>e.jsx(R,{label:p.name,...a({index:w})})),sx:{"& .MuiOutlinedInput-root":{borderRadius:"6px",backgroundColor:"#f8f9fa",padding:"5px"}}})})]}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(M,{onClick:()=>{h("add-certificate-schemes")},type:"submit",variant:"primary",className:"me-1",children:"Next"})})})]})})})]})}const _e=({form:t,setForm:l,setActiveTab:h})=>{var D,x,y;const{companyId:i}=J(),m=xe(),[o,f]=b.useState([]),[j,E]=b.useState([]),S=b.useRef(null),C=g=>{const{name:d,value:P}=g.target;l({...t,addDrawing:{...t.addDrawing,[d]:P}})};b.useEffect(()=>{(async()=>{try{const P=await(await fetch(`${O}/get-plans`)).json();f(P)}catch(d){console.error("Error fetching plans:",d)}})()},[]);const c=g=>{var A;const d=Array.from(g.target.files),P=[...(A=t==null?void 0:t.addDrawing)==null?void 0:A.pictures,...d],$=[...j,...d.map(k=>URL.createObjectURL(k))];l({...t,addDrawing:{...t.addDrawing,pictures:P}}),E($)},u=g=>{var A;const d=(A=t==null?void 0:t.addDrawing)==null?void 0:A.pictures.filter((k,L)=>L!==g),P=j.filter((k,L)=>L!==g);l({...t,addDrawing:{...t.addDrawing,pictures:d}}),E(P);const $=new DataTransfer;d.forEach(k=>$.items.add(k)),S.current&&(S.current.files=$.files)},v=async g=>{var $,A,k,L;g.preventDefault();const d=new FormData;if(!((A=($=t==null?void 0:t.basicDetails)==null?void 0:$.name)==null?void 0:A.toString().trim())){alert("Please enter the project name in basic Detial at least.");return}d.append("basicDetails",JSON.stringify(t.basicDetails)),d.append("professions",JSON.stringify(t.professions)),d.append("addUsers",JSON.stringify(t.addUsers)),d.append("addDrawing",JSON.stringify(t.addDrawing)),d.append("plan",JSON.stringify(t.plan)),d.append("certificateSchema",JSON.stringify(t.certificateSchema)),d.append("independentController",JSON.stringify(t.independentController)),d.append("companyId",i),(k=t==null?void 0:t.addDrawing)==null||k.pictures.forEach(I=>{d.append("addDrawingPictures",I)}),(L=t==null?void 0:t.plan)==null||L.pictures.forEach(I=>{d.append("planPictures",I)});try{const I=await fetch(`${O}/add-project`,{method:"POST",body:d});if(I.ok){const Z=await I.json();m(`/dashboard/companies/view/${i}`,{state:{success:"Project added successfully!"}})}else console.error("Error:",I.statusText)}catch(I){console.error("Fetch error:",I)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Drawing & Document"}),e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(K,{title:"Add Dwaring & Document",children:e.jsxs(r,{children:[e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(D=t==null?void 0:t.addDrawing)==null?void 0:D.name,onChange:C,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Description"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:t==null?void 0:t.addDrawing.description,onChange:C,name:"description",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Date"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(x=t==null?void 0:t.addDrawing)==null?void 0:x.date,onChange:C,name:"date",type:"date",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Updated Date"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(y=t==null?void 0:t.addDrawing)==null?void 0:y.updatedDate,onChange:C,name:"updatedDate",type:"date",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Select Drawing Or Document"}),e.jsx(s,{sm:"10",children:e.jsxs(V,{value:t.checkbox,name:"checkbox",onChange:C,children:[e.jsx("option",{defaultValue:"",children:"Select"}),e.jsx("option",{value:"Drawing",children:"Drawing"}),e.jsx("option",{value:"Document",children:"Document"})]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"multiple-file-input",className:"col-sm-2 col-form-label text-end",children:"Pictures"}),e.jsxs(s,{sm:"10",children:[e.jsx(T,{type:"file",id:"multiple-file-input",name:"pictures",onChange:c,accept:"image/*",multiple:!0,ref:S}),e.jsx("div",{className:"mt-3 d-flex flex-wrap",children:j.map((g,d)=>e.jsxs("div",{className:"position-relative me-2 mb-2",children:[e.jsx(he,{src:g,alt:`Preview ${d}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx(M,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:()=>u(d),style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"×"})]},d))})]})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(M,{onClick:v,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})]})},Ke=({form:t,setForm:l,setActiveTab:h})=>{var S,C;const[i,m]=b.useState([]),o=b.useRef(null);J(),xe();const f=c=>{const{name:u,value:v}=c.target;l({...t,plan:{...t.plan,[u]:v}})},j=c=>{var x;const u=Array.from(c.target.files),v=[...(x=t==null?void 0:t.plan)==null?void 0:x.pictures,...u],D=[...i,...u.map(y=>URL.createObjectURL(y))];l({...t,plan:{...t.plan,pictures:v}}),m(D)},E=c=>{var x;const u=(x=t==null?void 0:t.plan)==null?void 0:x.pictures.filter((y,g)=>g!==c),v=i.filter((y,g)=>g!==c);l({...t,plan:{...t.plan,pictures:u}}),m(v);const D=new DataTransfer;u.forEach(y=>D.items.add(y)),o.current&&(o.current.files=D.files)};return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Plan"}),e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(K,{title:"Add Plan",children:e.jsxs(r,{children:[e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(S=t==null?void 0:t.plan)==null?void 0:S.name,onChange:f,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Description"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(C=t==null?void 0:t.plan)==null?void 0:C.description,onChange:f,name:"description",type:"text",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"multiple-file-input",className:"col-sm-2 col-form-label text-end",children:"Pictures"}),e.jsxs(s,{sm:"10",children:[e.jsx(T,{type:"file",id:"multiple-file-input",name:"pictures",onChange:j,accept:"image/*",multiple:!0,ref:o}),e.jsx("div",{className:"mt-3 d-flex flex-wrap",children:i.map((c,u)=>e.jsxs("div",{className:"position-relative me-2 mb-2",children:[e.jsx(he,{src:c,alt:`Preview ${u}`,fluid:!0,rounded:!0,style:{maxWidth:"100px",maxHeight:"100px"}}),e.jsx(M,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0",onClick:()=>E(u),style:{transform:"translate(50%, -50%)",borderRadius:"50%"},children:"×"})]},u))})]})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(M,{type:"submit",variant:"primary",className:"me-1",onClick:()=>{h("add-drawing-document")},children:"Next"})})})]})})})})]})},qe=({form:t,setForm:l,setActiveTab:h})=>{var E,S,C;const[i,m]=b.useState([]),[o,f]=b.useState([]),j=c=>{const{name:u,value:v}=c.target;l({...t,certificateSchema:{...t.certificateSchema,[u]:v}})};return b.useEffect(()=>{(async()=>{try{const v=await(await fetch(`${O}/get-items`)).json();m(v)}catch(u){console.error("Error fetching items:",u)}})()},[]),b.useEffect(()=>{(async()=>{try{const v=await(await fetch(`${O}/get-levels`)).json();f(v)}catch(u){console.error("Error fetching levels:",u)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Certificate Scheme"}),e.jsx(r,{className:"justify-content-center",children:e.jsx(s,{children:e.jsx(K,{title:"Add Certificate Scheme",children:e.jsxs(r,{children:[e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Start Date"}),e.jsx(s,{sm:"10",children:e.jsx(T,{value:(E=t==null?void 0:t.certificateSchema)==null?void 0:E.startDate,onChange:j,name:"startDate",type:"date",id:"example-text-input"})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Select Item"}),e.jsx(s,{sm:"10",children:e.jsxs(V,{value:(S=t==null?void 0:t.certificateSchema)==null?void 0:S.item,name:"item",onChange:j,children:[e.jsx("option",{defaultValue:"",children:"Select item"}),i.map(c=>e.jsx("option",{value:c._id,children:c.name},c.id))]})})]})}),e.jsx(s,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{className:"col-sm-2 col-form-label text-end",children:"Select Level"}),e.jsx(s,{sm:"10",children:e.jsxs(V,{value:(C=t==null?void 0:t.certificateSchema)==null?void 0:C.level,name:"level",onChange:j,children:[e.jsx("option",{defaultValue:"",children:"Select level"}),o.map(c=>e.jsx("option",{value:c._id,children:c.name},c.id))]})})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(s,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(M,{onClick:()=>{h("add-plans")},type:"submit",variant:"primary",className:"me-1",children:"Next"})})})]})})})})]})},Je={basicDetails:{name:"",address:"",postCode:"",city:"",startDate:"",projectDeadLine:"",govtDocDeadLine:"",functionalTestDeadLine:"",case_no:""},professions:[],addUsers:{worker:[],subContractor:[],mainConstructor:[],safetyCoordinator:[],advisor:[],constructionManager:[],inspector:[],independentController:[]},addDrawing:{name:"",description:"",checkbox:null,date:null,updatedDate:null,planId:null,pictures:[]},plan:{name:"",description:"",pictures:[]},certificateSchema:{item:null,level:null,startDate:""}},ut=()=>{const[t,l]=b.useState(Je),[h,i]=b.useState("basic"),m=[{key:"basic",title:"Basic Details",content:e.jsx(Re,{form:t,setForm:l,setActiveTab:i})},{key:"add-profession",title:"Add Profession",content:e.jsx(Le,{form:t,setForm:l,setActiveTab:i})},{key:"add-users",title:"Add Users",content:e.jsx(Me,{form:t,setForm:l,setActiveTab:i})},{key:"add-certificate-schemes",title:"Certificate Schemes",content:e.jsx(qe,{form:t,setForm:l,setActiveTab:i})},{key:"add-plans",title:"Plans",content:e.jsx(Ke,{form:t,setForm:l,setActiveTab:i})},{key:"add-drawing-document",title:"Add Dwaring & Document",content:e.jsx(_e,{form:t,setForm:l,setActiveTab:i})}];return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Add Project"}),e.jsx(K,{title:"Add Project",children:e.jsx(Ce,{id:"add-project-tabs",activeKey:h,onSelect:o=>{i(o)},className:"mb-3",children:m.map(o=>e.jsx(Ue,{eventKey:o.key,title:o.title,children:o.content},o.key))})})]})};export{ut as default};

import{r as t,b as S,a as y,j as e,R as i,C as o}from"./index-B342vN8a.js";import{C as N}from"./ComponentContainerCard-BIxSgnld.js";import{P as E}from"./PageMetaData-__vP5leC.js";import{B as l}from"./urls-CvG9cD6N.js";import{F as p}from"./FormLabel-f-qql_Cp.js";import{F as f}from"./FormControl-CJr_RFax.js";import{B as F}from"./Button-BnzdNfRx.js";import"./Card-CI8IuqFE.js";import"./divWithClassName-BnSMb2ls.js";import"./FormContext-BMEMUOIr.js";const Q=()=>{const[r,m]=t.useState(null),[x,u]=t.useState(!1),[h,j]=t.useState(!0),[v,w]=t.useState(null),[C,I]=t.useState(null),[R,$]=t.useState([]),[B,D]=t.useState([]),{professionId:c}=S(),g=y();t.useRef(null),t.useRef(null);const[L,O]=t.useState([]);t.useEffect(()=>{c&&fetch(`${l}/get-profession-detail/${c}`).then(async n=>{const a=await n.json();m({...a})}).catch(n=>console.error(n)).finally(()=>j(!1))},[c]);const d=n=>{const{name:a,value:s}=n.target;m({...r,[a]:s})};t.useEffect(()=>{(async()=>{try{const s=await(await fetch(`${l}/get-projects`)).json();b(s)}catch(a){console.error("Error fetching projects:",a)}})()},[]);const[T,b]=t.useState([]),P=async n=>{n.preventDefault(),u(!0);const a=new FormData;Object.keys(r).forEach(s=>{a.append(s,r[s])});try{const s=await fetch(`${l}/update-profession/${c}`,{method:"POST",body:a});if(s.ok){const k=await s.json();g("/dashboard/professions",{state:{success:"Profession updated successfully!"}})}else console.error("Error:",s.statusText)}catch(s){console.error("Fetch error:",s)}u(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Edit Profession"}),h?null:e.jsx("form",{onSubmit:P,children:e.jsx(i,{className:"justify-content-center",children:e.jsx(o,{children:e.jsx(N,{title:"Edit Profession",children:e.jsxs(i,{children:[e.jsx(o,{lg:"6",children:e.jsxs(i,{className:"mb-3",children:[e.jsx(p,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Name"}),e.jsx(o,{sm:"10",children:e.jsx(f,{value:r==null?void 0:r.name,onChange:d,name:"name",type:"text",id:"example-text-input"})})]})}),e.jsx(o,{lg:"6",children:e.jsxs(i,{className:"mb-3",children:[e.jsx(p,{htmlFor:"example-text-input",className:"col-sm-2 col-form-label text-end",children:"Index Number"}),e.jsx(o,{sm:"10",children:e.jsx(f,{value:r==null?void 0:r.indexNumber,onChange:d,name:"indexNumber",type:"text",id:"example-text-input"})})]})}),e.jsx(i,{className:"mb-3 d-flex justify-content-center",children:e.jsx(o,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(F,{disabled:x,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{Q as default};

import{r as s,a as y,G as C,j as e,R as r,C as n}from"./index-DpbIAROa.js";import{C as g}from"./ComponentContainerCard-kAFFVE0Z.js";import{P as F}from"./PageMetaData-C6UhIQjj.js";import{B as P}from"./urls-CXtk4x-h.js";import{F as R}from"./FormLabel-BVfCwwhh.js";import{F as v}from"./FormControl-CRveXHIl.js";import{B as w}from"./Button-DGaw8vsr.js";import"./Card-DYgbdisJ.js";import"./divWithClassName-DPLQ3Lm2.js";const N={},$=()=>{s.useState(N);const[m,c]=s.useState(!1),u=y(),[i,p]=s.useState(null),[E,f]=s.useState(null),x=s.useRef(null),{selectedCompany:h,selectedProjects:j,selectedProfession:U,companies:A,projects:B}=s.useContext(C),[l,D]=s.useState([]);s.useState([]),s.useRef(null);const S=o=>{const t=o.target.files[0];if(p(t),t){const a=URL.createObjectURL(t);f(a)}},b=async o=>{o.preventDefault(),c(!0);try{const t=new FormData;i&&t.append("file",i),t.append("companyId",h),t.append("projectsId",j),l.length>0&&l.forEach(d=>{t.append("pictures",d)});const a=await fetch(`${P}/store-standard`,{method:"POST",body:t});if(a.ok){const d=await a.json();u("/dashboard/standards",{state:{success:"Standard added successfully!"}})}else console.error("Error:",a.statusText)}catch(t){console.error("Fetch error:",t)}c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Add Standard"}),e.jsx("form",{onSubmit:b,children:e.jsx(r,{className:"justify-content-center",children:e.jsx(n,{children:e.jsx(g,{title:"Add Standard",children:e.jsxs(r,{children:[e.jsx(n,{lg:"6",children:e.jsxs(r,{className:"mb-3",children:[e.jsx(R,{htmlFor:"file-input",className:"col-sm-2 col-form-label text-end",children:"Upload Excel File"}),e.jsx(n,{sm:"10",children:e.jsx(v,{type:"file",id:"file-input",name:"picture",onChange:S,ref:x})})]})}),e.jsx(r,{className:"mb-3 d-flex justify-content-center",children:e.jsx(n,{sm:"12",className:"d-flex justify-content-end",children:e.jsx(w,{disabled:m,type:"submit",variant:"primary",className:"me-1",children:"Submit"})})})]})})})})})]})};export{$ as default};

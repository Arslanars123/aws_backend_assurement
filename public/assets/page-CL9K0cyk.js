import{c as w,a as y,r as p,b as g,j as o,R as u,C as I}from"./index-CEbbE1Sf.js";import{C as $}from"./ComponentContainerCard-BpYspYtC.js";import{B as f}from"./urls-CvG9cD6N.js";import{G as v}from"./EditPage-DjBuulxC.js";import"./Card-mt6mV6AB.js";import"./divWithClassName-CT9nWrpT.js";import"./Button-CWQV4UHt.js";import"./utils-CJbgxhCN.js";import"./Form-Bl01aL9q.js";import"./FormCheck-BT2cigWF.js";import"./FormControl-DFJ9Ydzw.js";import"./FormContext-CSwRqVJr.js";import"./FormGroup-Dn5oDdrP.js";import"./FormLabel-WQTNbj7P.js";import"./FormRange-MzNiwPri.js";import"./FormSelect-Dmi-PE_I.js";import"./Image-ULHo9GWi.js";import"./TextField-CeDJPKh1.js";import"./useFormControl-BPpZZpE7.js";import"./assertThisInitialized-B9jnkVVz.js";import"./createPopper-C8K2eoCJ.js";const J=()=>{const{setLoading:e}=w(),i=y(),[h,j]=p.useState(null),{companyId:r,independentControllerId:c}=g();p.useEffect(()=>{c&&(e(!0),fetch(`${f}/get-user-detail/${c}`).then(async a=>{const s=await a.json();s==null||delete s.projectsId,s==null||delete s.companyId,s==null||delete s.phone,s==null||delete s.address,s==null||delete s.postalCode,s==null||delete s.city,s==null||delete s.userRole,s==null||delete s.password,s==null||delete s.startDate,s==null||delete s.isProjectManager,s==null||delete s.type,s==null||delete s.mainId,s==null||delete s.userProfession,s==null||delete s.picture2,s==null||delete s.contactPicture,j(s)}).catch(a=>console.error(a)).finally(()=>e(!1)))},[c]);const x=async a=>{try{const s=new FormData;Object.keys(a).forEach(t=>{t==="picture"&&a[t],s.append(t,a[t])});const m=await fetch(`${f}/update-user/${c}`,{method:"POST",body:s});m.ok?i(`/dashboard/companies/view/${r}`):console.error("Error:",m.statusText)}catch(s){console.error("Error:",s)}},E=()=>{i(`/dashboard/companies/view/${r}/independentControllerView/view/${c}`)},b={fieldTypes:{picture:"file"},placeholders:{picture:"Upload profile picture"}};return o.jsx(u,{className:"justify-content-center",children:o.jsx(I,{lg:"12",children:o.jsx($,{title:"Edit Independent Controller",children:o.jsx(u,{children:o.jsx(v,{data:h,onSave:x,disabledFields:["_id","role"],onCancel:E,otherOptions:b})})})})})};export{J as default};

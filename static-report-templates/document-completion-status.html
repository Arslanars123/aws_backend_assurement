<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Completion Status</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: white;
            color: #333;
            line-height: 1.6;
        }

        .page {
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            padding: 20mm;
            background: white;
            position: relative;
        }

        .header {
            margin-bottom: 30px;
        }

        .main-title {
            font-size: 28px;
            font-weight: bold;
            color: #374151;
            margin-bottom: 30px;
        }

        .content-section {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }

        .flowchart-section {
            flex: 1;
        }

        .text-section {
            flex: 1;
            padding-left: 20px;
        }

        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .phase-box {
            background-color: #f8fafc;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px 20px;
            text-align: center;
            min-width: 200px;
            position: relative;
        }

        .phase-title {
            font-weight: bold;
            font-size: 14px;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .phase-status {
            font-size: 12px;
            color: #6b7280;
            font-style: italic;
        }

        .arrow {
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 12px solid #6b7280;
            margin: 5px 0;
        }

        .storage-section {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .storage-box {
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            flex: 1;
        }

        .storage-icons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .storage-icon {
            width: 24px;
            height: 24px;
            background-color: #9ca3af;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .storage-title {
            font-size: 11px;
            font-weight: bold;
            color: #374151;
        }

        .description-text {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.8;
        }

        .description-text p {
            margin-bottom: 15px;
        }

        .separator {
            border-top: 2px solid #e5e7eb;
            margin: 30px 0;
        }

        .status-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .status-table th {
            background-color: #374151;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
            font-size: 16px;
        }

        .status-table td {
            padding: 15px;
            border-bottom: 1px solid #e5e7eb;
            border-right: 1px solid #e5e7eb;
        }

        .status-table tr:nth-child(even) {
            background-color: #f9fafb;
        }

        .status-table tr:last-child td {
            border-bottom: none;
        }

        .status-table td:last-child {
            border-right: none;
        }

        .date-field {
            color: #1f2937;
            font-weight: 500;
        }

        .status-field {
            color: #1f2937;
            font-weight: 500;
        }

        .status-approved {
            color: #059669;
            font-weight: bold;
        }

        .status-under-construction {
            color: #d97706;
            font-weight: bold;
        }

        @media print {
            .page {
                margin: 0;
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <div class="page">
        <div class="header">
            <h1 class="main-title">Document completion status</h1>
        </div>

        <div class="content-section">
            <div class="flowchart-section">
                <div class="flowchart">
                    <div class="phase-box">
                        <div class="phase-title">UDARBEJDELSEFASE</div>
                        <div class="phase-status">Under udarbejdelse</div>
                    </div>
                    <div class="arrow"></div>
                    
                    <div class="phase-box">
                        <div class="phase-title">GODKENDELSESFASE</div>
                        <div class="phase-status">Under kontrol</div>
                    </div>
                    <div class="arrow"></div>
                    
                    <div class="phase-box">
                        <div class="phase-title">UDGIVELSESFASE</div>
                        <div class="phase-status">Udgivet</div>
                    </div>
                    <div class="arrow"></div>
                    
                    <div class="phase-box">
                        <div class="phase-title">AKTIVFASE</div>
                        <div class="phase-status">Udgivet</div>
                    </div>
                    <div class="arrow"></div>
                    
                    <div class="phase-box">
                        <div class="phase-title">REVISIONSFASE</div>
                        <div class="phase-status">Under udarbejdelse</div>
                    </div>
                    
                    <div class="storage-section">
                        <div class="storage-box">
                            <div class="storage-icons">
                                <div class="storage-icon">üìÅ</div>
                                <div class="storage-icon">üíø</div>
                                <div class="storage-icon">üíæ</div>
                            </div>
                            <div class="storage-title">HARD KOPIMEDIEOPBEVARING</div>
                        </div>
                        
                        <div class="storage-box">
                            <div class="storage-icons">
                                <div class="storage-icon">üì∂</div>
                                <div class="storage-icon">üíª</div>
                                <div class="storage-icon">‚òÅÔ∏è</div>
                            </div>
                            <div class="storage-title">DIGITAL OPBEVARING</div>
                        </div>
                    </div>
                    
                    <div class="arrow"></div>
                    <div class="phase-box">
                        <div class="phase-title">ARKIVERINGSFASE</div>
                        <div class="phase-status">Erkl√¶ret / opbevaret</div>
                    </div>
                </div>
            </div>

            <div class="text-section">
                <div class="description-text">
                    <p>The figure to the right from SBI 271 Item 4.3 indicates which phase you are in in your document submissions, and must also help to ensure that both the contractor and the consultant work proactively to communicate back and forth in connection with any corrections.</p>
                    
                    <p>The document is signed when this has been approved by the structural engineer, until then the document is a dynamic document.</p>
                    
                    <p>Expected approval time 14 days, after which the content of the document is considered approved.</p>
                </div>
            </div>
        </div>

        <div class="separator"></div>

        <table class="status-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="date-field" id="current-date">Loading...</td>
                    <td class="status-field" id="document-status">Loading...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        // Function to get current date in DD-MM-YYYY format
        function getCurrentDate() {
            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            return `${day}-${month}-${year}`;
        }

        // Function to determine status based on number of signatures
        function getDocumentStatus(signatureCount) {
            if (signatureCount >= 3) {
                return 'Approved';
            } else {
                return 'Under Construction';
            }
        }

        // Function to update the page with signature data
        function updateDocumentStatus(signatureCount = 0) {
            const currentDateElement = document.getElementById('current-date');
            const statusElement = document.getElementById('document-status');
            
            // Set current date
            currentDateElement.textContent = getCurrentDate();
            
            // Determine and set status
            const status = getDocumentStatus(signatureCount);
            statusElement.textContent = status;
            
            // Apply appropriate styling
            if (status === 'Approved') {
                statusElement.className = 'status-field status-approved';
            } else {
                statusElement.className = 'status-field status-under-construction';
            }
        }

        // Initialize the page when it loads
        document.addEventListener('DOMContentLoaded', function() {
            // You have 3 signatures, so status should be "Approved"
            updateDocumentStatus(3);
        });

        // Function to update status from external data (can be called from API)
        window.updateStatusFromAPI = function(signatureCount) {
            updateDocumentStatus(signatureCount);
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Company Organization</title>
  <style>
    body { 
      font-family: 'Lato', Arial, sans-serif; 
      margin: 40px; 
      color: #333; 
      line-height: 1.6;
    }
    .section-header {
      background-color: #0B1F4D; 
      color: white; 
      padding: 10px 15px;
      font-weight: bold; 
      font-size: 16px; 
      margin-bottom: 20px;
    }
    table {
      width: 100%; 
      border-collapse: collapse; 
      margin-bottom: 30px;
    }
    th, td {
      border: 1px solid #999; 
      padding: 8px; 
      vertical-align: top;
    }
    th { 
      background-color: #d9d9d9; 
      text-align: left; 
    }
    .empty-cell {
      color: #999;
      font-style: italic;
    }
  </style>
</head>
<body>

  <div class="section-header">7. COMPANY ORGANIZATION</div>

  {{#if subcontractors}}
    <!-- SUBCONTRACTOR -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th colspan="2">SUBCONTRACTOR</th>
      </tr>
      {{#each subcontractors}}
        <tr><td rowspan="8">{{formatDate this.startDate}}</td><td>COMPANY NAME:</td><td>{{this.name}}</td></tr>
        <tr><td>CONTACT PERSON</td><td>{{#if this.contactPerson}}{{this.contactPerson}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>CVR NO.:</td><td>{{#if this.cvr}}{{this.cvr}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>PROFESSION:</td><td>{{#if this.userProfession}}{{#each this.userProfession}}{{this.GroupName}}{{#unless @last}}, {{/unless}}{{/each}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>ADDRESS:</td><td>{{this.address}}</td></tr>
        <tr><td>POSTCODE:</td><td>{{this.postalCode}}</td></tr>
        <tr><td>TELEPHONE:</td><td>{{this.phone}}</td></tr>
        <tr><td>EMAIL</td><td>{{this.username}}</td></tr>
      {{/each}}
    </table>
  {{else}}
    <!-- Fallback SUBCONTRACTOR table -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th colspan="2">SUBCONTRACTOR</th>
      </tr>
      <tr><td rowspan="8"></td><td>COMPANY NAME:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>CONTACT PERSON</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>CVR NO.:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>PROFESSION:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>ADDRESS:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>POSTCODE:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>TELEPHONE:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>EMAIL</td><td><span class="empty-cell">Empty</span></td></tr>
    </table>
  {{/if}}

  {{#if projectManagers}}
    <!-- PROJECT MANAGER -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th colspan="2">PROJECT MANAGER</th>
      </tr>
      {{#each projectManagers}}
        <tr><td rowspan="2">{{formatDate this.startDate}}</td><td>ROLE</td><td>{{this.userRole}}</td></tr>
        <tr><td>NAME</td><td>{{this.name}}</td></tr>
      {{/each}}
    </table>
  {{else}}
    <!-- Fallback PROJECT MANAGER table -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th colspan="2">PROJECT MANAGER</th>
      </tr>
      <tr><td rowspan="2"></td><td>ROLE</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>NAME</td><td><span class="empty-cell">Empty</span></td></tr>
    </table>
  {{/if}}

  <!-- OWN HEALTH/SAFETY REPRESENTATIVE -->
  <table>
    <tr>
      <th style="width: 15%;">DATE</th>
      <th colspan="2">OWN HEALTH/SAFETY REPRESENTATIVE</th>
    </tr>
    <tr><td rowspan="2"></td><td>ROLE</td><td><span class="empty-cell">Empty</span></td></tr>
    <tr><td>NAME</td><td><span class="empty-cell">Empty</span></td></tr>
  </table>

  {{#if subcontractors}}
    <!-- SUBCONTRACTOR TO SUBCONTRACTOR -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th colspan="2">SUBCONTRACTOR TO SUBCONTRACTOR</th>
      </tr>
      {{#each subcontractors}}
        <tr><td rowspan="8">{{formatDate this.startDate}}</td><td>NAME:</td><td>{{this.name}}</td></tr>
        <tr><td>CONTACT PERSON</td><td>{{#if this.contactPerson}}{{this.contactPerson}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>CVR NO.:</td><td>{{#if this.cvr}}{{this.cvr}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>ADDRESS:</td><td>{{this.address}}</td></tr>
        <tr><td>POSTCODE:</td><td>{{this.postalCode}}</td></tr>
        <tr><td>TELEPHONE:</td><td>{{this.phone}}</td></tr>
        <tr><td>EMAIL:</td><td>{{this.username}}</td></tr>
        <tr><td>PROFESSION</td><td>{{#if this.userProfession}}{{#each this.userProfession}}{{this.GroupName}}{{#unless @last}}, {{/unless}}{{/each}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
      {{/each}}
    </table>
  {{else}}
    <!-- Fallback SUBCONTRACTOR TO SUBCONTRACTOR table -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th colspan="2">SUBCONTRACTOR TO SUBCONTRACTOR</th>
      </tr>
      <tr><td rowspan="8"></td><td>NAME:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>CONTACT PERSON</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>CVR NO.:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>ADDRESS:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>POSTCODE:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>TELEPHONE:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>EMAIL:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>PROFESSION</td><td><span class="empty-cell">Empty</span></td></tr>
    </table>
  {{/if}}

  {{#if independentControllers}}
    <!-- INDEPENDENT INSPECTOR -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th>NAME:</th>
        <th>INDEPENDENT INSPECTOR OR OTHER CONTROL</th>
      </tr>
      {{#each independentControllers}}
        <tr><td rowspan="7">{{formatDate this.startDate}}</td><td>NAME:</td><td>{{this.name}}</td></tr>
        <tr><td>CONTACT PERSON</td><td>{{#if this.contactPerson}}{{this.contactPerson}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>CVR NO.:</td><td>{{#if this.cvr}}{{this.cvr}}{{else}}<span class="empty-cell">Empty</span>{{/if}}</td></tr>
        <tr><td>ADDRESS:</td><td>{{this.address}}</td></tr>
        <tr><td>POSTCODE:</td><td>{{this.postalCode}}</td></tr>
        <tr><td>TELEPHONE:</td><td>{{this.phone}}</td></tr>
        <tr><td>EMAIL</td><td>{{this.username}}</td></tr>
      {{/each}}
    </table>
  {{else}}
    <!-- Fallback INDEPENDENT INSPECTOR table -->
    <table>
      <tr>
        <th style="width: 15%;">DATE</th>
        <th>NAME:</th>
        <th>INDEPENDENT INSPECTOR OR OTHER CONTROL</th>
      </tr>
      <tr><td rowspan="7"></td><td>NAME:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>CONTACT PERSON</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>CVR NO.:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>ADDRESS:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>POSTCODE:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>TELEPHONE:</td><td><span class="empty-cell">Empty</span></td></tr>
      <tr><td>EMAIL</td><td><span class="empty-cell">Empty</span></td></tr>
    </table>
  {{/if}}

</body>
</html> 